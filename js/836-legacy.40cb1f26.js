"use strict";(self["webpackChunkvue_firebase_crud_app"]=self["webpackChunkvue_firebase_crud_app"]||[]).push([[836],{8836:function(t,e,o){o.r(e),o.d(e,{default:function(){return C}});var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"row"},[o("div",[o("b-button",{staticClass:"float-right",attrs:{variant:"success"},on:{click:function(e){t.show_popup_them_moi=!0}}},[t._v("Thêm mới")]),o("b-modal",{attrs:{title:"Thêm mới",size:"lg"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[o("div",{staticClass:"w-100"},[o("b-button",{staticClass:"float-right",attrs:{variant:"primary",size:"sm"},on:{click:function(e){t.show_popup_them_moi=!1}}},[t._v(" Đóng ")])],1)]},proxy:!0}]),model:{value:t.show_popup_them_moi,callback:function(e){t.show_popup_them_moi=e},expression:"show_popup_them_moi"}},[o("themmoi")],1),o("b-modal",{attrs:{title:"Cập nhật hóa đơn",size:"lg"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[o("div",{staticClass:"w-100"},[o("b-button",{staticClass:"float-right",attrs:{variant:"primary",size:"sm"},on:{click:function(e){t.show_popup_sua=!1}}},[t._v(" Đóng ")])],1)]},proxy:!0}]),model:{value:t.show_popup_sua,callback:function(e){t.show_popup_sua=e},expression:"show_popup_sua"}},[o("sua",{attrs:{chitiethoadon_item:t.chitiet_hoadon_item_selected}})],1)],1),o("div",{staticClass:"col-md-12"},[o("p",{staticClass:"h5 font-weight-bold text-center"},[t._v("Danh sách")]),o("b-form-group",{staticClass:"my-2",attrs:{label:"Tìm kiếm","label-for":"filter-input"}},[o("b-input-group",{attrs:{size:"sm"}},[o("b-form-input",{attrs:{id:"filter-input",type:"search",placeholder:"Nhập từ khóa để tìm kiếm"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),o("b-input-group-append",[o("b-button",{attrs:{disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("Xóa")])],1)],1)],1),o("b-table",{staticClass:"table-hoadon",attrs:{striped:"",hover:"",items:t.danh_sach_chi_tiet_hoa_don,fields:t.fields_table,filter:t.filter,"per-page":t.perPage,"current-page":t.currentPage,id:"my-table"},scopedSlots:t._u([{key:"cell(giasi)",fn:function(e){return[t._v(" "+t._s(t.formatMoney(e.item.giasi,0,2))+" VNĐ ")]}},{key:"cell(giack)",fn:function(e){return[t._v(" "+t._s(t.formatMoney(e.item.giack,0,2))+" VNĐ ")]}},{key:"cell(gianhap)",fn:function(e){return[t._v(" "+t._s(t.formatMoney(e.item.gianhap,0,2))+" VNĐ ")]}},{key:"cell(bonus)",fn:function(e){return[t._v(" "+t._s(t.formatMoney(e.item.bonus,0,2))+" VNĐ ")]}},{key:"cell(thanhtien)",fn:function(e){return[t._v(" "+t._s(t.formatMoney(e.item.thanhtien,0,2))+" VNĐ ")]}},{key:"cell(key)",fn:function(e){return[o("button",{staticClass:"btn btn-info",on:{click:function(o){o.preventDefault(),t.chitiet_hoadon_item_selected=JSON.parse(JSON.stringify(e.item)),t.show_popup_sua=!0}}},[t._v(" Sửa ")]),o("button",{staticClass:"btn btn-danger ml-2",on:{click:function(o){return o.preventDefault(),t.deleteHoadon(e.item.key)}}},[t._v(" Xóa ")])]}}])}),o("b-pagination",{attrs:{"total-rows":t.danh_sach_chi_tiet_hoa_don.length,"per-page":t.perPage,"aria-controls":"my-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),o("div",[o("b-button",{attrs:{variant:"primary"},on:{click:function(e){return t.$router.back()}}},[t._v("Trở lại")])],1)])},i=[],n=(o(1539),o(4747),o(4805)),s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"row justify-content-center"},[o("div",{},[o("h3",{staticClass:"text-center"},[t._v("Thêm mới sản phẩm vào hóa đơn")]),o("form",{on:{submit:function(e){return e.preventDefault(),t.themmoi.apply(null,arguments)}}},[o("div",{staticClass:"form-group m-2"},[o("label",[t._v("Tên sản phẩm")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.chitiethoadon.tensp,expression:"chitiethoadon.tensp"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.chitiethoadon.tensp},on:{input:function(e){e.target.composing||t.$set(t.chitiethoadon,"tensp",e.target.value)}}})]),o("div",{staticClass:"form-group m-2"},[o("label",[t._v("Số lượng")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.chitiethoadon.soluong,expression:"chitiethoadon.soluong"}],staticClass:"form-control",attrs:{type:"number",required:""},domProps:{value:t.chitiethoadon.soluong},on:{keydown:t.update_gia,input:function(e){e.target.composing||t.$set(t.chitiethoadon,"soluong",e.target.value)}}})]),o("div",{staticClass:"form-group m-2"},[o("label",[t._v("Giá sỉ")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.chitiethoadon.giasi,expression:"chitiethoadon.giasi"}],staticClass:"form-control",attrs:{type:"number",required:""},domProps:{value:t.chitiethoadon.giasi},on:{keydown:t.update_gia,input:function(e){e.target.composing||t.$set(t.chitiethoadon,"giasi",e.target.value)}}})]),o("div",{staticClass:"form-group m-2"},[o("label",[t._v("Giá chiết khấu")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.chitiethoadon.giack,expression:"chitiethoadon.giack"}],staticClass:"form-control",attrs:{type:"number",required:""},domProps:{value:t.chitiethoadon.giack},on:{input:function(e){e.target.composing||t.$set(t.chitiethoadon,"giack",e.target.value)}}})]),o("div",{staticClass:"form-group m-2"},[o("label",[t._v("Giá nhập")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.chitiethoadon.gianhap,expression:"chitiethoadon.gianhap"}],staticClass:"form-control",attrs:{type:"number",required:""},domProps:{value:t.chitiethoadon.gianhap},on:{keydown:t.update_gia,input:function(e){e.target.composing||t.$set(t.chitiethoadon,"gianhap",e.target.value)}}})]),o("div",{staticClass:"form-group m-2"},[o("label",[t._v("Bonus")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.chitiethoadon.bonus,expression:"chitiethoadon.bonus"}],staticClass:"form-control",attrs:{type:"number",required:""},domProps:{value:t.chitiethoadon.bonus},on:{input:function(e){e.target.composing||t.$set(t.chitiethoadon,"bonus",e.target.value)}}})]),o("div",{staticClass:"form-group m-2"},[o("label",[t._v("Thành tiền")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.chitiethoadon.thanhtien,expression:"chitiethoadon.thanhtien"}],staticClass:"form-control",attrs:{type:"number",required:""},domProps:{value:t.chitiethoadon.thanhtien},on:{input:function(e){e.target.composing||t.$set(t.chitiethoadon,"thanhtien",e.target.value)}}})]),t._m(0)])])])},r=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"form-group mt-2 mt-2"},[o("button",{staticClass:"btn btn-success btn-block"},[t._v("Thêm mới")])])}],l={data:function(){return{chitiethoadon:{mahd:"",tensp:"",giack:0,gianhap:0,giasi:0,soluong:0,thanhtien:0,bonus:0}}},methods:{themmoi:function(t){var e=this;t.preventDefault(),this.chitiethoadon.mahd=this.$route.params.id,n.db.collection("chitiethoadon").add(this.chitiethoadon).then((function(){alert("Thêm mới thành công!"),e.chitiethoadon={mahd:"",tensp:"",giack:0,gianhap:0,giasi:0,soluong:0,thanhtien:0,bonus:0}})).catch((function(t){alert("Có lỗi xảy ra vui lòng thử lại sau!"),console.log(t)}))},update_gia:function(){var t=this;setTimeout((function(){t.chitiethoadon.thanhtien=parseFloat(t.chitiethoadon.soluong)*parseFloat(t.chitiethoadon.giasi),t.chitiethoadon.bonus=parseFloat(t.chitiethoadon.soluong)*parseFloat(t.chitiethoadon.giasi)-parseFloat(t.chitiethoadon.soluong)*parseFloat(t.chitiethoadon.gianhap)}),500)}}},c=l,h=o(1001),u=(0,h.Z)(c,s,r,!1,null,null,null),d=u.exports,p=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"row justify-content-center"},[o("div",{},[o("h3",{staticClass:"text-center"},[t._v("Cập nhật hóa đơn")]),o("form",{on:{submit:function(e){return e.preventDefault(),t.capnhat.apply(null,arguments)}}},[o("div",{staticClass:"form-group m-2"},[o("label",[t._v("Tên sản phẩm")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.chitiethoadon.tensp,expression:"chitiethoadon.tensp"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.chitiethoadon.tensp},on:{input:function(e){e.target.composing||t.$set(t.chitiethoadon,"tensp",e.target.value)}}})]),o("div",{staticClass:"form-group m-2"},[o("label",[t._v("Số lượng")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.chitiethoadon.soluong,expression:"chitiethoadon.soluong"}],staticClass:"form-control",attrs:{type:"number",required:""},domProps:{value:t.chitiethoadon.soluong},on:{keydown:t.update_gia,input:function(e){e.target.composing||t.$set(t.chitiethoadon,"soluong",e.target.value)}}})]),o("div",{staticClass:"form-group m-2"},[o("label",[t._v("Giá sỉ")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.chitiethoadon.giasi,expression:"chitiethoadon.giasi"}],staticClass:"form-control",attrs:{type:"number",required:""},domProps:{value:t.chitiethoadon.giasi},on:{keydown:t.update_gia,input:function(e){e.target.composing||t.$set(t.chitiethoadon,"giasi",e.target.value)}}})]),o("div",{staticClass:"form-group m-2"},[o("label",[t._v("Giá chiết khấu")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.chitiethoadon.giack,expression:"chitiethoadon.giack"}],staticClass:"form-control",attrs:{type:"number",required:""},domProps:{value:t.chitiethoadon.giack},on:{input:function(e){e.target.composing||t.$set(t.chitiethoadon,"giack",e.target.value)}}})]),o("div",{staticClass:"form-group m-2"},[o("label",[t._v("Giá nhập")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.chitiethoadon.gianhap,expression:"chitiethoadon.gianhap"}],staticClass:"form-control",attrs:{type:"number",required:""},domProps:{value:t.chitiethoadon.gianhap},on:{keydown:t.update_gia,input:function(e){e.target.composing||t.$set(t.chitiethoadon,"gianhap",e.target.value)}}})]),o("div",{staticClass:"form-group m-2"},[o("label",[t._v("Bonus")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.chitiethoadon.bonus,expression:"chitiethoadon.bonus"}],staticClass:"form-control",attrs:{type:"number",required:""},domProps:{value:t.chitiethoadon.bonus},on:{input:function(e){e.target.composing||t.$set(t.chitiethoadon,"bonus",e.target.value)}}})]),o("div",{staticClass:"form-group m-2"},[o("label",[t._v("Thành tiền")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.chitiethoadon.thanhtien,expression:"chitiethoadon.thanhtien"}],staticClass:"form-control",attrs:{type:"number",required:""},domProps:{value:t.chitiethoadon.thanhtien},on:{input:function(e){e.target.composing||t.$set(t.chitiethoadon,"thanhtien",e.target.value)}}})]),t._m(0)])])])},m=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"form-group mt-2 mt-2"},[o("button",{staticClass:"btn btn-success btn-block"},[t._v("Cập nhật")])])}],g=(o(8862),{props:["chitiethoadon_item"],data:function(){return{chitiethoadon:{mahd:"",tensp:"",giack:0,gianhap:0,giasi:0,soluong:0,thanhtien:0,bonus:0}}},created:function(){this.chitiethoadon=JSON.parse(JSON.stringify(this.chitiethoadon_item))},methods:{capnhat:function(t){t.preventDefault(),n.db.collection("chitiethoadon").doc(this.chitiethoadon.key).update(this.chitiethoadon).then((function(){alert("Cập nhật thành công!")})).catch((function(t){alert("Có lỗi xảy ra vui lòng thử lại sau!"),console.log(t)}))},update_gia:function(){var t=this;setTimeout((function(){t.chitiethoadon.thanhtien=parseFloat(t.chitiethoadon.soluong)*parseFloat(t.chitiethoadon.giasi),t.chitiethoadon.bonus=parseFloat(t.chitiethoadon.soluong)*parseFloat(t.chitiethoadon.giasi)-parseFloat(t.chitiethoadon.soluong)*parseFloat(t.chitiethoadon.gianhap)}),500)}}}),v=g,f=(0,h.Z)(v,p,m,!1,null,null,null),_=f.exports,b={data:function(){return{show_popup_them_moi:!1,show_popup_sua:!1,filter:null,perPage:20,currentPage:1,danh_sach_chi_tiet_hoa_don:[],fields_table:[{key:"stt",label:"STT",sortable:!0},{key:"tensp",label:"Tên SP",sortable:!0},{key:"soluong",label:"Số lượng",sortable:!0},{key:"giasi",label:"Giá sỉ shop",sortable:!0},{key:"giack",label:"Giá CK",sortable:!0},{key:"gianhap",label:"Giá nhập",sortable:!0},{key:"bonus",label:"Tiền bonus",sortable:!0},{key:"thanhtien",label:"Thành tiền",sortable:!0},{key:"key",label:"Hành động",sortable:!0}],chitiet_hoadon_item_selected:{}}},components:{themmoi:d,sua:_},created:function(){var t=this;n.db.collection("chitiethoadon").where("mahd","==",this.$route.params.id).onSnapshot((function(e){t.danh_sach_chi_tiet_hoa_don=[];var o=0;e.forEach((function(e){o++,t.danh_sach_chi_tiet_hoa_don.push({key:e.id,stt:o,mahd:e.data().mahd,tensp:e.data().tensp,giack:e.data().giack,gianhap:e.data().gianhap,giasi:e.data().giasi,soluong:e.data().soluong,thanhtien:e.data().thanhtien,bonus:e.data().bonus})}))}))},methods:{deleteHoadon:function(t){window.confirm("Bạn có chắc chắn muốn xóa không?")&&n.db.collection("chitiethoadon").doc(t).delete().then((function(){console.log("Đã xóa hóa đơn!")})).catch((function(t){console.error(t)}))},formatMoney:function(t,e,o){var a=parseFloat(t);return isNaN(a)?t:(t=parseFloat(t),t.toLocaleString("en",{minimumFractionDigits:e,maximumFractionDigits:o}))}}},k=b,y=(0,h.Z)(k,a,i,!1,null,null,null),C=y.exports}}]);
//# sourceMappingURL=836-legacy.40cb1f26.js.map