(self["webpackChunkvue_firebase_crud_app"]=self["webpackChunkvue_firebase_crud_app"]||[]).push([[805],{4019:function(t){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},260:function(t,e,n){"use strict";var r,i,o,s=n(4019),a=n(9781),u=n(7854),c=n(614),h=n(111),f=n(2597),l=n(648),p=n(6330),d=n(8880),y=n(1320),v=n(3070).f,g=n(7976),m=n(9518),b=n(7674),w=n(5112),E=n(9711),I=u.Int8Array,T=I&&I.prototype,_=u.Uint8ClampedArray,S=_&&_.prototype,A=I&&m(I),N=T&&m(T),D=Object.prototype,R=u.TypeError,C=w("toStringTag"),x=E("TYPED_ARRAY_TAG"),O=E("TYPED_ARRAY_CONSTRUCTOR"),k=s&&!!b&&"Opera"!==l(u.opera),L=!1,P={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},M={BigInt64Array:8,BigUint64Array:8},F=function(t){if(!h(t))return!1;var e=l(t);return"DataView"===e||f(P,e)||f(M,e)},V=function(t){if(!h(t))return!1;var e=l(t);return f(P,e)||f(M,e)},U=function(t){if(V(t))return t;throw R("Target is not a typed array")},q=function(t){if(c(t)&&(!b||g(A,t)))return t;throw R(p(t)+" is not a typed array constructor")},j=function(t,e,n,r){if(a){if(n)for(var i in P){var o=u[i];if(o&&f(o.prototype,t))try{delete o.prototype[t]}catch(s){try{o.prototype[t]=e}catch(c){}}}N[t]&&!n||y(N,t,n?e:k&&T[t]||e,r)}},B=function(t,e,n){var r,i;if(a){if(b){if(n)for(r in P)if(i=u[r],i&&f(i,t))try{delete i[t]}catch(o){}if(A[t]&&!n)return;try{return y(A,t,n?e:k&&A[t]||e)}catch(o){}}for(r in P)i=u[r],!i||i[t]&&!n||y(i,t,e)}};for(r in P)i=u[r],o=i&&i.prototype,o?d(o,O,i):k=!1;for(r in M)i=u[r],o=i&&i.prototype,o&&d(o,O,i);if((!k||!c(A)||A===Function.prototype)&&(A=function(){throw R("Incorrect invocation")},k))for(r in P)u[r]&&b(u[r],A);if((!k||!N||N===D)&&(N=A.prototype,k))for(r in P)u[r]&&b(u[r].prototype,N);if(k&&m(S)!==N&&b(S,N),a&&!f(N,C))for(r in L=!0,v(N,C,{get:function(){return h(this)?this[x]:void 0}}),P)u[r]&&d(u[r],x,r);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:k,TYPED_ARRAY_CONSTRUCTOR:O,TYPED_ARRAY_TAG:L&&x,aTypedArray:U,aTypedArrayConstructor:q,exportTypedArrayMethod:j,exportTypedArrayStaticMethod:B,isView:F,isTypedArray:V,TypedArray:A,TypedArrayPrototype:N}},3331:function(t,e,n){"use strict";var r=n(7854),i=n(1702),o=n(9781),s=n(4019),a=n(6530),u=n(8880),c=n(2248),h=n(7293),f=n(5787),l=n(9303),p=n(7466),d=n(7067),y=n(1179),v=n(9518),g=n(7674),m=n(8006).f,b=n(3070).f,w=n(1285),E=n(1589),I=n(8003),T=n(9909),_=a.PROPER,S=a.CONFIGURABLE,A=T.get,N=T.set,D="ArrayBuffer",R="DataView",C="prototype",x="Wrong length",O="Wrong index",k=r[D],L=k,P=L&&L[C],M=r[R],F=M&&M[C],V=Object.prototype,U=r.Array,q=r.RangeError,j=i(w),B=i([].reverse),K=y.pack,z=y.unpack,G=function(t){return[255&t]},H=function(t){return[255&t,t>>8&255]},Q=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},W=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},Y=function(t){return K(t,23,4)},X=function(t){return K(t,52,8)},$=function(t,e){b(t[C],e,{get:function(){return A(this)[e]}})},J=function(t,e,n,r){var i=d(n),o=A(t);if(i+e>o.byteLength)throw q(O);var s=A(o.buffer).bytes,a=i+o.byteOffset,u=E(s,a,a+e);return r?u:B(u)},Z=function(t,e,n,r,i,o){var s=d(n),a=A(t);if(s+e>a.byteLength)throw q(O);for(var u=A(a.buffer).bytes,c=s+a.byteOffset,h=r(+i),f=0;f<e;f++)u[c+f]=h[o?f:e-f-1]};if(s){var tt=_&&k.name!==D;if(h((function(){k(1)}))&&h((function(){new k(-1)}))&&!h((function(){return new k,new k(1.5),new k(NaN),tt&&!S})))tt&&S&&u(k,"name",D);else{L=function(t){return f(this,P),new k(d(t))},L[C]=P;for(var et,nt=m(k),rt=0;nt.length>rt;)(et=nt[rt++])in L||u(L,et,k[et]);P.constructor=L}g&&v(F)!==V&&g(F,V);var it=new M(new L(2)),ot=i(F.setInt8);it.setInt8(0,2147483648),it.setInt8(1,2147483649),!it.getInt8(0)&&it.getInt8(1)||c(F,{setInt8:function(t,e){ot(this,t,e<<24>>24)},setUint8:function(t,e){ot(this,t,e<<24>>24)}},{unsafe:!0})}else L=function(t){f(this,P);var e=d(t);N(this,{bytes:j(U(e),0),byteLength:e}),o||(this.byteLength=e)},P=L[C],M=function(t,e,n){f(this,F),f(t,P);var r=A(t).byteLength,i=l(e);if(i<0||i>r)throw q("Wrong offset");if(n=void 0===n?r-i:p(n),i+n>r)throw q(x);N(this,{buffer:t,byteLength:n,byteOffset:i}),o||(this.buffer=t,this.byteLength=n,this.byteOffset=i)},F=M[C],o&&($(L,"byteLength"),$(M,"buffer"),$(M,"byteLength"),$(M,"byteOffset")),c(F,{getInt8:function(t){return J(this,1,t)[0]<<24>>24},getUint8:function(t){return J(this,1,t)[0]},getInt16:function(t){var e=J(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=J(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return W(J(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return W(J(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return z(J(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return z(J(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){Z(this,1,t,G,e)},setUint8:function(t,e){Z(this,1,t,G,e)},setInt16:function(t,e){Z(this,2,t,H,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){Z(this,2,t,H,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){Z(this,4,t,Q,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){Z(this,4,t,Q,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){Z(this,4,t,Y,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){Z(this,8,t,X,e,arguments.length>2?arguments[2]:void 0)}});I(L,D),I(M,R),t.exports={ArrayBuffer:L,DataView:M}},1048:function(t,e,n){"use strict";var r=n(7908),i=n(1400),o=n(6244),s=Math.min;t.exports=[].copyWithin||function(t,e){var n=r(this),a=o(n),u=i(t,a),c=i(e,a),h=arguments.length>2?arguments[2]:void 0,f=s((void 0===h?a:i(h,a))-c,a-u),l=1;c<u&&u<c+f&&(l=-1,c+=f-1,u+=f-1);while(f-- >0)c in n?n[u]=n[c]:delete n[u],u+=l,c+=l;return n}},7745:function(t,e,n){var r=n(6244);t.exports=function(t,e){var n=0,i=r(e),o=new t(i);while(i>n)o[n]=e[n++];return o}},6583:function(t,e,n){"use strict";var r=n(2104),i=n(5656),o=n(9303),s=n(6244),a=n(9341),u=Math.min,c=[].lastIndexOf,h=!!c&&1/[1].lastIndexOf(1,-0)<0,f=a("lastIndexOf"),l=h||!f;t.exports=l?function(t){if(h)return r(c,this,arguments)||0;var e=i(this),n=s(e),a=n-1;for(arguments.length>1&&(a=u(a,o(arguments[1]))),a<0&&(a=n+a);a>=0;a--)if(a in e&&e[a]===t)return a||0;return-1}:c},3671:function(t,e,n){var r=n(7854),i=n(9662),o=n(7908),s=n(8361),a=n(6244),u=r.TypeError,c=function(t){return function(e,n,r,c){i(n);var h=o(e),f=s(h),l=a(h),p=t?l-1:0,d=t?-1:1;if(r<2)while(1){if(p in f){c=f[p],p+=d;break}if(p+=d,t?p<0:l<=p)throw u("Reduce of empty array with no initial value")}for(;t?p>=0:l>p;p+=d)p in f&&(c=n(c,f[p],p,h));return c}};t.exports={left:c(!1),right:c(!0)}},4170:function(t){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n={},r=0;r<66;r++)n[e.charAt(r)]=r;t.exports={itoc:e,ctoi:n}},9320:function(t,e,n){"use strict";var r=n(1702),i=n(2248),o=n(2423).getWeakData,s=n(9670),a=n(111),u=n(5787),c=n(408),h=n(2092),f=n(2597),l=n(9909),p=l.set,d=l.getterFor,y=h.find,v=h.findIndex,g=r([].splice),m=0,b=function(t){return t.frozen||(t.frozen=new w)},w=function(){this.entries=[]},E=function(t,e){return y(t.entries,(function(t){return t[0]===e}))};w.prototype={get:function(t){var e=E(this,t);if(e)return e[1]},has:function(t){return!!E(this,t)},set:function(t,e){var n=E(this,t);n?n[1]=e:this.entries.push([t,e])},delete:function(t){var e=v(this.entries,(function(e){return e[0]===t}));return~e&&g(this.entries,e,1),!!~e}},t.exports={getConstructor:function(t,e,n,r){var h=t((function(t,i){u(t,l),p(t,{type:e,id:m++,frozen:void 0}),void 0!=i&&c(i,t[r],{that:t,AS_ENTRIES:n})})),l=h.prototype,y=d(e),v=function(t,e,n){var r=y(t),i=o(s(e),!0);return!0===i?b(r).set(e,n):i[r.id]=n,t};return i(l,{delete:function(t){var e=y(this);if(!a(t))return!1;var n=o(t);return!0===n?b(e)["delete"](t):n&&f(n,e.id)&&delete n[e.id]},has:function(t){var e=y(this);if(!a(t))return!1;var n=o(t);return!0===n?b(e).has(t):n&&f(n,e.id)}}),i(l,n?{get:function(t){var e=y(this);if(a(t)){var n=o(t);return!0===n?b(e).get(t):n?n[e.id]:void 0}},set:function(t,e){return v(this,t,e)}}:{add:function(t){return v(this,t,!0)}}),h}}},4964:function(t,e,n){var r=n(5112),i=r("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[i]=!1,"/./"[t](e)}catch(r){}}return!1}},3678:function(t){t.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},7762:function(t,e,n){"use strict";var r=n(9781),i=n(7293),o=n(9670),s=n(30),a=n(6277),u=Error.prototype.toString,c=i((function(){if(r){var t=s(Object.defineProperty({},"name",{get:function(){return this===t}}));if("true"!==u.call(t))return!0}return"2: 1"!==u.call({message:1,name:2})||"Error"!==u.call({})}));t.exports=c?function(){var t=o(this),e=a(t.name,"Error"),n=a(t.message);return e?n?e+": "+n:e:n}:u},1179:function(t,e,n){var r=n(7854),i=r.Array,o=Math.abs,s=Math.pow,a=Math.floor,u=Math.log,c=Math.LN2,h=function(t,e,n){var r,h,f,l=i(n),p=8*n-e-1,d=(1<<p)-1,y=d>>1,v=23===e?s(2,-24)-s(2,-77):0,g=t<0||0===t&&1/t<0?1:0,m=0;t=o(t),t!=t||t===1/0?(h=t!=t?1:0,r=d):(r=a(u(t)/c),f=s(2,-r),t*f<1&&(r--,f*=2),t+=r+y>=1?v/f:v*s(2,1-y),t*f>=2&&(r++,f/=2),r+y>=d?(h=0,r=d):r+y>=1?(h=(t*f-1)*s(2,e),r+=y):(h=t*s(2,y-1)*s(2,e),r=0));while(e>=8)l[m++]=255&h,h/=256,e-=8;r=r<<e|h,p+=e;while(p>0)l[m++]=255&r,r/=256,p-=8;return l[--m]|=128*g,l},f=function(t,e){var n,r=t.length,i=8*r-e-1,o=(1<<i)-1,a=o>>1,u=i-7,c=r-1,h=t[c--],f=127&h;h>>=7;while(u>0)f=256*f+t[c--],u-=8;n=f&(1<<-u)-1,f>>=-u,u+=e;while(u>0)n=256*n+t[c--],u-=8;if(0===f)f=1-a;else{if(f===o)return n?NaN:h?-1/0:1/0;n+=s(2,e),f-=a}return(h?-1:1)*n*s(2,f-e)};t.exports={pack:h,unpack:f}},5988:function(t,e,n){var r=n(111),i=Math.floor;t.exports=Number.isInteger||function(t){return!r(t)&&isFinite(t)&&i(t)===t}},3929:function(t,e,n){var r=n(7854),i=n(7850),o=r.TypeError;t.exports=function(t){if(i(t))throw o("The method doesn't accept regular expressions");return t}},7023:function(t,e,n){var r=n(7854),i=r.isFinite;t.exports=Number.isFinite||function(t){return"number"==typeof t&&i(t)}},4699:function(t,e,n){var r=n(9781),i=n(1702),o=n(1956),s=n(5656),a=n(5296).f,u=i(a),c=i([].push),h=function(t){return function(e){var n,i=s(e),a=o(i),h=a.length,f=0,l=[];while(h>f)n=a[f++],r&&!u(i,n)||c(l,t?[n,i[n]]:i[n]);return l}};t.exports={entries:h(!0),values:h(!1)}},4986:function(t,e,n){var r=n(8113);t.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(r)},6650:function(t,e,n){var r=n(1702),i=n(7466),o=n(1340),s=n(8415),a=n(4488),u=r(s),c=r("".slice),h=Math.ceil,f=function(t){return function(e,n,r){var s,f,l=o(a(e)),p=i(n),d=l.length,y=void 0===r?" ":o(r);return p<=d||""==y?l:(s=p-d,f=u(y,h(s/y.length)),f.length>s&&(f=c(f,0,s)),t?l+f:f+l)}};t.exports={start:f(!1),end:f(!0)}},7067:function(t,e,n){var r=n(7854),i=n(9303),o=n(7466),s=r.RangeError;t.exports=function(t){if(void 0===t)return 0;var e=i(t),n=o(e);if(e!==n)throw s("Wrong length or index");return n}},4590:function(t,e,n){var r=n(7854),i=n(3002),o=r.RangeError;t.exports=function(t,e){var n=i(t);if(n%e)throw o("Wrong offset");return n}},3002:function(t,e,n){var r=n(7854),i=n(9303),o=r.RangeError;t.exports=function(t){var e=i(t);if(e<0)throw o("The argument can't be less than 0");return e}},4038:function(t,e,n){var r=n(5268);t.exports=function(t){try{if(r)return Function('return require("'+t+'")')()}catch(e){}}},9843:function(t,e,n){"use strict";var r=n(2109),i=n(7854),o=n(6916),s=n(9781),a=n(3832),u=n(260),c=n(3331),h=n(5787),f=n(9114),l=n(8880),p=n(5988),d=n(7466),y=n(7067),v=n(4590),g=n(4948),m=n(2597),b=n(648),w=n(111),E=n(2190),I=n(30),T=n(7976),_=n(7674),S=n(8006).f,A=n(7321),N=n(2092).forEach,D=n(6340),R=n(3070),C=n(1236),x=n(9909),O=n(9587),k=x.get,L=x.set,P=R.f,M=C.f,F=Math.round,V=i.RangeError,U=c.ArrayBuffer,q=U.prototype,j=c.DataView,B=u.NATIVE_ARRAY_BUFFER_VIEWS,K=u.TYPED_ARRAY_CONSTRUCTOR,z=u.TYPED_ARRAY_TAG,G=u.TypedArray,H=u.TypedArrayPrototype,Q=u.aTypedArrayConstructor,W=u.isTypedArray,Y="BYTES_PER_ELEMENT",X="Wrong length",$=function(t,e){Q(t);var n=0,r=e.length,i=new t(r);while(r>n)i[n]=e[n++];return i},J=function(t,e){P(t,e,{get:function(){return k(this)[e]}})},Z=function(t){var e;return T(q,t)||"ArrayBuffer"==(e=b(t))||"SharedArrayBuffer"==e},tt=function(t,e){return W(t)&&!E(e)&&e in t&&p(+e)&&e>=0},et=function(t,e){return e=g(e),tt(t,e)?f(2,t[e]):M(t,e)},nt=function(t,e,n){return e=g(e),!(tt(t,e)&&w(n)&&m(n,"value"))||m(n,"get")||m(n,"set")||n.configurable||m(n,"writable")&&!n.writable||m(n,"enumerable")&&!n.enumerable?P(t,e,n):(t[e]=n.value,t)};s?(B||(C.f=et,R.f=nt,J(H,"buffer"),J(H,"byteOffset"),J(H,"byteLength"),J(H,"length")),r({target:"Object",stat:!0,forced:!B},{getOwnPropertyDescriptor:et,defineProperty:nt}),t.exports=function(t,e,n){var s=t.match(/\d+$/)[0]/8,u=t+(n?"Clamped":"")+"Array",c="get"+t,f="set"+t,p=i[u],g=p,m=g&&g.prototype,b={},E=function(t,e){var n=k(t);return n.view[c](e*s+n.byteOffset,!0)},T=function(t,e,r){var i=k(t);n&&(r=(r=F(r))<0?0:r>255?255:255&r),i.view[f](e*s+i.byteOffset,r,!0)},R=function(t,e){P(t,e,{get:function(){return E(this,e)},set:function(t){return T(this,e,t)},enumerable:!0})};B?a&&(g=e((function(t,e,n,r){return h(t,m),O(function(){return w(e)?Z(e)?void 0!==r?new p(e,v(n,s),r):void 0!==n?new p(e,v(n,s)):new p(e):W(e)?$(g,e):o(A,g,e):new p(y(e))}(),t,g)})),_&&_(g,G),N(S(p),(function(t){t in g||l(g,t,p[t])})),g.prototype=m):(g=e((function(t,e,n,r){h(t,m);var i,a,u,c=0,f=0;if(w(e)){if(!Z(e))return W(e)?$(g,e):o(A,g,e);i=e,f=v(n,s);var l=e.byteLength;if(void 0===r){if(l%s)throw V(X);if(a=l-f,a<0)throw V(X)}else if(a=d(r)*s,a+f>l)throw V(X);u=a/s}else u=y(e),a=u*s,i=new U(a);L(t,{buffer:i,byteOffset:f,byteLength:a,length:u,view:new j(i)});while(c<u)R(t,c++)})),_&&_(g,G),m=g.prototype=I(H)),m.constructor!==g&&l(m,"constructor",g),l(m,K,g),z&&l(m,z,u),b[u]=g,r({global:!0,forced:g!=p,sham:!B},b),Y in g||l(g,Y,s),Y in m||l(m,Y,s),D(u)}):t.exports=function(){}},3832:function(t,e,n){var r=n(7854),i=n(7293),o=n(7072),s=n(260).NATIVE_ARRAY_BUFFER_VIEWS,a=r.ArrayBuffer,u=r.Int8Array;t.exports=!s||!i((function(){u(1)}))||!i((function(){new u(-1)}))||!o((function(t){new u,new u(null),new u(1.5),new u(t)}),!0)||i((function(){return 1!==new u(new a(2),1,void 0).length}))},3074:function(t,e,n){var r=n(7745),i=n(6304);t.exports=function(t,e){return r(i(t),e)}},7321:function(t,e,n){var r=n(9974),i=n(6916),o=n(9483),s=n(7908),a=n(6244),u=n(8554),c=n(1246),h=n(7659),f=n(260).aTypedArrayConstructor;t.exports=function(t){var e,n,l,p,d,y,v=o(this),g=s(t),m=arguments.length,b=m>1?arguments[1]:void 0,w=void 0!==b,E=c(g);if(E&&!h(E)){d=u(g,E),y=d.next,g=[];while(!(p=i(y,d)).done)g.push(p.value)}for(w&&m>2&&(b=r(b,arguments[2])),n=a(g),l=new(f(v))(n),e=0;n>e;e++)l[e]=w?b(g[e],e):g[e];return l}},6304:function(t,e,n){var r=n(260),i=n(6707),o=r.TYPED_ARRAY_CONSTRUCTOR,s=r.aTypedArrayConstructor;t.exports=function(t){return s(i(t,t[o]))}},8264:function(t,e,n){"use strict";var r=n(2109),i=n(7854),o=n(3331),s=n(6340),a="ArrayBuffer",u=o[a],c=i[a];r({global:!0,forced:c!==u},{ArrayBuffer:u}),s(a)},2262:function(t,e,n){"use strict";var r=n(2109),i=n(7908),o=n(6244),s=n(9303),a=n(1223);r({target:"Array",proto:!0},{at:function(t){var e=i(this),n=o(e),r=s(t),a=r>=0?r:n+r;return a<0||a>=n?void 0:e[a]}}),a("at")},5837:function(t,e,n){var r=n(2109),i=n(7854);r({global:!0},{globalThis:i})},5192:function(t,e,n){var r=n(2109),i=n(7023);r({target:"Number",stat:!0},{isFinite:i})},3161:function(t,e,n){var r=n(2109),i=n(5988);r({target:"Number",stat:!0},{isInteger:i})},4363:function(t,e,n){var r=n(2109);r({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},5994:function(t,e,n){var r=n(2109);r({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},9720:function(t,e,n){var r=n(2109),i=n(4699).entries;r({target:"Object",stat:!0},{entries:function(t){return i(t)}})},2479:function(t,e,n){var r=n(2109),i=n(4699).values;r({target:"Object",stat:!0},{values:function(t){return i(t)}})},4506:function(t,e,n){"use strict";var r=n(2109),i=n(1702),o=n(4488),s=n(9303),a=n(1340),u=n(7293),c=i("".charAt),h=u((function(){return"\ud842"!=="𠮷".at(-2)}));r({target:"String",proto:!0,forced:h},{at:function(t){var e=a(o(this)),n=e.length,r=s(t),i=r>=0?r:n+r;return i<0||i>=n?void 0:c(e,i)}})},2023:function(t,e,n){"use strict";var r=n(2109),i=n(1702),o=n(3929),s=n(4488),a=n(1340),u=n(4964),c=i("".indexOf);r({target:"String",proto:!0,forced:!u("includes")},{includes:function(t){return!!~c(a(s(this)),a(o(t)),arguments.length>1?arguments[1]:void 0)}})},3112:function(t,e,n){"use strict";var r=n(2109),i=n(6650).start,o=n(4986);r({target:"String",proto:!0,forced:o},{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},86:function(t,e,n){"use strict";var r=n(2109),i=n(4230),o=n(3429);r({target:"String",proto:!0,forced:o("sub")},{sub:function(){return i(this,"sub","","")}})},2443:function(t,e,n){var r=n(7235);r("asyncIterator")},8675:function(t,e,n){"use strict";var r=n(260),i=n(6244),o=n(9303),s=r.aTypedArray,a=r.exportTypedArrayMethod;a("at",(function(t){var e=s(this),n=i(e),r=o(t),a=r>=0?r:n+r;return a<0||a>=n?void 0:e[a]}))},2990:function(t,e,n){"use strict";var r=n(1702),i=n(260),o=n(1048),s=r(o),a=i.aTypedArray,u=i.exportTypedArrayMethod;u("copyWithin",(function(t,e){return s(a(this),t,e,arguments.length>2?arguments[2]:void 0)}))},8927:function(t,e,n){"use strict";var r=n(260),i=n(2092).every,o=r.aTypedArray,s=r.exportTypedArrayMethod;s("every",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},3105:function(t,e,n){"use strict";var r=n(260),i=n(6916),o=n(1285),s=r.aTypedArray,a=r.exportTypedArrayMethod;a("fill",(function(t){var e=arguments.length;return i(o,s(this),t,e>1?arguments[1]:void 0,e>2?arguments[2]:void 0)}))},5035:function(t,e,n){"use strict";var r=n(260),i=n(2092).filter,o=n(3074),s=r.aTypedArray,a=r.exportTypedArrayMethod;a("filter",(function(t){var e=i(s(this),t,arguments.length>1?arguments[1]:void 0);return o(this,e)}))},7174:function(t,e,n){"use strict";var r=n(260),i=n(2092).findIndex,o=r.aTypedArray,s=r.exportTypedArrayMethod;s("findIndex",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},4345:function(t,e,n){"use strict";var r=n(260),i=n(2092).find,o=r.aTypedArray,s=r.exportTypedArrayMethod;s("find",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},2846:function(t,e,n){"use strict";var r=n(260),i=n(2092).forEach,o=r.aTypedArray,s=r.exportTypedArrayMethod;s("forEach",(function(t){i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},4731:function(t,e,n){"use strict";var r=n(260),i=n(1318).includes,o=r.aTypedArray,s=r.exportTypedArrayMethod;s("includes",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},7209:function(t,e,n){"use strict";var r=n(260),i=n(1318).indexOf,o=r.aTypedArray,s=r.exportTypedArrayMethod;s("indexOf",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},6319:function(t,e,n){"use strict";var r=n(7854),i=n(7293),o=n(1702),s=n(260),a=n(6992),u=n(5112),c=u("iterator"),h=r.Uint8Array,f=o(a.values),l=o(a.keys),p=o(a.entries),d=s.aTypedArray,y=s.exportTypedArrayMethod,v=h&&h.prototype,g=!i((function(){v[c].call([1])})),m=!!v&&v.values&&v[c]===v.values&&"values"===v.values.name,b=function(){return f(d(this))};y("entries",(function(){return p(d(this))}),g),y("keys",(function(){return l(d(this))}),g),y("values",b,g||!m,{name:"values"}),y(c,b,g||!m,{name:"values"})},8867:function(t,e,n){"use strict";var r=n(260),i=n(1702),o=r.aTypedArray,s=r.exportTypedArrayMethod,a=i([].join);s("join",(function(t){return a(o(this),t)}))},7789:function(t,e,n){"use strict";var r=n(260),i=n(2104),o=n(6583),s=r.aTypedArray,a=r.exportTypedArrayMethod;a("lastIndexOf",(function(t){var e=arguments.length;return i(o,s(this),e>1?[t,arguments[1]]:[t])}))},3739:function(t,e,n){"use strict";var r=n(260),i=n(2092).map,o=n(6304),s=r.aTypedArray,a=r.exportTypedArrayMethod;a("map",(function(t){return i(s(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(o(t))(e)}))}))},4483:function(t,e,n){"use strict";var r=n(260),i=n(3671).right,o=r.aTypedArray,s=r.exportTypedArrayMethod;s("reduceRight",(function(t){var e=arguments.length;return i(o(this),t,e,e>1?arguments[1]:void 0)}))},9368:function(t,e,n){"use strict";var r=n(260),i=n(3671).left,o=r.aTypedArray,s=r.exportTypedArrayMethod;s("reduce",(function(t){var e=arguments.length;return i(o(this),t,e,e>1?arguments[1]:void 0)}))},2056:function(t,e,n){"use strict";var r=n(260),i=r.aTypedArray,o=r.exportTypedArrayMethod,s=Math.floor;o("reverse",(function(){var t,e=this,n=i(e).length,r=s(n/2),o=0;while(o<r)t=e[o],e[o++]=e[--n],e[n]=t;return e}))},3462:function(t,e,n){"use strict";var r=n(7854),i=n(6916),o=n(260),s=n(6244),a=n(4590),u=n(7908),c=n(7293),h=r.RangeError,f=r.Int8Array,l=f&&f.prototype,p=l&&l.set,d=o.aTypedArray,y=o.exportTypedArrayMethod,v=!c((function(){var t=new Uint8ClampedArray(2);return i(p,t,{length:1,0:3},1),3!==t[1]})),g=v&&o.NATIVE_ARRAY_BUFFER_VIEWS&&c((function(){var t=new f(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));y("set",(function(t){d(this);var e=a(arguments.length>1?arguments[1]:void 0,1),n=u(t);if(v)return i(p,this,n,e);var r=this.length,o=s(n),c=0;if(o+e>r)throw h("Wrong length");while(c<o)this[e+c]=n[c++]}),!v||g)},678:function(t,e,n){"use strict";var r=n(260),i=n(6304),o=n(7293),s=n(206),a=r.aTypedArray,u=r.exportTypedArrayMethod,c=o((function(){new Int8Array(1).slice()}));u("slice",(function(t,e){var n=s(a(this),t,e),r=i(this),o=0,u=n.length,c=new r(u);while(u>o)c[o]=n[o++];return c}),c)},7462:function(t,e,n){"use strict";var r=n(260),i=n(2092).some,o=r.aTypedArray,s=r.exportTypedArrayMethod;s("some",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},3824:function(t,e,n){"use strict";var r=n(7854),i=n(1702),o=n(7293),s=n(9662),a=n(4362),u=n(260),c=n(8886),h=n(256),f=n(7392),l=n(8008),p=r.Array,d=u.aTypedArray,y=u.exportTypedArrayMethod,v=r.Uint16Array,g=v&&i(v.prototype.sort),m=!!g&&!(o((function(){g(new v(2),null)}))&&o((function(){g(new v(2),{})}))),b=!!g&&!o((function(){if(f)return f<74;if(c)return c<67;if(h)return!0;if(l)return l<602;var t,e,n=new v(516),r=p(516);for(t=0;t<516;t++)e=t%4,n[t]=515-t,r[t]=t-2*e+3;for(g(n,(function(t,e){return(t/4|0)-(e/4|0)})),t=0;t<516;t++)if(n[t]!==r[t])return!0})),w=function(t){return function(e,n){return void 0!==t?+t(e,n)||0:n!==n?-1:e!==e?1:0===e&&0===n?1/e>0&&1/n<0?1:-1:e>n}};y("sort",(function(t){return void 0!==t&&s(t),b?g(this,t):a(d(this),w(t))}),!b||m)},5021:function(t,e,n){"use strict";var r=n(260),i=n(7466),o=n(1400),s=n(6304),a=r.aTypedArray,u=r.exportTypedArrayMethod;u("subarray",(function(t,e){var n=a(this),r=n.length,u=o(t,r),c=s(n);return new c(n.buffer,n.byteOffset+u*n.BYTES_PER_ELEMENT,i((void 0===e?r:o(e,r))-u))}))},2974:function(t,e,n){"use strict";var r=n(7854),i=n(2104),o=n(260),s=n(7293),a=n(206),u=r.Int8Array,c=o.aTypedArray,h=o.exportTypedArrayMethod,f=[].toLocaleString,l=!!u&&s((function(){f.call(new u(1))})),p=s((function(){return[1,2].toLocaleString()!=new u([1,2]).toLocaleString()}))||!s((function(){u.prototype.toLocaleString.call([1,2])}));h("toLocaleString",(function(){return i(f,l?a(c(this)):c(this),a(arguments))}),p)},5016:function(t,e,n){"use strict";var r=n(260).exportTypedArrayMethod,i=n(7293),o=n(7854),s=n(1702),a=o.Uint8Array,u=a&&a.prototype||{},c=[].toString,h=s([].join);i((function(){c.call({})}))&&(c=function(){return h(this)});var f=u.toString!=c;r("toString",c,f)},2472:function(t,e,n){var r=n(9843);r("Uint8",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},4129:function(t,e,n){"use strict";var r,i=n(7854),o=n(1702),s=n(2248),a=n(2423),u=n(7710),c=n(9320),h=n(111),f=n(2050),l=n(9909).enforce,p=n(8536),d=!i.ActiveXObject&&"ActiveXObject"in i,y=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},v=u("WeakMap",y,c);if(p&&d){r=c.getConstructor(y,"WeakMap",!0),a.enable();var g=v.prototype,m=o(g["delete"]),b=o(g.has),w=o(g.get),E=o(g.set);s(g,{delete:function(t){if(h(t)&&!f(t)){var e=l(this);return e.frozen||(e.frozen=new r),m(this,t)||e.frozen["delete"](t)}return m(this,t)},has:function(t){if(h(t)&&!f(t)){var e=l(this);return e.frozen||(e.frozen=new r),b(this,t)||e.frozen.has(t)}return b(this,t)},get:function(t){if(h(t)&&!f(t)){var e=l(this);return e.frozen||(e.frozen=new r),b(this,t)?w(this,t):e.frozen.get(t)}return w(this,t)},set:function(t,e){if(h(t)&&!f(t)){var n=l(this);n.frozen||(n.frozen=new r),b(this,t)?E(this,t,e):n.frozen.set(t,e)}else E(this,t,e);return this}})}},5505:function(t,e,n){var r=n(2109),i=n(5005),o=n(1702),s=n(7293),a=n(1340),u=n(2597),c=n(8053),h=n(4170).ctoi,f=/[^\d+/a-z]/i,l=/[\t\n\f\r ]+/g,p=/[=]+$/,d=i("atob"),y=String.fromCharCode,v=o("".charAt),g=o("".replace),m=o(f.exec),b=s((function(){return""!==atob(" ")})),w=!b&&!s((function(){d()}));r({global:!0,enumerable:!0,forced:b||w},{atob:function(t){if(c(arguments.length,1),w)return d(t);var e,n,r=g(a(t),l,""),o="",s=0,b=0;if(r.length%4==0&&(r=g(r,p,"")),r.length%4==1||m(f,r))throw new(i("DOMException"))("The string is not correctly encoded","InvalidCharacterError");while(e=v(r,s++))u(h,e)&&(n=b%4?64*n+h[e]:h[e],b++%4&&(o+=y(255&n>>(-2*b&6))));return o}})},7714:function(t,e,n){"use strict";var r=n(2109),i=n(4038),o=n(5005),s=n(7293),a=n(30),u=n(9114),c=n(3070).f,h=n(6048).f,f=n(1320),l=n(2597),p=n(5787),d=n(9670),y=n(7762),v=n(6277),g=n(3678),m=n(7741),b=n(9909),w=n(9781),E=n(1913),I="DOMException",T="DATA_CLONE_ERR",_=o("Error"),S=o(I)||function(){try{var t=o("MessageChannel")||i("worker_threads").MessageChannel;(new t).port1.postMessage(new WeakMap)}catch(e){if(e.name==T&&25==e.code)return e.constructor}}(),A=S&&S.prototype,N=_.prototype,D=b.set,R=b.getterFor(I),C="stack"in _(I),x=function(t){return l(g,t)&&g[t].m?g[t].c:0},O=function(){p(this,k);var t=arguments.length,e=v(t<1?void 0:arguments[0]),n=v(t<2?void 0:arguments[1],"Error"),r=x(n);if(D(this,{type:I,name:n,message:e,code:r}),w||(this.name=n,this.message=e,this.code=r),C){var i=_(e);i.name=I,c(this,"stack",u(1,m(i.stack,1)))}},k=O.prototype=a(N),L=function(t){return{enumerable:!0,configurable:!0,get:t}},P=function(t){return L((function(){return R(this)[t]}))};w&&h(k,{name:P("name"),message:P("message"),code:P("code")}),c(k,"constructor",u(1,O));var M=s((function(){return!(new S instanceof _)})),F=M||s((function(){return N.toString!==y||"2: 1"!==String(new S(1,2))})),V=M||s((function(){return 25!==new S(1,"DataCloneError").code})),U=M||25!==S[T]||25!==A[T],q=E?F||V||U:M;r({global:!0,forced:q},{DOMException:q?O:S});var j=o(I),B=j.prototype;for(var K in F&&(E||S===j)&&f(B,"toString",y),V&&w&&S===j&&c(B,"code",L((function(){return x(d(this).name)}))),g)if(l(g,K)){var z=g[K],G=z.s,H=u(6,z.c);l(j,G)||c(j,G,H),l(B,G)||c(B,G,H)}},2801:function(t,e,n){"use strict";var r=n(2109),i=n(5005),o=n(9114),s=n(3070).f,a=n(2597),u=n(5787),c=n(9587),h=n(6277),f=n(3678),l=n(7741),p=n(1913),d="DOMException",y=i("Error"),v=i(d),g=function(){u(this,m);var t=arguments.length,e=h(t<1?void 0:arguments[0]),n=h(t<2?void 0:arguments[1],"Error"),r=new v(e,n),i=y(e);return i.name=d,s(r,"stack",o(1,l(i.stack,1))),c(r,this,g),r},m=g.prototype=v.prototype,b="stack"in y(d),w="stack"in new v(1,2),E=b&&!w;r({global:!0,forced:p||E},{DOMException:E?g:v});var I=i(d),T=I.prototype;if(T.constructor!==I)for(var _ in p||s(T,"constructor",o(1,I)),f)if(a(f,_)){var S=f[_],A=S.s;a(I,A)||s(I,A,o(6,S.c))}},1174:function(t,e,n){var r=n(5005),i=n(8003),o="DOMException";i(r(o),o)},3753:function(t,e,n){"use strict";var r=n(2109),i=n(6916);r({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return i(URL.prototype.toString,this)}})},4805:function(t,e,n){"use strict";n.d(e,{db:function(){return Uy}});var r=n(9726),i=(n(8309),n(1539),n(4747),n(8783),n(3948),n(1249),n(3753),n(1532),n(7941),n(4916),n(4723),n(9600),n(7327),n(1703),n(2526),n(5003),n(1299),n(1817),n(2165),n(2222),n(7042),n(2443),function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)});function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},s.apply(this,arguments)};function a(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function u(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}Object.create;function c(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function h(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{while((void 0===e||e-- >0)&&!(r=o.next()).done)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return s}function f(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create;n(5505),n(7714),n(2801),n(1174),n(5306),n(86),n(8862),n(7601),n(6699),n(2023),n(3123),n(9720),n(5192),n(9653);var l=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296===(64512&i)&&r+1<t.length&&56320===(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},p=function(t){var e=[],n=0,r=0;while(n<t.length){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){o=t[n++];var s=t[n++],a=t[n++],u=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&a)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{o=t[n++],s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")},d={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,f=(3&o)<<4|a>>4,l=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(l=64)),r.push(n[h],n[f],n[l],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(l(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):p(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length,a=s?n[t.charAt(i)]:0;++i;var u=i<t.length,c=u?n[t.charAt(i)]:64;++i;var h=i<t.length,f=h?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==c||null==f)throw Error();var l=o<<2|a>>4;if(r.push(l),64!==c){var p=a<<4&240|c>>2;if(r.push(p),64!==f){var d=c<<6&192|f;r.push(d)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},y=function(t){var e=l(t);return d.encodeByteArray(e,!0)},v=function(t){return y(t).replace(/\./g,"")};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function g(t){return m(void 0,t)}function m(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:var n=e;return new Date(n.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var r in e)e.hasOwnProperty(r)&&b(r)&&(t[r]=m(t[r],e[r]));return t}function b(t){return"__proto__"!==t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var w=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"===typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=s({iss:"https://securetoken.google.com/"+r,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t),u="";return[v(JSON.stringify(n)),v(JSON.stringify(a)),u].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I(){return"undefined"!==typeof navigator&&"string"===typeof navigator["userAgent"]?navigator["userAgent"]:""}function T(){return"undefined"!==typeof window&&!!(window["cordova"]||window["phonegap"]||window["PhoneGap"])&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(I())}function _(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}function S(){return"object"===("undefined"===typeof self?"undefined":(0,r.Z)(self))&&self.self===self}function A(){var t="object"===("undefined"===typeof chrome?"undefined":(0,r.Z)(chrome))?chrome.runtime:"object"===("undefined"===typeof browser?"undefined":(0,r.Z)(browser))?browser.runtime:void 0;return"object"===(0,r.Z)(t)&&void 0!==t.id}function N(){return"object"===("undefined"===typeof navigator?"undefined":(0,r.Z)(navigator))&&"ReactNative"===navigator["product"]}function D(){return I().indexOf("Electron/")>=0}function R(){var t=I();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function C(){return I().indexOf("MSAppHost/")>=0}function x(){return!_()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var O="FirebaseError",k=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name=O,Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,L.prototype.create),o}return o(e,t),e}(Error),L=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?P(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new k(i,a,r);return u},t}();function P(t,e){return t.replace(M,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var M=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function F(t,e){return Object.prototype.hasOwnProperty.call(t,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
(function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"===typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],f=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=h^u&(c^h),s=1518500249):(o=u^c^h,s=1859775393):r<60?(o=u&c|h&(u|c),s=2400959708):(o=u^c^h,s=3395469782);i=(a<<5|a>>>27)+o+f+s+n[r]&4294967295;f=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;while(r<e){if(0===o)while(r<=n)this.compress_(t,r),r+=this.blockSize;if("string"===typeof t){while(r<e)if(i[o]=t.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else while(r<e)if(i[o]=t[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}})();function V(t,e){var n=new U(t,e);return n.subscribe.bind(n)}var U=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");r=q(t,["next","error","complete"])?t:{next:t,error:e,complete:n},void 0===r.next&&(r.next=j),void 0===r.error&&(r.error=j),void 0===r.complete&&(r.complete=j);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function q(t,e){if("object"!==(0,r.Z)(t)||null===t)return!1;for(var n=0,i=e;n<i.length;n++){var o=i[n];if(o in t&&"function"===typeof t[o])return!0}return!1}function j(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function B(t){return t&&t._delegate?t._delegate:t}n(1038),n(189);var K=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),z="[DEFAULT]",G=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new w;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),r=null!==(e=null===t||void 0===t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(Q(t))try{this.getOrInitializeService({instanceIdentifier:z})}catch(l){}try{for(var r=c(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=h(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var f=this.getOrInitializeService({instanceIdentifier:u});a.resolve(f)}catch(l){}}}catch(p){e={error:p}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=z),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return a(this,void 0,void 0,(function(){var t;return u(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(f(f([],h(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),h(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=z),this.instances.has(t)},t.prototype.getOptions=function(t){return void 0===t&&(t=z),this.instancesOptions.get(t)||{}},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var r=t.options,i=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var s=this.getOrInitializeService({instanceIdentifier:o,options:i});try{for(var a=c(this.instancesDeferred.entries()),u=a.next();!u.done;u=a.next()){var f=h(u.value,2),l=f[0],p=f[1],d=this.normalizeInstanceIdentifier(l);o===d&&p.resolve(s)}}catch(y){e={error:y}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return s},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,r,i=this.onInitCallbacks.get(e);if(i)try{for(var o=c(i),s=o.next();!s.done;s=o.next()){var a=s.value;try{a(t,e)}catch(u){}}}catch(h){n={error:h}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e=t.instanceIdentifier,n=t.options,r=void 0===n?{}:n,i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:H(e),options:r}),this.instances.set(e,i),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch(dy){}return i||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=z),this.component?this.component.multipleInstances?t:z:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();function H(t){return t===z?void 0:t}function Q(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var W,Y=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){var e=this.getProvider(t.name);e.isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new G(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();n(9714);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function X(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $,J=[];(function(t){t[t["DEBUG"]=0]="DEBUG",t[t["VERBOSE"]=1]="VERBOSE",t[t["INFO"]=2]="INFO",t[t["WARN"]=3]="WARN",t[t["ERROR"]=4]="ERROR",t[t["SILENT"]=5]="SILENT"})($||($={}));var Z,tt={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},et=$.INFO,nt=(W={},W[$.DEBUG]="log",W[$.VERBOSE]="log",W[$.INFO]="info",W[$.WARN]="warn",W[$.ERROR]="error",W),rt=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=nt[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,X(["["+i+"]  "+t.name+":"],n))}},it=function(){function t(t){this.name=t,this._logLevel=et,this._logHandler=rt,this._userLogHandler=null,J.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in $))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"===typeof t?tt[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,X([this,$.DEBUG],t)),this._logHandler.apply(this,X([this,$.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,X([this,$.VERBOSE],t)),this._logHandler.apply(this,X([this,$.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,X([this,$.INFO],t)),this._logHandler.apply(this,X([this,$.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,X([this,$.WARN],t)),this._logHandler.apply(this,X([this,$.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,X([this,$.ERROR],t)),this._logHandler.apply(this,X([this,$.ERROR],t))},t}();function ot(t){J.forEach((function(e){e.setLogLevel(t)}))}function st(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=tt[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"===typeof t)return t;if("number"===typeof t||"boolean"===typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!==r&&void 0!==r?r:e.logLevel)&&t({level:$[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=J;r<i.length;r++){var o=i[r];n(o)}}var at,ut=(Z={},Z["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Z["bad-app-name"]="Illegal App name: '{$appName}",Z["duplicate-app"]="Firebase App named '{$appName}' already exists",Z["app-deleted"]="Firebase App named '{$appName}' already deleted",Z["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Z["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Z),ct=new L("app","Firebase",ut),ht="@firebase/app",ft="0.6.30",lt="@firebase/analytics",pt="@firebase/app-check",dt="@firebase/auth",yt="@firebase/database",vt="@firebase/functions",gt="@firebase/installations",mt="@firebase/messaging",bt="@firebase/performance",wt="@firebase/remote-config",Et="@firebase/storage",It="@firebase/firestore",Tt="firebase-wrapper",_t="[DEFAULT]",St=(at={},at[ht]="fire-core",at[lt]="fire-analytics",at[pt]="fire-app-check",at[dt]="fire-auth",at[yt]="fire-rtdb",at[vt]="fire-fn",at[gt]="fire-iid",at[mt]="fire-fcm",at[bt]="fire-perf",at[wt]="fire-rc",at[Et]="fire-gcs",at[It]="fire-fst",at["fire-js"]="fire-js",at[Tt]="fire-js-all",at),At=new it("@firebase/app"),Nt=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=g(t),this.container=new Y(e.name),this._addComponent(new K("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e=_t),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=_t),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){At.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw ct.create("app-deleted",{appName:this.name_})},t}();Nt.prototype.name&&Nt.prototype.options||Nt.prototype.delete||console.log("dc");var Dt="8.10.0";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(t){var e={},n=new Map,i={__esModule:!0,initializeApp:a,app:s,registerVersion:h,setLogLevel:ot,onLog:f,apps:null,SDK_VERSION:Dt,INTERNAL:{registerComponent:c,removeApp:o,components:n,useAsService:l}};function o(t){delete e[t]}function s(t){if(t=t||_t,!F(e,t))throw ct.create("no-app",{appName:t});return e[t]}function a(n,o){if(void 0===o&&(o={}),"object"!==(0,r.Z)(o)||null===o){var s=o;o={name:s}}var a=o;void 0===a.name&&(a.name=_t);var u=a.name;if("string"!==typeof u||!u)throw ct.create("bad-app-name",{appName:String(u)});if(F(e,u))throw ct.create("duplicate-app",{appName:u});var c=new t(n,a,i);return e[u]=c,c}function u(){return Object.keys(e).map((function(t){return e[t]}))}function c(r){var o=r.name;if(n.has(o))return At.debug("There were multiple attempts to register component "+o+"."),"PUBLIC"===r.type?i[o]:null;if(n.set(o,r),"PUBLIC"===r.type){var a=function(t){if(void 0===t&&(t=s()),"function"!==typeof t[o])throw ct.create("invalid-app-argument",{appName:o});return t[o]()};void 0!==r.serviceProps&&m(a,r.serviceProps),i[o]=a,t.prototype[o]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,o);return n.apply(this,r.multipleInstances?t:[])}}for(var u=0,c=Object.keys(e);u<c.length;u++){var h=c[u];e[h]._addComponent(r)}return"PUBLIC"===r.type?i[o]:null}function h(t,e,n){var r,i=null!==(r=St[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var a=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&a.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&a.push("and"),s&&a.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void At.warn(a.join(" "))}c(new K(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))}function f(t,e){if(null!==t&&"function"!==typeof t)throw ct.create("invalid-log-argument");st(t,e)}function l(t,e){if("serverAuth"===e)return null;var n=e;return n}return i["default"]=i,Object.defineProperty(i,"apps",{get:u}),s["App"]=t,i}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(){var t=Rt(Nt);function e(e){m(t,e)}return t.INTERNAL=s(s({},t.INTERNAL),{createFirebaseNamespace:Ct,extendNamespace:e,createSubscribe:V,ErrorFactory:L,deepExtend:m}),t}var xt=Ct(),Ot=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){var t=this.container.getProviders();return t.map((function(t){if(kt(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(t){var e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(t,e){t.INTERNAL.registerComponent(new K("platform-logger",(function(t){return new Ot(t)}),"PRIVATE")),t.registerVersion(ht,ft,e),t.registerVersion("fire-js","")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(S()&&void 0!==self.firebase){At.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Pt=self.firebase.SDK_VERSION;Pt&&Pt.indexOf("LITE")>=0&&At.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Mt=xt.initializeApp;xt.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return _()&&At.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Mt.apply(void 0,t)};var Ft=xt;Lt(Ft);var Vt=Ft,Ut="firebase",qt="8.10.1";
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Vt.registerVersion(Ut,qt,"app"),Vt.SDK_VERSION=qt;n(2472),n(8675),n(2990),n(8927),n(3105),n(5035),n(4345),n(7174),n(2846),n(4731),n(7209),n(6319),n(8867),n(7789),n(3739),n(9368),n(4483),n(2056),n(3462),n(678),n(7462),n(3824),n(5021),n(2974),n(5016),n(3112),n(2707),n(4603),n(8450),n(8386),n(3161),n(4363),n(5994),n(9826),n(2262),n(4506),n(561),n(2479),n(4553),n(489),n(4765),n(4129),n(8264),n(5837),n(3210);var jt=function(t,e){return jt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},jt(t,e)};function Bt(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}jt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function Kt(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var zt,Gt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Ht=Ht||{},Qt=Gt||self;function Wt(){}function Yt(t){var e=(0,r.Z)(t);return e="object"!=e?e:t?Array.isArray(t)?"array":e:"null","array"==e||"object"==e&&"number"==typeof t.length}function Xt(t){var e=(0,r.Z)(t);return"object"==e&&null!=t||"function"==e}function $t(t){return Object.prototype.hasOwnProperty.call(t,Jt)&&t[Jt]||(t[Jt]=++Zt)}var Jt="closure_uid_"+(1e9*Math.random()>>>0),Zt=0;function te(t,e,n){return t.call.apply(t.bind,arguments)}function ee(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function ne(t,e,n){return ne=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?te:ee,ne.apply(null,arguments)}function re(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function ie(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function oe(){this.s=this.s,this.o=this.o}var se=0,ae={};oe.prototype.s=!1,oe.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0!=se)){var t=$t(this);delete ae[t]}},oe.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var ue=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ce=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function he(t){t:{for(var e=Di,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}function fe(t){return Array.prototype.concat.apply([],arguments)}function le(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function pe(t){return/^[\s\xa0]*$/.test(t)}var de,ye=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ve(t,e){return-1!=t.indexOf(e)}function ge(t,e){return t<e?-1:t>e?1:0}t:{var me=Qt.navigator;if(me){var be=me.userAgent;if(be){de=be;break t}}de=""}function we(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Ee(t){var e={};for(var n in t)e[n]=t[n];return e}var Ie="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Te(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(var o=0;o<Ie.length;o++)n=Ie[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function _e(t){return _e[" "](t),t}function Se(t){var e=Ve;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}_e[" "]=Wt;var Ae,Ne=ve(de,"Opera"),De=ve(de,"Trident")||ve(de,"MSIE"),Re=ve(de,"Edge"),Ce=Re||De,xe=ve(de,"Gecko")&&!(ve(de.toLowerCase(),"webkit")&&!ve(de,"Edge"))&&!(ve(de,"Trident")||ve(de,"MSIE"))&&!ve(de,"Edge"),Oe=ve(de.toLowerCase(),"webkit")&&!ve(de,"Edge");function ke(){var t=Qt.document;return t?t.documentMode:void 0}t:{var Le="",Pe=function(){var t=de;return xe?/rv:([^\);]+)(\)|;)/.exec(t):Re?/Edge\/([\d\.]+)/.exec(t):De?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Oe?/WebKit\/(\S+)/.exec(t):Ne?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(Pe&&(Le=Pe?Pe[1]:""),De){var Me=ke();if(null!=Me&&Me>parseFloat(Le)){Ae=String(Me);break t}}Ae=Le}var Fe,Ve={};function Ue(){return Se((function(){for(var t=0,e=ye(String(Ae)).split("."),n=ye("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=ge(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||ge(0==o[2].length,0==s[2].length)||ge(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}))}if(Qt.document&&De){var qe=ke();Fe=qe||(parseInt(Ae,10)||void 0)}else Fe=void 0;var je=Fe,Be=function(){if(!Qt.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Qt.addEventListener("test",Wt,e),Qt.removeEventListener("test",Wt,e)}catch(n){}return t}();function Ke(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function ze(t,e){if(Ke.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(xe){t:{try{_e(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:Ge[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ze.Z.h.call(this)}}Ke.prototype.h=function(){this.defaultPrevented=!0},ie(ze,Ke);var Ge={2:"touch",3:"pen",4:"mouse"};ze.prototype.h=function(){ze.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var He="closure_listenable_"+(1e6*Math.random()|0),Qe=0;function We(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++Qe,this.ca=this.fa=!1}function Ye(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Xe(t){this.src=t,this.g={},this.h=0}function $e(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=ue(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Ye(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Je(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}Xe.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var s=Je(t,e,r,i);return-1<s?(e=t[s],n||(e.fa=!1)):(e=new We(e,this.src,o,!!r,i),e.fa=n,t.push(e)),e};var Ze="closure_lm_"+(1e6*Math.random()|0),tn={};function en(t,e,n,r,i){if(r&&r.once)return on(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)en(t,e[o],n,r,i);return null}return n=ln(n),t&&t[He]?t.N(e,n,Xt(r)?!!r.capture:!!r,i):nn(t,e,n,!1,r,i)}function nn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Xt(i)?!!i.capture:!!i,a=hn(t);if(a||(t[Ze]=a=new Xe(t)),n=a.add(e,n,r,s,o),n.proxy)return n;if(r=rn(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Be||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(un(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function rn(){function t(n){return e.call(t.src,t.listener,n)}var e=cn;return t}function on(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)on(t,e[o],n,r,i);return null}return n=ln(n),t&&t[He]?t.O(e,n,Xt(r)?!!r.capture:!!r,i):nn(t,e,n,!0,r,i)}function sn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)sn(t,e[o],n,r,i);else r=Xt(r)?!!r.capture:!!r,n=ln(n),t&&t[He]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=Je(o,n,r,i),-1<n&&(Ye(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--)))):t&&(t=hn(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Je(e,n,r,i)),(n=-1<t?e[t]:null)&&an(n))}function an(t){if("number"!==typeof t&&t&&!t.ca){var e=t.src;if(e&&e[He])$e(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(un(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=hn(e))?($e(n,t),0==n.h&&(n.src=null,e[Ze]=null)):Ye(t)}}}function un(t){return t in tn?tn[t]:tn[t]="on"+t}function cn(t,e){if(t.ca)t=!0;else{e=new ze(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&an(t),t=n.call(r,e)}return t}function hn(t){return t=t[Ze],t instanceof Xe?t:null}var fn="__closure_events_fn_"+(1e9*Math.random()>>>0);function ln(t){return"function"===typeof t?t:(t[fn]||(t[fn]=function(e){return t.handleEvent(e)}),t[fn])}function pn(){oe.call(this),this.i=new Xe(this),this.P=this,this.I=null}function dn(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"===typeof e)e=new Ke(e,t);else if(e instanceof Ke)e.target=e.target||t;else{var i=e;e=new Ke(r,t),Te(e,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=yn(s,r,!0,e)&&i}if(s=e.g=t,i=yn(s,r,!0,e)&&i,i=yn(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)s=e.g=n[o],i=yn(s,r,!1,e)&&i}function yn(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ca&&s.capture==n){var a=s.listener,u=s.ia||s.src;s.fa&&$e(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}ie(pn,oe),pn.prototype[He]=!0,pn.prototype.removeEventListener=function(t,e,n,r){sn(this,t,e,n,r)},pn.prototype.M=function(){if(pn.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)Ye(n[r]);delete e.g[t],e.h--}}this.I=null},pn.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},pn.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var vn=Qt.JSON.stringify;function gn(){var t=An,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var mn,bn=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=wn.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),wn=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},t}())((function(){return new En}),(function(t){return t.reset()})),En=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function In(t){Qt.setTimeout((function(){throw t}),0)}function Tn(t,e){mn||_n(),Sn||(mn(),Sn=!0),An.add(t,e)}function _n(){var t=Qt.Promise.resolve(void 0);mn=function(){t.then(Nn)}}var Sn=!1,An=new bn;function Nn(){for(var t;t=gn();){try{t.h.call(t.g)}catch(n){In(n)}var e=wn;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Sn=!1}function Dn(t,e){pn.call(this),this.h=t||1,this.g=e||Qt,this.j=ne(this.kb,this),this.l=Date.now()}function Rn(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Cn(t,e,n){if("function"===typeof t)n&&(t=ne(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=ne(t.handleEvent,t)}return 2147483647<Number(e)?-1:Qt.setTimeout(t,e||0)}function xn(t){t.g=Cn((function(){t.g=null,t.i&&(t.i=!1,xn(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}ie(Dn,pn),zt=Dn.prototype,zt.da=!1,zt.S=null,zt.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),dn(this,"tick"),this.da&&(Rn(this),this.start()))}},zt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},zt.M=function(){Dn.Z.M.call(this),Rn(this),delete this.g};var On=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return Bt(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:xn(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(Qt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(oe);function kn(t){oe.call(this),this.h=t,this.g={}}ie(kn,oe);var Ln=[];function Pn(t,e,n,r){Array.isArray(n)||(n&&(Ln[0]=n.toString()),n=Ln);for(var i=0;i<n.length;i++){var o=en(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function Mn(t){we(t.g,(function(t,e){this.g.hasOwnProperty(e)&&an(t)}),t),t.g={}}function Fn(){this.g=!0}function Vn(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var h=c[0];c=c[1];var f=h.split("_");s=2<=f.length&&"type"==f[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}function Un(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}function qn(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+Bn(t,n)+(r?" "+r:"")}))}function jn(t,e){t.info((function(){return"TIMEOUT: "+e}))}function Bn(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return vn(n)}catch(a){return e}}kn.prototype.M=function(){kn.Z.M.call(this),Mn(this)},kn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Fn.prototype.Aa=function(){this.g=!1},Fn.prototype.info=function(){};var Kn={},zn=null;function Gn(){return zn=zn||new pn}function Hn(t){Ke.call(this,Kn.Ma,t)}function Qn(t){var e=Gn();dn(e,new Hn(e,t))}function Wn(t,e){Ke.call(this,Kn.STAT_EVENT,t),this.stat=e}function Yn(t){var e=Gn();dn(e,new Wn(e,t))}function Xn(t,e){Ke.call(this,Kn.Na,t),this.size=e}function $n(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return Qt.setTimeout((function(){t()}),e)}Kn.Ma="serverreachability",ie(Hn,Ke),Kn.STAT_EVENT="statevent",ie(Wn,Ke),Kn.Na="timingevent",ie(Xn,Ke);var Jn={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Zn={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function tr(){}function er(t){return t.h||(t.h=t.i())}function nr(){}tr.prototype.h=null;var rr,ir={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function or(){Ke.call(this,"d")}function sr(){Ke.call(this,"c")}function ar(){}function ur(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new kn(this),this.P=hr,t=Ce?125:void 0,this.W=new Dn(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new cr}function cr(){this.i=null,this.g="",this.h=!1}ie(or,Ke),ie(sr,Ke),ie(ar,tr),ar.prototype.g=function(){return new XMLHttpRequest},ar.prototype.i=function(){return{}},rr=new ar;var hr=45e3,fr={},lr={};function pr(t,e,n){t.K=1,t.v=Vr(Or(e)),t.s=n,t.U=!0,dr(t,null)}function dr(t,e){t.F=Date.now(),mr(t),t.A=Or(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),Zr(n.h,"t",r),t.C=0,n=t.l.H,t.h=new cr,t.g=oo(t.l,n?e:null,!t.s),0<t.O&&(t.L=new On(ne(t.Ia,t,t.g),t.O)),Pn(t.V,t.g,"readystatechange",t.gb),e=t.H?Ee(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Qn(1),Vn(t.j,t.u,t.A,t.m,t.X,t.s)}function yr(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Ba)}function vr(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if(r=gr(t,n),r==lr){4==e&&(t.o=4,Yn(14),i=!1),qn(t.j,t.m,null,"[Incomplete Response]");break}if(r==fr){t.o=4,Yn(15),qn(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}qn(t.j,t.m,r,null),Tr(t,r)}yr(t)&&r!=lr&&r!=fr&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Yn(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,e=t.l,e.g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),$i(e),e.L=!0,Yn(11))):(qn(t.j,t.m,n,"[Invalid Chunked Response]"),Ir(t),Er(t))}function gr(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?lr:(n=Number(e.substring(n,r)),isNaN(n)?fr:(r+=1,r+n>e.length?lr:(e=e.substr(r,n),t.C=r+n,e)))}function mr(t){t.Y=Date.now()+t.P,br(t,t.P)}function br(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=$n(ne(t.eb,t),e)}function wr(t){t.B&&(Qt.clearTimeout(t.B),t.B=null)}function Er(t){0==t.l.G||t.I||to(t.l,t)}function Ir(t){wr(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,Rn(t.W),Mn(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Tr(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||ai(n.i,t)))if(n.I=t.N,!t.J&&ai(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Zi(n),ji(n)}Xi(n),Yn(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=$n(ne(n.ab,n),6e3));if(1>=si(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else no(n,11)}else if((t.J||n.g==t)&&Zi(n),!pe(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var s=o[3];null!=s&&(n.ma=s,n.h.info("VER="+n.ma));var a=o[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var h=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var f=r.i;!f.g&&(ve(h,"spdy")||ve(h,"quic")||ve(h,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(ui(f,f.h),f.h=null))}if(r.D){var l=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;l&&(r.sa=l,Fr(r.F,r.D,l))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms")),r=n;var p=t;if(r.oa=io(r,r.H?r.la:null,r.W),p.J){ci(r.i,p);var d=p,y=r.K;y&&d.setTimeout(y),d.B&&(wr(d),mr(d)),r.g=p}else Yi(r);0<n.l.length&&zi(n)}else"stop"!=o[0]&&"close"!=o[0]||no(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?no(n,7):qi(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}Qn(4)}catch(o){}}function _r(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"===typeof t)return t.split("");if(Yt(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Sr(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Yt(t)||"string"===typeof t)ce(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(Yt(t)||"string"===typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=_r(t),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Ar(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ar)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Nr(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Dr(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)r=t.g[e],Dr(i,r)||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function Dr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}zt=ur.prototype,zt.setTimeout=function(t){this.P=t},zt.gb=function(t){t=t.target;var e=this.L;e&&3==Li(t)?e.l():this.Ia(t)},zt.Ia=function(t){try{if(t==this.g)t:{var e=Li(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||Ce||this.g&&(this.h.h||this.g.ga()||Pi(this.g)))){this.I||4!=e||7==n||Qn(8==n||0>=r?3:2),wr(this);var i=this.g.ba();this.N=i;e:if(yr(this)){var o=Pi(this.g);t="";var s=o.length,a=4==Li(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ir(this),Er(this);var u="";break e}this.h.i=new Qt.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:a&&n==s-1});o.splice(0,s),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,Un(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,h=this.g;if((c=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pe(c)){var f=c;break e}}f=null}if(!(i=f)){this.i=!1,this.o=3,Yn(12),Ir(this),Er(this);break t}qn(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Tr(this,i)}this.U?(vr(this,e,u),Ce&&this.i&&3==e&&(Pn(this.V,this.W,"tick",this.fb),this.W.start())):(qn(this.j,this.m,u,null),Tr(this,u)),4==e&&Ir(this),this.i&&!this.I&&(4==e?to(this.l,this):(this.i=!1,mr(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Yn(12)):(this.o=0,Yn(13)),Ir(this),Er(this)}}}catch(e){}},zt.fb=function(){if(this.g){var t=Li(this.g),e=this.g.ga();this.C<e.length&&(wr(this),vr(this,t,e),this.i&&4!=t&&mr(this))}},zt.cancel=function(){this.I=!0,Ir(this)},zt.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(jn(this.j,this.A),2!=this.K&&(Qn(3),Yn(17)),Ir(this),this.o=2,Er(this)):br(this,this.Y-t)},zt=Ar.prototype,zt.R=function(){Nr(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},zt.T=function(){return Nr(this),this.g.concat()},zt.get=function(t,e){return Dr(this.h,t)?this.h[t]:e},zt.set=function(t,e){Dr(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},zt.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Rr=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Cr(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function xr(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof xr){this.g=void 0!==e?e:t.g,kr(this,t.j),this.s=t.s,Lr(this,t.i),Pr(this,t.m),this.l=t.l,e=t.h;var n=new Yr;n.i=e.i,e.g&&(n.g=new Ar(e.g),n.h=e.h),Mr(this,n),this.o=t.o}else t&&(n=String(t).match(Rr))?(this.g=!!e,kr(this,n[1]||"",!0),this.s=jr(n[2]||""),Lr(this,n[3]||"",!0),Pr(this,n[4]),this.l=jr(n[5]||"",!0),Mr(this,n[6]||"",!0),this.o=jr(n[7]||"")):(this.g=!!e,this.h=new Yr(null,this.g))}function Or(t){return new xr(t)}function kr(t,e,n){t.j=n?jr(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Lr(t,e,n){t.i=n?jr(e,!0):e}function Pr(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Mr(t,e,n){e instanceof Yr?(t.h=e,ei(t.h,t.g)):(n||(e=Br(e,Qr)),t.h=new Yr(e,t.g))}function Fr(t,e,n){t.h.set(e,n)}function Vr(t){return Fr(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ur(t){return t instanceof xr?Or(t):new xr(t,void 0)}function qr(t,e,n,r){var i=new xr(null,void 0);return t&&kr(i,t),e&&Lr(i,e),n&&Pr(i,n),r&&(i.l=r),i}function jr(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Br(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,Kr),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Kr(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(15&t).toString(16)}xr.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Br(e,zr,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Br(e,zr,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,null!=n&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(Br(n,"/"==n.charAt(0)?Hr:Gr,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Br(n,Wr)),t.join("")};var zr=/[#\/\?@]/g,Gr=/[#\?:]/g,Hr=/[#\?]/g,Qr=/[#\?@]/g,Wr=/#/g;function Yr(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Xr(t){t.g||(t.g=new Ar,t.h=0,t.i&&Cr(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function $r(t,e){Xr(t),e=ti(t,e),Dr(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,t=t.g,Dr(t.h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Nr(t)))}function Jr(t,e){return Xr(t),e=ti(t,e),Dr(t.g.h,e)}function Zr(t,e,n){$r(t,e),0<n.length&&(t.i=null,t.g.set(ti(t,e),le(n)),t.h+=n.length)}function ti(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function ei(t,e){e&&!t.j&&(Xr(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&($r(this,e),Zr(this,n,t))}),t)),t.j=e}zt=Yr.prototype,zt.add=function(t,e){Xr(this),this.i=null,t=ti(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},zt.forEach=function(t,e){Xr(this),this.g.forEach((function(n,r){ce(n,(function(n){t.call(e,n,r,this)}),this)}),this)},zt.T=function(){Xr(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},zt.R=function(t){Xr(this);var e=[];if("string"===typeof t)Jr(this,t)&&(e=fe(e,this.g.get(ti(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=fe(e,t[n])}return e},zt.set=function(t,e){return Xr(this),this.i=null,t=ti(this,t),Jr(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},zt.get=function(t,e){return t?(t=this.R(t),0<t.length?String(t[0]):e):e},zt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.i=t.join("&")};var ni=function(){function t(t,e){this.h=t,this.g=e}return t}();function ri(t){this.l=t||ii,Qt.PerformanceNavigationTiming?(t=Qt.performance.getEntriesByType("navigation"),t=0<t.length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol)):t=!!(Qt.g&&Qt.g.Ea&&Qt.g.Ea()&&Qt.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ii=10;function oi(t){return!!t.h||!!t.g&&t.g.size>=t.j}function si(t){return t.h?1:t.g?t.g.size:0}function ai(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function ui(t,e){t.g?t.g.add(e):t.h=e}function ci(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function hi(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=Kt(t.g.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.D)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return le(t.i)}function fi(){}function li(){this.g=new fi}function pi(t,e,n){var r=n||"";try{Sr(t,(function(t,n){var i=t;Xt(t)&&(i=vn(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function di(t,e){var n=new Fn;if(Qt.Image){var r=new Image;r.onload=re(yi,n,r,"TestLoadImage: loaded",!0,e),r.onerror=re(yi,n,r,"TestLoadImage: error",!1,e),r.onabort=re(yi,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=re(yi,n,r,"TestLoadImage: timeout",!1,e),Qt.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}function yi(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function vi(t){this.l=t.$b||null,this.j=t.ib||!1}function gi(t,e){pn.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=mi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ri.prototype.cancel=function(){var t,e;if(this.i=hi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=Kt(this.g.values()),r=n.next();!r.done;r=n.next()){var i=r.value;i.cancel()}}catch(o){t={error:o}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},fi.prototype.stringify=function(t){return Qt.JSON.stringify(t,void 0)},fi.prototype.parse=function(t){return Qt.JSON.parse(t,void 0)},ie(vi,tr),vi.prototype.g=function(){return new gi(this.l,this.j)},vi.prototype.i=function(t){return function(){return t}}({}),ie(gi,pn);var mi=0;function bi(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function wi(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Ei(t)}function Ei(t){t.onreadystatechange&&t.onreadystatechange.call(t)}zt=gi.prototype,zt.open=function(t,e){if(this.readyState!=mi)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Ei(this)},zt.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Qt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},zt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,wi(this)),this.readyState=mi},zt.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ei(this)),this.g&&(this.readyState=3,Ei(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Qt.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;bi(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},zt.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?wi(this):Ei(this),3==this.readyState&&bi(this)}},zt.Ua=function(t){this.g&&(this.response=this.responseText=t,wi(this))},zt.Ta=function(t){this.g&&(this.response=t,wi(this))},zt.ha=function(){this.g&&wi(this)},zt.setRequestHeader=function(t,e){this.v.append(t,e)},zt.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},zt.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(gi.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Ii=Qt.JSON.parse;function Ti(t){pn.call(this),this.headers=new Ar,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=_i,this.K=this.L=!1}ie(Ti,pn);var _i="",Si=/^https?$/i,Ai=["POST","PUT"];function Ni(t){return De&&Ue()&&"number"===typeof t.timeout&&void 0!==t.ontimeout}function Di(t){return"content-type"==t.toLowerCase()}function Ri(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Ci(t),Oi(t)}function Ci(t){t.D||(t.D=!0,dn(t,"complete"),dn(t,"error"))}function xi(t){if(t.h&&"undefined"!=typeof Ht&&(!t.C[1]||4!=Li(t)||2!=t.ba()))if(t.v&&4==Li(t))Cn(t.Fa,0,t);else if(dn(t,"readystatechange"),4==Li(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(Rr)[1]||null;if(!o&&Qt.self&&Qt.self.location){var s=Qt.self.location.protocol;o=s.substr(0,s.length-1)}i=!Si.test(o?o.toLowerCase():"")}e=i}if(e)dn(t,"complete"),dn(t,"success");else{t.m=6;try{var a=2<Li(t)?t.g.statusText:""}catch(u){a=""}t.j=a+" ["+t.ba()+"]",Ci(t)}}finally{Oi(t)}}}function Oi(t,e){if(t.g){ki(t);var n=t.g,r=t.C[0]?Wt:null;t.g=null,t.C=null,e||dn(t,"ready");try{n.onreadystatechange=r}catch(i){}}}function ki(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Qt.clearTimeout(t.A),t.A=null)}function Li(t){return t.g?t.g.readyState:0}function Pi(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case _i:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Mi(t){var e="";return we(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function Fi(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=Mi(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):Fr(t,e,n))}function Vi(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Ui(t){this.za=0,this.l=[],this.h=new Fn,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Vi("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Vi("baseRetryDelayMs",5e3,t),this.$a=Vi("retryDelaySeedMs",1e4,t),this.Ya=Vi("forwardChannelMaxRetries",2,t),this.ra=Vi("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new ri(t&&t.concurrentRequestLimit),this.Ca=new li,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function qi(t){if(Bi(t),3==t.G){var e=t.V++,n=Or(t.F);Fr(n,"SID",t.J),Fr(n,"RID",e),Fr(n,"TYPE","terminate"),Qi(t,n),e=new ur(t,t.h,e,void 0),e.K=2,e.v=Vr(Or(n)),n=!1,Qt.navigator&&Qt.navigator.sendBeacon&&(n=Qt.navigator.sendBeacon(e.v.toString(),"")),!n&&Qt.Image&&((new Image).src=e.v,n=!0),n||(e.g=oo(e.l,null),e.g.ea(e.v)),e.F=Date.now(),mr(e)}ro(t)}function ji(t){t.g&&($i(t),t.g.cancel(),t.g=null)}function Bi(t){ji(t),t.u&&(Qt.clearTimeout(t.u),t.u=null),Zi(t),t.i.cancel(),t.m&&("number"===typeof t.m&&Qt.clearTimeout(t.m),t.m=null)}function Ki(t,e){t.l.push(new ni(t.Za++,e)),3==t.G&&zi(t)}function zi(t){oi(t.i)||t.m||(t.m=!0,Tn(t.Ha,t),t.C=0)}function Gi(t,e){return!(si(t.i)>=t.i.j-(t.m?1:0))&&(t.m?(t.l=e.D.concat(t.l),!0):!(1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya))&&(t.m=$n(ne(t.Ha,t,e),eo(t,t.C)),t.C++,!0))}function Hi(t,e){var n;n=e?e.m:t.V++;var r=Or(t.F);Fr(r,"SID",t.J),Fr(r,"RID",n),Fr(r,"AID",t.U),Qi(t,r),t.o&&t.s&&Fi(r,t.o,t.s),n=new ur(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Wi(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),ui(t.i,n),pr(n,r,e)}function Qi(t,e){t.j&&Sr({},(function(t,n){Fr(e,n,t)}))}function Wi(t,e,n){n=Math.min(t.l.length,n);var r=t.j?ne(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].h,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].h,h=i[u].g;if(c-=o,0>c)o=Math.max(0,i[u].h-100),a=!1;else try{pi(h,s,"req"+c+"_")}catch(jo){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function Yi(t){t.g||t.u||(t.Y=1,Tn(t.Ga,t),t.A=0)}function Xi(t){return!(t.g||t.u||3<=t.A)&&(t.Y++,t.u=$n(ne(t.Ga,t),eo(t,t.A)),t.A++,!0)}function $i(t){null!=t.B&&(Qt.clearTimeout(t.B),t.B=null)}function Ji(t){t.g=new ur(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=Or(t.oa);Fr(e,"RID","rpc"),Fr(e,"SID",t.J),Fr(e,"CI",t.N?"0":"1"),Fr(e,"AID",t.U),Qi(t,e),Fr(e,"TYPE","xmlhttp"),t.o&&t.s&&Fi(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Vr(Or(e)),n.s=null,n.U=!0,dr(n,t)}function Zi(t){null!=t.v&&(Qt.clearTimeout(t.v),t.v=null)}function to(t,e){var n=null;if(t.g==e){Zi(t),$i(t),t.g=null;var r=2}else{if(!ai(t.i,e))return;n=e.D,ci(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;r=Gn(),dn(r,new Xn(r,n,e,i)),zi(t)}else Yi(t);else if(i=e.o,3==i||0==i&&0<t.I||!(1==r&&Gi(t,e)||2==r&&Xi(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:no(t,5);break;case 4:no(t,10);break;case 3:no(t,6);break;default:no(t,2)}}function eo(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function no(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=ne(t.jb,t);n||(n=new xr("//www.google.com/images/cleardot.gif"),Qt.location&&"http"==Qt.location.protocol||kr(n,"https"),Vr(n)),di(n.toString(),r)}else Yn(2);t.G=0,t.j&&t.j.va(e),ro(t),Bi(t)}function ro(t){t.G=0,t.I=-1,t.j&&(0==hi(t.i).length&&0==t.l.length||(t.i.i.length=0,le(t.l),t.l.length=0),t.j.ua())}function io(t,e,n){var r=Ur(n);if(""!=r.i)e&&Lr(r,e+"."+r.i),Pr(r,r.m);else{var i=Qt.location;r=qr(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&we(t.aa,(function(t,e){Fr(r,e,t)})),e=t.D,n=t.sa,e&&n&&Fr(r,e,n),Fr(r,"VER",t.ma),Qi(t,r),r}function oo(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ba&&!t.qa?new Ti(new vi({ib:!0})):new Ti(t.qa),e.L=t.H,e}function so(){}function ao(){if(De&&!(10<=Number(je)))throw Error("Environmental error: no available transport.")}function uo(t,e){pn.call(this),this.g=new Ui(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!pe(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!pe(e)&&(this.g.D=e,t=this.h,null!==t&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new fo(this)}function co(t){or.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function ho(){sr.call(this),this.status=1}function fo(t){this.g=t}zt=Ti.prototype,zt.ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():rr.g(),this.C=this.u?er(this.u):er(rr),this.g.onreadystatechange=ne(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){return void Ri(this,o)}t=n||"";var i=new Ar(this.headers);r&&Sr(r,(function(t,e){i.set(e,t)})),r=he(i.T()),n=Qt.FormData&&t instanceof Qt.FormData,!(0<=ue(Ai,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ki(this),0<this.B&&((this.K=Ni(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ne(this.pa,this)):this.A=Cn(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){Ri(this,o)}},zt.pa=function(){"undefined"!=typeof Ht&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,dn(this,"timeout"),this.abort(8))},zt.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,dn(this,"complete"),dn(this,"abort"),Oi(this))},zt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Oi(this,!0)),Ti.Z.M.call(this)},zt.Fa=function(){this.s||(this.F||this.v||this.l?xi(this):this.cb())},zt.cb=function(){xi(this)},zt.ba=function(){try{return 2<Li(this)?this.g.status:-1}catch(t){return-1}},zt.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},zt.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Ii(e)}},zt.Da=function(){return this.m},zt.La=function(){return"string"===typeof this.j?this.j:String(this.j)},zt=Ui.prototype,zt.ma=8,zt.G=1,zt.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},zt.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new ur(this,this.h,t,void 0),n=this.s;if(this.P&&(n?(n=Ee(n),Te(n,this.P)):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(o="__data__"in o.g&&(o=o.g.__data__,"string"===typeof o)?o.length:void 0,void 0===o)break;if(r+=o,4096<r){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=Wi(this,e,r),i=Or(this.F),Fr(i,"RID",t),Fr(i,"CVER",22),this.D&&Fr(i,"X-HTTP-Session-Id",this.D),Qi(this,i),this.o&&n&&Fi(i,this.o,n),ui(this.i,e),this.Ra&&Fr(i,"TYPE","init"),this.ja?(Fr(i,"$req",r),Fr(i,"SID","null"),e.$=!0,pr(e,i,null)):pr(e,i,r),this.G=2}}else 3==this.G&&(t?Hi(this,t):0==this.l.length||oi(this.i)||Hi(this))},zt.Ga=function(){if(this.u=null,Ji(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=$n(ne(this.bb,this),t)}},zt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Yn(10),ji(this),Ji(this))},zt.ab=function(){null!=this.v&&(this.v=null,ji(this),Xi(this),Yn(19))},zt.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Yn(2)):(this.h.info("Failed to ping google.com"),Yn(1))},zt=so.prototype,zt.xa=function(){},zt.wa=function(){},zt.va=function(){},zt.ua=function(){},zt.Oa=function(){},ao.prototype.g=function(t,e){return new uo(t,e)},ie(uo,pn),uo.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Tn(ne(t.hb,t,e))),Yn(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=io(t,null,t.W),zi(t)},uo.prototype.close=function(){qi(this.g)},uo.prototype.u=function(t){if("string"===typeof t){var e={};e.__data__=t,Ki(this.g,e)}else this.v?(e={},e.__data__=vn(t),Ki(this.g,e)):Ki(this.g,t)},uo.prototype.M=function(){this.g.j=null,delete this.j,qi(this.g),delete this.g,uo.Z.M.call(this)},ie(co,or),ie(ho,sr),ie(fo,so),fo.prototype.xa=function(){dn(this.g,"a")},fo.prototype.wa=function(t){dn(this.g,new co(t))},fo.prototype.va=function(t){dn(this.g,new ho(t))},fo.prototype.ua=function(){dn(this.g,"b")},ao.prototype.createWebChannel=ao.prototype.g,uo.prototype.send=uo.prototype.u,uo.prototype.open=uo.prototype.m,uo.prototype.close=uo.prototype.close,Jn.NO_ERROR=0,Jn.TIMEOUT=8,Jn.HTTP_ERROR=6,Zn.COMPLETE="complete",nr.EventType=ir,ir.OPEN="a",ir.CLOSE="b",ir.ERROR="c",ir.MESSAGE="d",pn.prototype.listen=pn.prototype.N,Ti.prototype.listenOnce=Ti.prototype.O,Ti.prototype.getLastError=Ti.prototype.La,Ti.prototype.getLastErrorCode=Ti.prototype.Da,Ti.prototype.getStatus=Ti.prototype.ba,Ti.prototype.getResponseJson=Ti.prototype.Qa,Ti.prototype.getResponseText=Ti.prototype.ga,Ti.prototype.send=Ti.prototype.ea;var lo=function(){return new ao},po=function(){return Gn()},yo=Jn,vo=Zn,go=Kn,mo={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},bo=vi,wo=nr,Eo=Ti,Io=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Io.o=-1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var To={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},_o=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return o(e,t),e}(Error),So=new it("@firebase/firestore");function Ao(){return So.logLevel}function No(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(So.logLevel<=$.DEBUG){var r=e.map(Co);So.debug.apply(So,f(["Firestore (8.10.1): "+t],r))}}function Do(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(So.logLevel<=$.ERROR){var r=e.map(Co);So.error.apply(So,f(["Firestore (8.10.1): "+t],r))}}function Ro(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(So.logLevel<=$.WARN){var r=e.map(Co);So.warn.apply(So,f(["Firestore (8.10.1): "+t],r))}}function Co(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xo(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.10.1) INTERNAL ASSERTION FAILED: "+t;throw Do(e),new Error(e)}function Oo(t,e){t||xo()}function ko(t,e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Po=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Lo(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Mo(t,e){return t<e?-1:t>e?1:0}function Fo(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Vo(t){return t+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Uo=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new _o(To.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new _o(To.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new _o(To.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new _o(To.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Mo(this.nanoseconds,t.nanoseconds):Mo(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),qo=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Uo(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jo(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Bo(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ko(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zo=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&xo(),void 0===n?n=t.length-e:n>t.length-e&&xo(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Go=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new _o(To.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(zo),Ho=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Qo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Ho.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new _o(To.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new _o(To.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new _o(To.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new _o(To.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(zo),Wo=function(){function t(t){this.fields=t,t.sort(Qo.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Fo(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Yo=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Mo(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Yo.EMPTY_BYTE_STRING=new Yo("");var Xo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $o(t){if(Oo(!!t),"string"==typeof t){var e=0,n=Xo.exec(t);if(Oo(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Jo(t.seconds),nanos:Jo(t.nanos)}}function Jo(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Zo(t){return"string"==typeof t?Yo.fromBase64String(t):Yo.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function es(t){var e=t.mapValue.fields.__previous_value__;return ts(e)?es(e):e}function ns(t){var e=$o(t.mapValue.fields.__local_write_time__.timestampValue);return new Uo(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(t){return null==t}function is(t){return 0===t&&1/t==-1/0}function os(t){return"number"==typeof t&&Number.isInteger(t)&&!is(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ss=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Go.fromString(e))},t.fromName=function(e){return new t(Go.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Go.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Go.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Go(e.slice()))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ts(t)?4:10:xo()}function us(t,e){var n=as(t);if(n!==as(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ns(t).isEqual(ns(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=$o(t.timestampValue),r=$o(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Zo(t.bytesValue).isEqual(Zo(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Jo(t.geoPointValue.latitude)===Jo(e.geoPointValue.latitude)&&Jo(t.geoPointValue.longitude)===Jo(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Jo(t.integerValue)===Jo(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Jo(t.doubleValue),r=Jo(e.doubleValue);return n===r?is(n)===is(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Fo(t.arrayValue.values||[],e.arrayValue.values||[],us);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(jo(n)!==jo(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!us(n[i],r[i])))return!1;return!0}(t,e);default:return xo()}}function cs(t,e){return void 0!==(t.values||[]).find((function(t){return us(t,e)}))}function hs(t,e){var n=as(t),r=as(e);if(n!==r)return Mo(n,r);switch(n){case 0:return 0;case 1:return Mo(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Jo(t.integerValue||t.doubleValue),r=Jo(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return fs(t.timestampValue,e.timestampValue);case 4:return fs(ns(t),ns(e));case 5:return Mo(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Zo(t),r=Zo(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Mo(n[i],r[i]);if(0!==o)return o}return Mo(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Mo(Jo(t.latitude),Jo(e.latitude));return 0!==n?n:Mo(Jo(t.longitude),Jo(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=hs(n[i],r[i]);if(o)return o}return Mo(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Mo(r[s],o[s]);if(0!==a)return a;var u=hs(n[r[s]],i[o[s]]);if(0!==u)return u}return Mo(r.length,o.length)}(t.mapValue,e.mapValue);default:throw xo()}}function fs(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Mo(t,e);var n=$o(t),r=$o(e),i=Mo(n.seconds,r.seconds);return 0!==i?i:Mo(n.nanos,r.nanos)}function ls(t){return ps(t)}function ps(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=$o(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Zo(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,ss.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=ps(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+ps(t.fields[o])}return e+"}"}(t.mapValue):xo();var e,n}function ds(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function ys(t){return!!t&&"integerValue"in t}function vs(t){return!!t&&"arrayValue"in t}function gs(t){return!!t&&"nullValue"in t}function ms(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function bs(t){return!!t&&"mapValue"in t}function ws(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==(0,r.Z)(t.timestampValue))return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return Bo(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=ws(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},i=0;i<(t.arrayValue.values||[]).length;++i)n.arrayValue.values[i]=ws(t.arrayValue.values[i]);return n}return Object.assign({},t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Es=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!bs(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ws(e)},t.prototype.setAll=function(t){var e=this,n=Qo.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=ws(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());bs(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return us(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];bs(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){Bo(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(ws(this.value))},t}();function Is(t){var e=[];return Bo(t.fields,(function(t,n){var r=new Qo([t]);if(bs(n)){var i=Is(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new Wo(e)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Ts=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,qo.min(),Es.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Es.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Es.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Es.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Es.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),_s=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new _s(t,e,n,r,i,o,s)}function As(t){var e=ko(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+ls(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),rs(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Us(e.startAt)),e.endAt&&(n+="|ub:",n+=Us(e.endAt)),e.h=n}return e.h}function Ns(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!js(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!us(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ks(t.startAt,e.startAt)&&Ks(t.endAt,e.endAt)}function Ds(t){return ss.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Rs=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return o(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Cs(t,n,r):"array-contains"===n?new Ls(t,r):"in"===n?new Ps(t,r):"not-in"===n?new Ms(t,r):"array-contains-any"===n?new Fs(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new xs(t,n):new Os(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(hs(e,this.value)):null!==e&&as(this.value)===as(e)&&this.m(hs(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return xo()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Cs=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=ss.fromName(r.referenceValue),i}return o(e,t),e.prototype.matches=function(t){var e=ss.comparator(t.key,this.key);return this.m(e)},e}(Rs),xs=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=ks("in",n),r}return o(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Rs),Os=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=ks("not-in",n),r}return o(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Rs);function ks(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return ss.fromName(t.referenceValue)}))}var Ls=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return o(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return vs(e)&&cs(e.arrayValue,this.value)},e}(Rs),Ps=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return o(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&cs(this.value.arrayValue,e)},e}(Rs),Ms=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return o(e,t),e.prototype.matches=function(t){if(cs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!cs(this.value.arrayValue,e)},e}(Rs),Fs=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return o(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!vs(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return cs(e.value.arrayValue,t)}))},e}(Rs),Vs=function(t,e){this.position=t,this.before=e};function Us(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return ls(t)})).join(",")}var qs=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function js(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Bs(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?ss.comparator(ss.fromName(s.referenceValue),n.key):hs(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Ks(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!us(t.position[n],e.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zs=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null,this.startAt,this.endAt};function Gs(t,e,n,r,i,o,s,a){return new zs(t,e,n,r,i,o,s,a)}function Hs(t){return new zs(t)}function Qs(t){return!rs(t.limit)&&"F"===t.limitType}function Ws(t){return!rs(t.limit)&&"L"===t.limitType}function Ys(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Xs(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function $s(t){return null!==t.collectionGroup}function Js(t){var e=ko(t);if(null===e.p){e.p=[];var n=Xs(e),r=Ys(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new qs(n)),e.p.push(new qs(Qo.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new qs(Qo.keyField(),u))}}}return e.p}function Zs(t){var e=ko(t);if(!e.T)if("F"===e.limitType)e.T=Ss(e.path,e.collectionGroup,Js(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Js(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new qs(o.field,s))}var a=e.endAt?new Vs(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Vs(e.startAt.position,!e.startAt.before):null;e.T=Ss(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.T}function ta(t,e,n){return new zs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ea(t,e){return Ns(Zs(t),Zs(e))&&t.limitType===e.limitType}function na(t){return As(Zs(t))+"|lt:"+t.limitType}function ra(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+ls(e.value);var e})).join(", ")+"]"),rs(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Us(t.startAt)),t.endAt&&(e+=", endAt: "+Us(t.endAt)),"Target("+e+")"}(Zs(t))+"; limitType="+t.limitType+")"}function ia(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):ss.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Bs(t.startAt,Js(t),e))&&(!t.endAt||!Bs(t.endAt,Js(t),e))}(t,e)}function oa(t){return function(e,n){for(var r=!1,i=0,o=Js(t);i<o.length;i++){var s=o[i],a=sa(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function sa(t,e,n){var r=t.field.isKeyField()?ss.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?hs(r,i):xo()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return xo()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aa(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:is(e)?"-0":e}}function ua(t){return{integerValue:""+t}}function ca(t,e){return os(e)?ua(e):aa(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ha=function(){this._=void 0};function fa(t,e,n){return t instanceof da?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof ya?va(t,e):t instanceof ga?ma(t,e):function(t,e){var n=pa(t,e),r=wa(n)+wa(t.A);return ys(n)&&ys(t.A)?ua(r):aa(t.R,r)}(t,e)}function la(t,e,n){return t instanceof ya?va(t,e):t instanceof ga?ma(t,e):n}function pa(t,e){return t instanceof ba?ys(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var da=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(ha),ya=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return o(e,t),e}(ha);function va(t,e){for(var n=Ea(e),r=function(t){n.some((function(e){return us(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ga=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return o(e,t),e}(ha);function ma(t,e){for(var n=Ea(e),r=function(t){n=n.filter((function(e){return!us(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ba=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return o(e,t),e}(ha);function wa(t){return Jo(t.integerValue||t.doubleValue)}function Ea(t){return vs(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ia=function(t,e){this.field=t,this.transform=e},Ta=function(t,e){this.version=t,this.transformResults=e},_a=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Sa(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Aa=function(){};function Na(t,e,n){t instanceof Oa?function(t,e,n){var r=t.value.clone(),i=Pa(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof ka?function(t,e,n){if(Sa(t.precondition,e)){var r=Pa(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(La(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Da(t,e,n){t instanceof Oa?function(t,e,n){if(Sa(t.precondition,e)){var r=t.value.clone(),i=Ma(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(xa(e),r).setHasLocalMutations()}}(t,e,n):t instanceof ka?function(t,e,n){if(Sa(t.precondition,e)){var r=Ma(t.fieldTransforms,n,e),i=e.data;i.setAll(La(t)),i.setAll(r),e.convertToFoundDocument(xa(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Sa(t.precondition,e)&&e.convertToNoDocument(qo.min())}(t,e)}function Ra(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=pa(o.transform,s||null);null!=a&&(null==n&&(n=Es.empty()),n.set(o.field,a))}return n||null}function Ca(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Fo(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof ya&&e instanceof ya||t instanceof ga&&e instanceof ga?Fo(t.elements,e.elements,us):t instanceof ba&&e instanceof ba?us(t.A,e.A):t instanceof da&&e instanceof da}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function xa(t){return t.isFoundDocument()?t.version:qo.min()}var Oa=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return o(e,t),e}(Aa),ka=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return o(e,t),e}(Aa);function La(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function Pa(t,e,n){var r=new Map;Oo(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,la(s,a,n[i]))}return r}function Ma(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,fa(a,u,e))}return r}var Fa,Va,Ua=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return o(e,t),e}(Aa),qa=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return o(e,t),e}(Aa),ja=function(t){this.count=t};function Ba(t){switch(t){case To.OK:return xo();case To.CANCELLED:case To.UNKNOWN:case To.DEADLINE_EXCEEDED:case To.RESOURCE_EXHAUSTED:case To.INTERNAL:case To.UNAVAILABLE:case To.UNAUTHENTICATED:return!1;case To.INVALID_ARGUMENT:case To.NOT_FOUND:case To.ALREADY_EXISTS:case To.PERMISSION_DENIED:case To.FAILED_PRECONDITION:case To.ABORTED:case To.OUT_OF_RANGE:case To.UNIMPLEMENTED:case To.DATA_LOSS:return!0;default:return xo()}}function Ka(t){if(void 0===t)return Do("GRPC error has no .code"),To.UNKNOWN;switch(t){case Fa.OK:return To.OK;case Fa.CANCELLED:return To.CANCELLED;case Fa.UNKNOWN:return To.UNKNOWN;case Fa.DEADLINE_EXCEEDED:return To.DEADLINE_EXCEEDED;case Fa.RESOURCE_EXHAUSTED:return To.RESOURCE_EXHAUSTED;case Fa.INTERNAL:return To.INTERNAL;case Fa.UNAVAILABLE:return To.UNAVAILABLE;case Fa.UNAUTHENTICATED:return To.UNAUTHENTICATED;case Fa.INVALID_ARGUMENT:return To.INVALID_ARGUMENT;case Fa.NOT_FOUND:return To.NOT_FOUND;case Fa.ALREADY_EXISTS:return To.ALREADY_EXISTS;case Fa.PERMISSION_DENIED:return To.PERMISSION_DENIED;case Fa.FAILED_PRECONDITION:return To.FAILED_PRECONDITION;case Fa.ABORTED:return To.ABORTED;case Fa.OUT_OF_RANGE:return To.OUT_OF_RANGE;case Fa.UNIMPLEMENTED:return To.UNIMPLEMENTED;case Fa.DATA_LOSS:return To.DATA_LOSS;default:return xo()}}(Va=Fa||(Fa={}))[Va.OK=0]="OK",Va[Va.CANCELLED=1]="CANCELLED",Va[Va.UNKNOWN=2]="UNKNOWN",Va[Va.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Va[Va.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Va[Va.NOT_FOUND=5]="NOT_FOUND",Va[Va.ALREADY_EXISTS=6]="ALREADY_EXISTS",Va[Va.PERMISSION_DENIED=7]="PERMISSION_DENIED",Va[Va.UNAUTHENTICATED=16]="UNAUTHENTICATED",Va[Va.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Va[Va.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Va[Va.ABORTED=10]="ABORTED",Va[Va.OUT_OF_RANGE=11]="OUT_OF_RANGE",Va[Va.UNIMPLEMENTED=12]="UNIMPLEMENTED",Va[Va.INTERNAL=13]="INTERNAL",Va[Va.UNAVAILABLE=14]="UNAVAILABLE",Va[Va.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var za=function(){function t(t,e){this.comparator=t,this.root=e||Ha.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ha.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ha.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Ga(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Ga(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Ga(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Ga(this.root,t,this.comparator,!0)},t}(),Ga=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Ha=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw xo();if(this.right.isRed())throw xo();var t=this.left.check();if(t!==this.right.check())throw xo();return t+(this.isRed()?0:1)},t}();Ha.EMPTY=null,Ha.RED=!0,Ha.BLACK=!1,Ha.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw xo()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw xo()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw xo()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw xo()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw xo()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Ha(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Qa=function(){function t(t){this.comparator=t,this.data=new za(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Wa(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Wa(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Wa=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Ya=new za(ss.comparator);function Xa(){return Ya}var $a=new za(ss.comparator);function Ja(){return $a}var Za=new za(ss.comparator);function tu(){return Za}var eu=new Qa(ss.comparator);function nu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=eu,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var ru=new Qa(Mo);function iu(){return ru}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ou=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,su.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(qo.min(),r,iu(),Xa(),nu())},t}(),su=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Yo.EMPTY_BYTE_STRING,n,nu(),nu(),nu())},t}(),au=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},uu=function(t,e){this.targetId=t,this.V=e},cu=function(t,e,n,r){void 0===n&&(n=Yo.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},hu=function(){function t(){this.S=0,this.D=pu(),this.C=Yo.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},t.prototype.M=function(){var t=nu(),e=nu(),n=nu();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:xo()}})),new su(this.C,this.N,t,e,n)},t.prototype.L=function(){this.k=!1,this.D=pu()},t.prototype.B=function(t,e){this.k=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.k=!0,this.N=!0},t}(),fu=function(){function t(t){this.W=t,this.G=new Map,this.H=Xa(),this.J=lu(),this.Y=new Qa(Mo)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.F||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.F||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:xo()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Ds(i))if(0===n){var o=new ss(i.path);this.tt(e,o,Ts.newNoDocument(o,qo.min()))}else Oo(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&Ds(o.target)){var s=new ss(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,Ts.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=nu();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new ou(t,n,this.Y,this.H,r);return this.H=Xa(),this.J=lu(),this.Y=new Qa(Mo),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new hu,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Qa(Mo),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||No("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.F?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new hu),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function lu(){return new za(ss.comparator)}function pu(){return new za(ss.comparator)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var du={asc:"ASCENDING",desc:"DESCENDING"},yu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vu=function(t,e){this.databaseId=t,this.I=e};function gu(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function mu(t,e){return t.I?e.toBase64():e.toUint8Array()}function bu(t,e){return gu(t,e.toTimestamp())}function wu(t){return Oo(!!t),qo.fromTimestamp(function(t){var e=$o(t);return new Uo(e.seconds,e.nanos)}(t))}function Eu(t,e){return function(t){return new Go(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Iu(t){var e=Go.fromString(t);return Oo(Hu(e)),e}function Tu(t,e){return Eu(t.databaseId,e.path)}function _u(t,e){var n=Iu(e);if(n.get(1)!==t.databaseId.projectId)throw new _o(To.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new _o(To.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ss(Du(n))}function Su(t,e){return Eu(t.databaseId,e)}function Au(t){var e=Iu(t);return 4===e.length?Go.emptyPath():Du(e)}function Nu(t){return new Go(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Du(t){return Oo(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Ru(t,e,n){return{name:Tu(t,e),fields:n.value.mapValue.fields}}function Cu(t,e,n){var r=_u(t,e.name),i=wu(e.updateTime),o=new Es({mapValue:{fields:e.fields}}),s=Ts.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function xu(t,e){var n;if(e instanceof Oa)n={update:Ru(t,e.key,e.value)};else if(e instanceof Ua)n={delete:Tu(t,e.key)};else if(e instanceof ka)n={update:Ru(t,e.key,e.data),updateMask:Gu(e.fieldMask)};else{if(!(e instanceof qa))return xo();n={verify:Tu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof da)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ya)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ga)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ba)return{fieldPath:e.field.canonicalString(),increment:n.A};throw xo()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:bu(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:xo()}(t,e.precondition)),n}function Ou(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?_a.updateTime(wu(t.updateTime)):void 0!==t.exists?_a.exists(t.exists):_a.none()}(e.currentDocument):_a.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)Oo("REQUEST_TIME"===e.setToServerValue),n=new da;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new ya(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new ga(i)}else"increment"in e?n=new ba(t,e.increment):xo();var o=Qo.fromServerFormat(e.fieldPath);return new Ia(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=_u(t,e.update.name),o=new Es({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){var e=t.fieldPaths||[];return new Wo(e.map((function(t){return Qo.fromServerFormat(t)})))}(e.updateMask);return new ka(i,o,s,n,r)}return new Oa(i,o,n,r)}if(e.delete){var a=_u(t,e.delete);return new Ua(a,n)}if(e.verify){var u=_u(t,e.verify);return new qa(u,n)}return xo()}function ku(t,e){return{documents:[Su(t,e.path)]}}function Lu(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Su(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Su(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(ms(t.value))return{unaryFilter:{field:ju(t.field),op:"IS_NAN"}};if(gs(t.value))return{unaryFilter:{field:ju(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(ms(t.value))return{unaryFilter:{field:ju(t.field),op:"IS_NOT_NAN"}};if(gs(t.value))return{unaryFilter:{field:ju(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ju(t.field),op:qu(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:ju(t.field),direction:Uu(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||rs(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Fu(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Fu(e.endAt)),n}function Pu(t){var e=Au(t.parent),n=t.structuredQuery,i=n.from?n.from.length:0,o=null;if(i>0){Oo(1===i);var s=n.from[0];s.allDescendants?o=s.collectionId:e=e.child(s.collectionId)}var a=[];n.where&&(a=Mu(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(t){return function(t){return new qs(Bu(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var c=null;n.limit&&(c=function(t){var e;return rs(e="object"==(0,r.Z)(t)?t.value:t)?null:e}(n.limit));var h=null;n.startAt&&(h=Vu(n.startAt));var f=null;return n.endAt&&(f=Vu(n.endAt)),Gs(e,o,u,a,c,"F",h,f)}function Mu(t){return t?void 0!==t.unaryFilter?[zu(t)]:void 0!==t.fieldFilter?[Ku(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Mu(t)})).reduce((function(t,e){return t.concat(e)})):xo():[]}function Fu(t){return{before:t.before,values:t.position}}function Vu(t){var e=!!t.before,n=t.values||[];return new Vs(n,e)}function Uu(t){return du[t]}function qu(t){return yu[t]}function ju(t){return{fieldPath:t.canonicalString()}}function Bu(t){return Qo.fromServerFormat(t.fieldPath)}function Ku(t){return Rs.create(Bu(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return xo()}}(t.fieldFilter.op),t.fieldFilter.value)}function zu(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Bu(t.unaryFilter.field);return Rs.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Bu(t.unaryFilter.field);return Rs.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Bu(t.unaryFilter.field);return Rs.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Bu(t.unaryFilter.field);return Rs.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return xo()}}function Gu(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function Hu(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Yu(e)),e=Wu(t.get(n),e);return Yu(e)}function Wu(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Yu(t){return t+""}function Xu(t){var e=t.length;if(Oo(e>=2),2===e)return Oo(""===t.charAt(0)&&""===t.charAt(1)),Go.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&xo(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:xo()}o=s+2}return new Go(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $u=function(t,e){this.seconds=t,this.nanoseconds=e},Ju=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Ju.store="owner",Ju.key="owner";var Zu=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Zu.store="mutationQueues",Zu.keyPath="userId";var tc=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};tc.store="mutations",tc.keyPath="batchId",tc.userMutationsIndex="userMutationsIndex",tc.userMutationsKeyPath=["userId","batchId"];var ec=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Qu(e)]},t.key=function(t,e,n){return[t,Qu(e),n]},t}();ec.store="documentMutations",ec.PLACEHOLDER=new ec;var nc=function(t,e){this.path=t,this.readTime=e},rc=function(t,e){this.path=t,this.version=e},ic=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};ic.store="remoteDocuments",ic.readTimeIndex="readTimeIndex",ic.readTimeIndexPath="readTime",ic.collectionReadTimeIndex="collectionReadTimeIndex",ic.collectionReadTimeIndexPath=["parentPath","readTime"];var oc=function(t){this.byteSize=t};oc.store="remoteDocumentGlobal",oc.key="remoteDocumentGlobalKey";var sc=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};sc.store="targets",sc.keyPath="targetId",sc.queryTargetsIndexName="queryTargetsIndex",sc.queryTargetsKeyPath=["canonicalId","targetId"];var ac=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};ac.store="targetDocuments",ac.keyPath=["targetId","path"],ac.documentTargetsIndex="documentTargetsIndex",ac.documentTargetsKeyPath=["path","targetId"];var uc=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};uc.key="targetGlobalKey",uc.store="targetGlobal";var cc=function(t,e){this.collectionId=t,this.parent=e};cc.store="collectionParents",cc.keyPath=["collectionId","parent"];var hc=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};hc.store="clientMetadata",hc.keyPath="clientId";var fc=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};fc.store="bundles",fc.keyPath="bundleId";var lc=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};lc.store="namedQueries",lc.keyPath="name";var pc=f(f([],f(f([],f(f([],f(f([],[Zu.store,tc.store,ec.store,ic.store,sc.store,Ju.store,uc.store,ac.store]),[hc.store])),[oc.store])),[cc.store])),[fc.store,lc.store]),dc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",yc=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),vc=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},gc=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&xo(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),mc=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new vc,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Ec(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Ac(e.target.error);n.ft.reject(new Ec(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Ec(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(No("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Tc(e)},t}(),bc=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(I())&&Do("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return No("SimpleDb","Removing database:",t),_c(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=I(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t={NODE_ENV:"production",BASE_URL:"/"})||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return a(this,void 0,void 0,(function(){var e,n=this;return u(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(No("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Ec(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new _o(To.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new Ec(t,n))},i.onupgradeneeded=function(t){No("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){No("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,i){return a(this,void 0,void 0,(function(){var o,s,a,c,h;return u(this,(function(f){switch(f.label){case 0:o="readonly"===e,s=0,a=function(){var e,r,a,h,f;return u(this,(function(u){switch(u.label){case 0:++s,u.label=1;case 1:return u.trys.push([1,4,,5]),[4,c.At(t)];case 2:return c.db=u.sent(),e=mc.open(c.db,t,o?"readonly":"readwrite",n),r=i(e).catch((function(t){return e.abort(t),gc.reject(t)})).toPromise(),a={},r.catch((function(){})),[4,e.dt];case 3:return[2,(a.value=(u.sent(),r),a)];case 4:return h=u.sent(),f="FirebaseError"!==h.name&&s<3,No("SimpleDb","Transaction failed with error:",h.message,"Retrying:",f),c.close(),f?[3,5]:[2,{value:Promise.reject(h)}];case 5:return[2]}}))},c=this,f.label=1;case 1:return[5,a()];case 2:if("object"==(0,r.Z)(h=f.sent()))return[2,h.value];f.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),wc=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return _c(this.Pt.delete())},t}(),Ec=function(t){function e(e,n){var r=this;return(r=t.call(this,To.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return o(e,t),e}(_o);function Ic(t){return"IndexedDbTransactionError"===t.name}var Tc=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(No("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(No("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),_c(n)},t.prototype.add=function(t){return No("SimpleDb","ADD",this.store.name,t,t),_c(this.store.add(t))},t.prototype.get=function(t){var e=this;return _c(this.store.get(t)).next((function(n){return void 0===n&&(n=null),No("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return No("SimpleDb","DELETE",this.store.name,t),_c(this.store.delete(t))},t.prototype.count=function(){return No("SimpleDb","COUNT",this.store.name),_c(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.kt=function(t,e){No("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Ft=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new gc((function(n,r){e.onerror=function(t){var e=Ac(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new gc((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new wc(i),s=e(i.primaryKey,i.value,o);if(s instanceof gc){var a=s.catch((function(t){return o.done(),gc.reject(t)}));n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return gc.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Ft?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function _c(t){return new gc((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Ac(t.target.error);n(e)}}))}var Sc=!1;function Ac(t){var e=bc._t(I());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new _o("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Sc||(Sc=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return o(e,t),e}(yc);function Dc(t,e){var n=ko(t);return bc.It(n.Mt,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rc=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Na(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Da(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Da(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(qo.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),nu())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Fo(this.mutations,t.mutations,(function(t,e){return Ca(t,e)}))&&Fo(this.baseMutations,t.baseMutations,(function(t,e){return Ca(t,e)}))},t}(),Cc=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Oo(e.mutations.length===r.length);for(var i=tu(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),xc=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=qo.min()),void 0===o&&(o=qo.min()),void 0===s&&(s=Yo.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Oc=function(t){this.Lt=t};function kc(t,e){if(e.document)return Cu(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=ss.fromSegments(e.noDocument.path),r=Vc(e.noDocument.readTime),i=Ts.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=ss.fromSegments(e.unknownDocument.path);return r=Vc(e.unknownDocument.version),Ts.newUnknownDocument(o,r)}return xo()}function Lc(t,e,n){var r=Pc(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Tu(t,e.key),fields:e.data.value.mapValue.fields,updateTime:gu(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new ic(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=Fc(e.version);return s=e.hasCommittedMutations,new ic(null,new nc(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),h=Fc(e.version);return new ic(new rc(c,h),null,null,!0,r,i)}return xo()}function Pc(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Mc(t){var e=new Uo(t[0],t[1]);return qo.fromTimestamp(e)}function Fc(t){var e=t.toTimestamp();return new $u(e.seconds,e.nanoseconds)}function Vc(t){var e=new Uo(t.seconds,t.nanoseconds);return qo.fromTimestamp(e)}function Uc(t,e){for(var n=(e.baseMutations||[]).map((function(e){return Ou(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map((function(e){return Ou(t.Lt,e)})),a=Uo.fromMillis(e.localWriteTimeMs);return new Rc(e.batchId,a,n,s)}function qc(t){var e,n,r=Vc(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Vc(t.lastLimboFreeSnapshotVersion):qo.min();return void 0!==t.query.documents?(Oo(1===(n=t.query).documents.length),e=Zs(Hs(Au(n.documents[0])))):e=function(t){return Zs(Pu(t))}(t.query),new xc(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Yo.fromBase64String(t.resumeToken))}function jc(t,e){var n,r=Fc(e.snapshotVersion),i=Fc(e.lastLimboFreeSnapshotVersion);n=Ds(e.target)?ku(t.Lt,e.target):Lu(t.Lt,e.target);var o=e.resumeToken.toBase64();return new sc(e.targetId,As(e.target),r,o,e.sequenceNumber,i,n)}function Bc(t){var e=Pu({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?ta(e,e.limit,"L"):e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kc=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return zc(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Vc(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return zc(t).put({bundleId:(n=e).id,createTime:Fc(wu(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Gc(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Bc(e.bundledQuery),readTime:Vc(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return Gc(t).put(function(t){return{name:t.name,readTime:Fc(wu(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function zc(t){return Dc(t,fc.store)}function Gc(t){return Dc(t,lc.store)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hc=function(){function t(){this.Bt=new Qc}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),gc.resolve()},t.prototype.getCollectionParents=function(t,e){return gc.resolve(this.Bt.getEntries(e))},t}(),Qc=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Qa(Go.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Qa(Go.comparator)).toArray()},t}(),Wc=function(){function t(){this.qt=new Qc}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:Qu(i)};return Yc(t).put(o)}return gc.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Vo(e),""],!1,!0);return Yc(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Xu(o.parent))}return n}))},t}();function Yc(t){return Dc(t,cc.store)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$c=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(t,e,n){var r=t.store(tc.store),i=t.store(ec.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){Oo(1===a)})));for(var c=[],h=0,f=n.mutations;h<f.length;h++){var l=f[h],p=ec.key(e,l.key.path,n.batchId);o.push(i.delete(p)),c.push(l.key)}return gc.waitFor(o).next((function(){return c}))}function Zc(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw xo();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$c.DEFAULT_COLLECTION_PERCENTILE=10,$c.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$c.DEFAULT=new $c(41943040,$c.DEFAULT_COLLECTION_PERCENTILE,$c.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$c.DISABLED=new $c(-1,0,0);var th=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return Oo(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return nh(t).$t({index:tc.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=rh(t),s=nh(t);return s.add({}).next((function(a){Oo("number"==typeof a);for(var u=new Rc(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return xu(t.Lt,e)})),i=n.mutations.map((function(e){return xu(t.Lt,e)}));return new tc(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),h=[],f=new Qa((function(t,e){return Mo(t.canonicalString(),e.canonicalString())})),l=0,p=r;l<p.length;l++){var d=p[l],y=ec.key(i.userId,d.key.path,a);f=f.add(d.key.path.popLast()),h.push(s.put(c)),h.push(o.put(y,ec.PLACEHOLDER))}return f.forEach((function(e){h.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[a]=u.keys()})),gc.waitFor(h).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return nh(t).get(e).next((function(t){return t?(Oo(t.userId===n.userId),Uc(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?gc.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return nh(t).$t({index:tc.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Oo(e.batchId>=r),o=Uc(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return nh(t).$t({index:tc.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return nh(t).Nt(tc.userMutationsIndex,n).next((function(t){return t.map((function(t){return Uc(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=ec.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return rh(t).$t({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],h=Xu(u);if(a===n.userId&&e.path.isEqual(h))return nh(t).get(c).next((function(t){if(!t)throw xo();Oo(t.userId===n.userId),o.push(Uc(n.R,t))}));s.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Qa(Mo),i=[];return e.forEach((function(e){var o=ec.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=rh(t).$t({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=Xu(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),gc.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=ec.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Qa(Mo);return rh(t).$t({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],h=Xu(u);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.Wt(t,a)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(nh(t).get(e).next((function(t){if(null===t)throw xo();Oo(t.userId===n.userId),r.push(Uc(n.R,t))})))})),gc.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return Jc(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),gc.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return gc.resolve();var r=IDBKeyRange.lowerBound(ec.prefixForUser(e.userId)),i=[];return rh(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Xu(t[1]);i.push(o)}else r.done()})).next((function(){Oo(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return eh(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return ih(t).get(this.userId).next((function(t){return t||new Zu(e.userId,-1,"")}))},t}();function eh(t,e,n){var r=ec.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return rh(t).$t({range:o,Ft:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function nh(t){return Dc(t,tc.store)}function rh(t){return Dc(t,ec.store)}function ih(t){return Dc(t,Zu.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oh=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),sh=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new oh(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return qo.fromTimestamp(new Uo(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return ah(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return Oo(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return ah(t).$t((function(s,a){var u=qc(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return gc.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return ah(t).$t((function(t,n){var r=qc(n);e(r)}))},t.prototype.Xt=function(t){return uh(t).get(uc.key).next((function(t){return Oo(null!==t),t}))},t.prototype.Zt=function(t,e){return uh(t).put(uc.key,e)},t.prototype.te=function(t,e){return ah(t).put(jc(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=As(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return ah(t).$t({range:r,index:sc.queryTargetsIndexName},(function(t,n,r){var o=qc(n);Ns(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=ch(t);return e.forEach((function(e){var s=Qu(e.path);i.push(o.put(new ac(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))})),gc.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=ch(t);return gc.forEach(e,(function(e){var o=Qu(e.path);return gc.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=ch(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=ch(t),i=nu();return r.$t({range:n,Ft:!0},(function(t,e,n){var r=Xu(t[1]),o=new ss(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=Qu(e.path),r=IDBKeyRange.bound([n],[Vo(n)],!1,!0),i=0;return ch(t).$t({index:ac.documentTargetsIndex,Ft:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return ah(t).get(e).next((function(t){return t?qc(t):null}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ah(t){return Dc(t,sc.store)}function uh(t){return Dc(t,uc.store)}function ch(t){return Dc(t,ac.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(t){return a(this,void 0,void 0,(function(){return u(this,(function(e){if(t.code!==To.FAILED_PRECONDITION||t.message!==dc)throw t;return No("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fh(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=Mo(n,i);return 0===s?Mo(r,o):s}var lh=function(){function t(t){this.ne=t,this.buffer=new Qa(fh),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();fh(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),ph=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;No("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return a(e,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Ic(e=n.sent())?(No("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,hh(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),dh=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return gc.resolve(Io.o);var r=new lh(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(No("LruGarbageCollector","Garbage collection skipped; disabled"),gc.resolve(Xc)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(No("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Xc):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(No("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),Ao()<=$.DEBUG&&No("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-h)+"ms"),gc.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),yh=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new dh(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return vh(t,n)},t.prototype.removeReference=function(t,e,n){return vh(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return vh(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return ih(t).Ot((function(r){return eh(t,r,e).next((function(t){return t&&(n=!0),gc.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(s,a){if(a<=e){var u=n._e(t,s).next((function(e){if(!e)return o++,r.getEntry(t,s).next((function(){return r.removeEntry(s),ch(t).delete([0,Qu(s.path)])}))}));i.push(u)}})).next((function(){return gc.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return vh(t,e)},t.prototype.we=function(t,e){var n,r=ch(t),i=Io.o;return r.$t({index:ac.documentTargetsIndex},(function(t,r){var o=t[0];t[1];var s=r.path,a=r.sequenceNumber;0===o?(i!==Io.o&&e(new ss(Xu(n)),i),i=a,n=s):i=Io.o})).next((function(){i!==Io.o&&e(new ss(Xu(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function vh(t,e){return ch(t).put(function(t,e){return new ac(0,Qu(t.path),e)}(e,t.currentSequenceNumber))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gh=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.equalsFn(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Bo(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype.isEmpty=function(){return Ko(this.inner)},t}(),mh=function(){function t(){this.changes=new gh((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:qo.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Ts.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?gc.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),bh=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Ih(t).put(Th(e),n)},t.prototype.removeEntry=function(t,e){var n=Ih(t),r=Th(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return Ih(t).get(Th(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return Ih(t).get(Th(e)).next((function(t){return{document:n.ye(e,t),size:Zc(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=Xa();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=Xa(),i=new za(ss.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Zc(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return gc.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Ih(t).$t({range:r},(function(t,e,r){for(var s=ss.fromSegments(t);o&&ss.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Xa(),o=e.path.length+1,s={};if(n.isEqual(qo.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=Pc(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=ic.collectionReadTimeIndex}return Ih(t).$t(s,(function(t,n,s){if(t.length===o){var a=kc(r.R,n);e.path.isPrefixOf(a.key.path)?ia(e,a)&&(i=i.insert(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new wh(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Eh(t).get(oc.key).next((function(t){return Oo(!!t),t}))},t.prototype.me=function(t,e){return Eh(t).put(oc.key,e)},t.prototype.ye=function(t,e){if(e){var n=kc(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(qo.min()))return n}return Ts.newInvalidDocument(t)},t}(),wh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new gh((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return o(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Qa((function(t,e){return Mo(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=Lc(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Zc(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var h=Lc(e.Ie.R,Ts.newNoDocument(o,qo.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,h))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),gc.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(mh);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(t){return Dc(t,oc.store)}function Ih(t){return Dc(t,ic.store)}function Th(t){return t.path.toArray()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _h=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Oo(n<r&&n>=0&&r<=11);var o=new mc("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Ju.store)}(t),function(t){t.createObjectStore(Zu.store,{keyPath:Zu.keyPath}),t.createObjectStore(tc.store,{keyPath:tc.keyPath,autoIncrement:!0}).createIndex(tc.userMutationsIndex,tc.userMutationsKeyPath,{unique:!0}),t.createObjectStore(ec.store)}(t),Sh(t),function(t){t.createObjectStore(ic.store)}(t));var s=gc.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(ac.store),t.deleteObjectStore(sc.store),t.deleteObjectStore(uc.store)}(t),Sh(t)),s=s.next((function(){return function(t){var e=t.store(uc.store),n=new uc(0,0,qo.min().toTimestamp(),0);return e.put(uc.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(tc.store).Nt().next((function(n){t.deleteObjectStore(tc.store),t.createObjectStore(tc.store,{keyPath:tc.keyPath,autoIncrement:!0}).createIndex(tc.userMutationsIndex,tc.userMutationsKeyPath,{unique:!0});var r=e.store(tc.store),i=n.map((function(t){return r.put(t)}));return gc.waitFor(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(hc.store,{keyPath:hc.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Re(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(oc.store)}(t),i.be(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ve(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(ic.store);e.createIndex(ic.readTimeIndex,ic.readTimeIndexPath,{unique:!1}),e.createIndex(ic.collectionReadTimeIndex,ic.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(fc.store,{keyPath:fc.keyPath})}(t),function(t){t.createObjectStore(lc.store,{keyPath:lc.keyPath})}(t)}))),s},t.prototype.be=function(t){var e=0;return t.store(ic.store).$t((function(t,n){e+=Zc(n)})).next((function(){var n=new oc(e);return t.store(oc.store).put(oc.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(Zu.store),r=t.store(tc.store);return n.Nt().next((function(n){return gc.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(tc.userMutationsIndex,i).next((function(r){return gc.forEach(r,(function(r){Oo(r.userId===n.userId);var i=Uc(e.R,r);return Jc(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(ac.store),n=t.store(ic.store);return t.store(uc.store).get(uc.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new Go(n),s=function(t){return[0,Qu(t)]}(o);r.push(e.get(s).next((function(n){return n?gc.resolve():function(n){return e.put(new ac(0,Qu(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return gc.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(cc.store,{keyPath:cc.keyPath});var n=e.store(cc.store),r=new Qc,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Qu(i)})}};return e.store(ic.store).$t({Ft:!0},(function(t,e){var n=new Go(t);return i(n.popLast())})).next((function(){return e.store(ec.store).$t({Ft:!0},(function(t,e){t[0];var n=t[1];t[2];var r=Xu(n);return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(sc.store);return n.$t((function(t,r){var i=qc(r),o=jc(e.R,i);return n.put(o)}))},t}();function Sh(t){t.createObjectStore(ac.store,{keyPath:ac.keyPath}).createIndex(ac.documentTargetsIndex,ac.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(sc.store,{keyPath:sc.keyPath}).createIndex(sc.queryTargetsIndexName,sc.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(uc.store)}var Ah="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Nh=function(){function t(e,n,r,i,o,s,a,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=h,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new _o(To.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new yh(this,i),this.Le=n+"main",this.R=new Oc(u),this.Be=new bc(this.Le,11,new _h(this.R)),this.qe=new sh(this.referenceDelegate,this.R),this.Ut=new Wc,this.Ue=function(t,e){return new bh(t,e)}(this.R,this.Ut),this.Ke=new Kc,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===h&&Do("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new _o(To.FAILED_PRECONDITION,Ah);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new Io(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return a(e,void 0,void 0,(function(){return u(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return a(e,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return a(e,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Rh(e).put(new hc(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(Ic(e))return No("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return No("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return Dh(t).get(Ju.key).next((function(t){return gc.resolve(e.tn(t))}))},t.prototype.en=function(t){return Rh(t).delete(this.clientId)},t.prototype.nn=function(){return a(this,void 0,void 0,(function(){var t,e,n,r,i=this;return u(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Dc(t,hc.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return gc.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)r=n[e],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?gc.resolve(!0):Dh(t).get(Ju.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new _o(To.FAILED_PRECONDITION,Ah);return!1}}return!(!e.networkEnabled||!e.inForeground)||Rh(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&No("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return a(this,void 0,void 0,(function(){var t=this;return u(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Ju.store,hc.store],(function(e){var n=new Nc(e,Io.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Rh(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return th.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;No("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,pc,(function(o){return i=new Nc(o,r.Ne?r.Ne.next():Io.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw Do("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new _o(To.FAILED_PRECONDITION,dc);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return Dh(t).get(Ju.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new _o(To.FAILED_PRECONDITION,Ah)}))},t.prototype.Ze=function(t){var e=new Ju(this.clientId,this.allowTabSynchronization,Date.now());return Dh(t).put(Ju.key,e)},t.yt=function(){return bc.yt()},t.prototype.Xe=function(t){var e=this,n=Dh(t);return n.get(Ju.key).next((function(t){return e.tn(t)?(No("IndexedDbPersistence","Releasing primary lease."),n.delete(Ju.key)):gc.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Do("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ke=function(){e.un(),x()&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.ke))},t.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return No("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Do("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Do("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Dh(t){return Dc(t,Ju.store)}function Rh(t){return Dc(t,hc.store)}function Ch(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var xh=function(t,e){this.progress=t,this.wn=e},Oh=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return ss.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):$s(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new ss(e)).next((function(t){var e=Ja();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Ja();return this.Ut.getCollectionParents(t,i).next((function(s){return gc.forEach(s,(function(s){var a=function(t,e){return new zs(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,h=r.get(c);null==h&&(h=Ts.newInvalidDocument(c),r=r.insert(c,h)),Da(u,h,o.localWriteTime),h.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){ia(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=nu(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof ka&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),kh=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=nu(),i=nu(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Lh=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(qo.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var s=i.Cn(e,o);return(Qs(e)||Ws(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(Ao()<=$.DEBUG&&No("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),ra(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return s.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new Qa(oa(t));return e.forEach((function(e,r){ia(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Ao()<=$.DEBUG&&No("QueryEngine","Using full collection scan to execute query:",ra(e)),this.Sn.getDocumentsMatchingQuery(t,e,qo.min())},t}(),Ph=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.kn=new za(Mo),this.Fn=new gh((function(t){return As(t)}),Ns),this.$n=qo.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Oh(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.kn)}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(t,e,n,r){return new Ph(t,e,n,r)}function Fh(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o;return u(this,(function(s){switch(s.label){case 0:return n=ko(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new Oh(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],s=nu(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var h=0,f=c.mutations;h<f.length;h++){var l=f[h];s=s.add(l.key)}}for(var p=0,d=e;p<d.length;p++){var y=d[p];r.push(y.batchId);for(var v=0,g=y.mutations;v<g.length;v++){var m=g[v];s=s.add(m.key)}}return i.pn(t,s).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function Vh(t,e){var n=ko(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=gc.resolve();return o.forEach((function(t){s=s.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);Oo(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),s.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function Uh(t){var e=ko(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function qh(t,e){var n=ko(t),r=e.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var s=[];e.targetChanges.forEach((function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Oo(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}}));var a=Xa();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),s.push(jh(t,o,e.documentUpdates,r,void 0).next((function(t){a=t}))),!r.isEqual(qo.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));s.push(u)}return gc.waitFor(s).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,a)})).next((function(){return a}))})).then((function(t){return n.kn=i,t}))}function jh(t,e,n,r,i){var o=nu();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=Xa();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(qo.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):No("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}function Bh(t,e){var n=ko(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function Kh(t,e){var n=ko(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,gc.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new xc(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.kn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.kn=n.kn.insert(t.targetId,t),n.Fn.set(e,t.targetId)),t}))}function zh(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o,s;return u(this,(function(a){switch(a.label){case 0:r=ko(t),i=r.kn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Ic(s=a.sent()))throw s;return No("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.kn=r.kn.remove(e),r.Fn.delete(i.target),[2]}}))}))}function Gh(t,e,n){var r=ko(t),i=qo.min(),o=nu();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=ko(t),i=r.Fn.get(n);return void 0!==i?gc.resolve(r.kn.get(i)):r.qe.getTargetData(e,n)}(r,t,Zs(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:qo.min(),n?o:nu())})).next((function(t){return{documents:t,Bn:o}}))}))}function Hh(t,e){var n=ko(t),r=ko(n.qe),i=n.kn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function Qh(t){var e=ko(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=ko(t),i=Xa(),o=Pc(n),s=Ih(e),a=IDBKeyRange.lowerBound(o,!0);return s.$t({index:ic.readTimeIndex,range:a},(function(t,e){var n=kc(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:Mc(o)}}))}(e.On,t,e.$n)})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function Wh(t){return a(this,void 0,void 0,(function(){var e;return u(this,(function(n){return[2,(e=ko(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Ih(t),n=qo.min();return e.$t({index:ic.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Mc(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.$n=t}))]}))}))}function Yh(t,e,n,r){return a(this,void 0,void 0,(function(){var i,o,s,a,c,h,f,l,p,d;return u(this,(function(u){switch(u.label){case 0:for(i=ko(t),o=nu(),s=Xa(),a=tu(),c=0,h=n;c<h.length;c++)f=h[c],l=e.qn(f.metadata.name),f.document&&(o=o.add(l)),s=s.insert(l,e.Un(f)),a=a.insert(l,e.Kn(f.metadata.readTime));return p=i.On.newChangeBuffer({trackRemovals:!0}),[4,Kh(i,function(t){return Zs(Hs(Go.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=u.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return jh(t,p,s,qo.min(),a).next((function(e){return p.apply(t),e})).next((function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next((function(){return i.qe.addMatchingKeys(t,o,d.targetId)})).next((function(){return i.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}function Xh(t,e,n){return void 0===n&&(n=nu()),a(this,void 0,void 0,(function(){var r,i;return u(this,(function(o){switch(o.label){case 0:return[4,Kh(t,Zs(Bc(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=ko(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=wu(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(t,e);var s=r.withResumeToken(Yo.EMPTY_BYTE_STRING,o);return i.kn=i.kn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next((function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.Ke.saveNamedQuery(t,e)}))}))]}}))}))
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var $h=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return gc.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:wu(n.createTime)}),gc.resolve()},t.prototype.getNamedQuery=function(t,e){return gc.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Bc(t.bundledQuery),readTime:wu(t.readTime)}}(e)),gc.resolve()},t}(),Jh=function(){function t(){this.Wn=new Qa(Zh.Gn),this.zn=new Qa(Zh.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Zh(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new Zh(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new ss(new Go([])),r=new Zh(n,t),i=new Zh(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new ss(new Go([])),n=new Zh(e,t),r=new Zh(e,t+1),i=nu();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new Zh(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Zh=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return ss.comparator(t.key,e.key)||Mo(t.ns,e.ns)},t.Hn=function(t,e){return Mo(t.ns,e.ns)||ss.comparator(t.key,e.key)},t}(),tf=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Qa(Zh.Gn)}return t.prototype.checkEmpty=function(t){return gc.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new Rc(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new Zh(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return gc.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return gc.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return gc.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return gc.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return gc.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Zh(e,0),i=new Zh(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),gc.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Qa(Mo);return e.forEach((function(t){var e=new Zh(t,0),i=new Zh(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),gc.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;ss.isDocumentKey(i)||(i=i.child(""));var o=new Zh(new ss(i),0),s=new Qa(Mo);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)}),o),gc.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Oo(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return gc.forEach(e.mutations,(function(i){var o=new Zh(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Zh(e,0),r=this.rs.firstAfterOrEqual(n);return gc.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,gc.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),ef=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new za(ss.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return gc.resolve(n?n.document.clone():Ts.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Xa();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Ts.newInvalidDocument(t))})),gc.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Xa(),i=new ss(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.key,u=s.value,c=u.document,h=u.readTime;if(!e.path.isPrefixOf(a.path))break;h.compareTo(n)<=0||ia(e,c)&&(r=r.insert(c.key,c.clone()))}return gc.resolve(r)},t.prototype.fs=function(t,e){return gc.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new nf(this)},t.prototype.getSize=function(t){return gc.resolve(this.size)},t}(),nf=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return o(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),gc.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(mh),rf=function(){function t(t){this.persistence=t,this.ds=new gh((function(t){return As(t)}),Ns),this.lastRemoteSnapshotVersion=qo.min(),this.highestTargetId=0,this.ws=0,this._s=new Jh,this.targetCount=0,this.ys=oh.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),gc.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return gc.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return gc.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),gc.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),gc.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new oh(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,gc.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),gc.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,gc.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)})),gc.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return gc.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return gc.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),gc.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),gc.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),gc.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return gc.resolve(n)},t.prototype.containsKey=function(t,e){return gc.resolve(this._s.containsKey(e))},t}(),of=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Io(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new rf(this),this.Ut=new Hc,this.Ue=function(t,e){return new ef(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new Oc(e),this.Ke=new $h(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new tf(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;No("MemoryPersistence","Starting transaction:",t);var i=new sf(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return gc.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),sf=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return o(e,t),e}(yc),af=function(){function t(t){this.persistence=t,this.As=new Jh,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw xo()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),gc.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),gc.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),gc.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return gc.forEach(this.vs,(function(r){var i=ss.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return gc.or([function(){return gc.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),uf=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(t,e){return"firestore_clients_"+t+"_"+e}function hf(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function ff(t,e){return"firestore_targets_"+t+"_"+e}uf.UNAUTHENTICATED=new uf(null),uf.GOOGLE_CREDENTIALS=new uf("google-credentials-uid"),uf.FIRST_PARTY=new uf("first-party-uid"),uf.MOCK_USER=new uf("mock-user");var lf=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,i){var o,s=JSON.parse(i),a="object"==(0,r.Z)(s)&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==(0,r.Z)(s.error));return a&&s.error&&(a="string"==typeof s.error.message&&"string"==typeof s.error.code)&&(o=new _o(s.error.code,s.error.message)),a?new t(e,n,s.state,o):(Do("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+i),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),pf=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var i,o=JSON.parse(n),s="object"==(0,r.Z)(o)&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==(0,r.Z)(o.error));return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new _o(o.error.code,o.error.message)),s?new t(e,o.state,i):(Do("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),df=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var i=JSON.parse(n),o="object"==(0,r.Z)(i)&&i.activeTargetIds instanceof Array,s=iu(),a=0;o&&a<i.activeTargetIds.length;++a)o=os(i.activeTargetIds[a]),s=s.add(i.activeTargetIds[a]);return o?new t(e,s):(Do("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),yf=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==(0,r.Z)(n)&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Do("SharedClientState","Failed to parse online state: "+e),null)},t}(),vf=function(){function t(){this.activeTargetIds=iu()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),gf=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new za(Mo),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=cf(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new vf),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return a(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,c,h,f,l=this;return u(this,(function(u){switch(u.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=u.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(cf(this.persistenceKey,r)))&&(o=df.Vs(r,i))&&(this.Fs=this.Fs.insert(o.clientId,o));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),c=0,h=this.$s;c<h.length;c++)f=h[c],this.ks(f);return this.$s=[],this.window.addEventListener("pagehide",(function(){return l.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.Fs.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(ff(this.persistenceKey,t));if(n){var r=pf.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(ff(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return No("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){No("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){No("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.ks=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(No("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void Do("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return a(e,void 0,void 0,(function(){var t,e,r,i,o,s;return u(this,(function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=Io.o;if(null!=t)try{var n=JSON.parse(t);Oo("number"==typeof n),e=n}catch(t){Do("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Io.o&&this.sequenceNumberHandler(s);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new lf(this.currentUser,t,e,n),i=hf(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=hf(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=ff(this.persistenceKey,t),i=new pf(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return df.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return lf.Vs(new uf(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return pf.Vs(r,e)},t.prototype.js=function(t){return yf.Vs(t)},t.prototype.ii=function(t){return a(this,void 0,void 0,(function(){return u(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(No("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.Fs.insert(t,e):this.Fs.remove(t),i=this.Gs(this.Fs),o=this.Gs(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.syncEngine.hi(s,a).then((function(){n.Fs=r}))},t.prototype.Ws=function(t){this.Fs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=iu();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),mf=function(){function t(){this.li=new vf,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new vf,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),bf=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),wf=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){No("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){No("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Ef={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},If=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Tf=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return o(e,t),e.prototype.Fi=function(t,e,n,r){return new Promise((function(i,o){var s=new Eo;s.listenOnce(vo.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case yo.NO_ERROR:var e=s.getResponseJson();No("Connection","XHR received:",JSON.stringify(e)),i(e);break;case yo.TIMEOUT:No("Connection",'RPC "'+t+'" timed out'),o(new _o(To.DEADLINE_EXCEEDED,"Request time out"));break;case yo.HTTP_ERROR:var n=s.getStatus();if(No("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(To).indexOf(e)>=0?e:To.UNKNOWN}(r.status);o(new _o(a,r.message))}else o(new _o(To.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new _o(To.UNAVAILABLE,"Connection failed."));break;default:xo()}}finally{No("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=lo(),i=po(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new bo({})),this.ki(o.initMessageHeaders,e),T()||N()||D()||R()||C()||A()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");No("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,h=new If({Ei:function(t){c?No("Connection","Not sending because WebChannel is closed:",t):(u||(No("Connection","Opening WebChannel transport."),a.open(),u=!0),No("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),f=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(a,wo.EventType.OPEN,(function(){c||No("Connection","WebChannel transport opened.")})),f(a,wo.EventType.CLOSE,(function(){c||(c=!0,No("Connection","WebChannel transport closed"),h.Vi())})),f(a,wo.EventType.ERROR,(function(t){c||(c=!0,Ro("Connection","WebChannel transport errored:",t),h.Vi(new _o(To.UNAVAILABLE,"The operation could not be completed")))})),f(a,wo.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];Oo(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){No("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=Fa[t];if(void 0!==e)return Ka(e)}(o),u=i.message;void 0===s&&(s=To.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),c=!0,h.Vi(new _o(s,u)),a.close()}else No("Connection","WebChannel received:",n),h.Si(n)}})),f(i,go.STAT_EVENT,(function(t){t.stat===mo.PROXY?No("Connection","Detected buffering proxy"):t.stat===mo.NOPROXY&&No("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Pi()}),0),h},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);No("RestConnection","Sending: ",i,n);var o={};return this.ki(o,r),this.Fi(t,i,o,n).then((function(t){return No("RestConnection","Received: ",t),t}),(function(e){throw Ro("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.ki=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.10.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=Ef[t];return this.Di+"/v1/"+e+":"+n},t}());
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(){return"undefined"!=typeof window?window:null}function Sf(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(t){return new vu(t,!0)}var Nf=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&No("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Df=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Nf(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return a(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return a(this,void 0,void 0,(function(){return u(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return a(this,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===To.RESOURCE_EXHAUSTED?(Do(e.toString()),Do("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===To.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new _o(To.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return a(t,void 0,void 0,(function(){return u(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return No("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(No("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Rf=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return o(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:xo()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Oo(void 0===e||"string"==typeof e),Yo.fromBase64String(e||"")):(Oo(void 0===e||e instanceof Uint8Array),Yo.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?To.UNKNOWN:Ka(t.code);return new _o(e,t.message||"")}(a);n=new cu(r,i,o,s||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=_u(t,r.document.name),o=wu(r.document.updateTime);var a=new Es({mapValue:{fields:r.document.fields}}),u=(s=Ts.newFoundDocument(i,o,a),r.targetIds||[]),c=r.removedTargetIds||[];n=new au(u,c,s.key,s)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=_u(t,r.document),o=r.readTime?wu(r.readTime):qo.min(),a=Ts.newNoDocument(i,o),s=r.removedTargetIds||[],n=new au([],s,a.key,a);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=_u(t,r.document),o=r.removedTargetIds||[],n=new au([],o,i,null);else{if(!("filter"in e))return xo();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new ja(r),o=h.targetId,n=new uu(o,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return qo.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?qo.min():e.readTime?wu(e.readTime):qo.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Nu(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Ds(r)?{documents:ku(t,r)}:{query:Lu(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=mu(t,e.resumeToken):e.snapshotVersion.compareTo(qo.min())>0&&(n.readTime=gu(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return xo()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Nu(this.R),e.removeTarget=t,this.cr(e)},e}(Df),Cf=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return o(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(Oo(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Oo(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?wu(t.updateTime):wu(e);return n.isEqual(qo.min())&&(n=wu(e)),new Ta(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=wu(t.commitTime);return this.listener.Tr(n,e)}return Oo(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Nu(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return xu(e.R,t)}))};this.cr(n)},e}(Df),xf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return o(e,t),e.prototype.br=function(){if(this.Rr)throw new _o(To.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===To.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new _o(To.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===To.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new _o(To.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),Of=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.kr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Do(e),this.Vr=!1):No("OnlineStateTracker",e)},t.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),kf=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return a(o,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return Bf(this)?(No("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return a(this,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return(e=ko(t)).Or.add(4),[4,Pf(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,Lf(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new Of(n,r)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(t){return a(this,void 0,void 0,(function(){var e,n;return u(this,(function(r){switch(r.label){case 0:if(!Bf(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Pf(t){return a(this,void 0,void 0,(function(){var e,n;return u(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Mf(t,e){var n=ko(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),jf(n)?qf(n):rl(n).er()&&Vf(n,e))}function Ff(t,e){var n=ko(t),r=rl(n);n.$r.delete(e),r.er()&&Uf(n,e),0===n.$r.size&&(r.er()?r.ir():Bf(n)&&n.Br.set("Unknown"))}function Vf(t,e){t.qr.U(e.targetId),rl(t).mr(e)}function Uf(t,e){t.qr.U(e),rl(t).yr(e)}function qf(t){t.qr=new fu({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),rl(t).start(),t.Br.Sr()}function jf(t){return Bf(t)&&!rl(t).tr()&&t.$r.size>0}function Bf(t){return 0===ko(t).Or.size}function Kf(t){t.qr=void 0}function zf(t){return a(this,void 0,void 0,(function(){return u(this,(function(e){return t.$r.forEach((function(e,n){Vf(t,e)})),[2]}))}))}function Gf(t,e){return a(this,void 0,void 0,(function(){return u(this,(function(n){return Kf(t),jf(t)?(t.Br.Nr(e),qf(t)):t.Br.set("Unknown"),[2]}))}))}function Hf(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o;return u(this,(function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof cu&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o;return u(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.$r.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.$r.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),No("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Qf(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof au?t.qr.X(e):e instanceof uu?t.qr.rt(e):t.qr.et(e),n.isEqual(qo.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Uh(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(Yo.EMPTY_BYTE_STRING,n.snapshotVersion)),Uf(t,e);var r=new xc(n.target,e,1,n.sequenceNumber);Vf(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return No("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Qf(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function Qf(t,e,n){return a(this,void 0,void 0,(function(){var r=this;return u(this,(function(i){switch(i.label){case 0:if(!Ic(e))throw e;return t.Or.add(1),[4,Pf(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Uh(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return a(r,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return No("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,Lf(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Wf(t,e){return e().catch((function(n){return Qf(t,n,e)}))}function Yf(t){return a(this,void 0,void 0,(function(){var e,n,r,i,o;return u(this,(function(s){switch(s.label){case 0:e=ko(t),n=il(e),r=e.Fr.length>0?e.Fr[e.Fr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Bf(t)&&t.Fr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Bh(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.Fr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.Fr.push(e);var n=il(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Qf(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Xf(e)&&$f(e),[2]}}))}))}function Xf(t){return Bf(t)&&!il(t).tr()&&t.Fr.length>0}function $f(t){il(t).start()}function Jf(t){return a(this,void 0,void 0,(function(){return u(this,(function(e){return il(t).Ar(),[2]}))}))}function Zf(t){return a(this,void 0,void 0,(function(){var e,n,r,i;return u(this,(function(o){for(e=il(t),n=0,r=t.Fr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function tl(t,e,n){return a(this,void 0,void 0,(function(){var r,i;return u(this,(function(o){switch(o.label){case 0:return r=t.Fr.shift(),i=Cc.from(r,e,n),[4,Wf(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,Yf(t)];case 2:return o.sent(),[2]}}))}))}function el(t,e){return a(this,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return e&&il(t).pr?[4,function(t,e){return a(this,void 0,void 0,(function(){var n,r;return u(this,(function(i){switch(i.label){case 0:return Ba(r=e.code)&&r!==To.ABORTED?(n=t.Fr.shift(),il(t).sr(),[4,Wf(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Yf(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Xf(t)&&$f(t),[2]}}))}))}function nl(t,e){return a(this,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return n=ko(t),e?(n.Or.delete(2),[4,Lf(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,Pf(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function rl(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=ko(t);return r.br(),new Rf(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:zf.bind(null,t),Ri:Gf.bind(null,t),_r:Hf.bind(null,t)}),t.Mr.push((function(n){return a(e,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),jf(t)?qf(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Kf(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function il(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=ko(t);return r.br(),new Cf(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Jf.bind(null,t),Ri:el.bind(null,t),Ir:Zf.bind(null,t),Tr:tl.bind(null,t)}),t.Mr.push((function(n){return a(e,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,Yf(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.Fr.length>0&&(No("RemoteStore","Stopping write stream with "+t.Fr.length+" pending writes"),t.Fr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kr
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var ol=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new vc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new _o(To.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function sl(t,e){if(Do("AsyncQueue",e+": "+t),Ic(t))return new _o(To.UNAVAILABLE,e+": "+t);throw t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var al=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||ss.comparator(e.key,n.key)}:function(t,e){return ss.comparator(t.key,e.key)},this.keyedMap=Ja(),this.sortedSet=new za(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),ul=function(){function t(){this.Qr=new za(ss.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):xo():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),cl=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,al.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ea(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),hl=function(){this.Wr=void 0,this.listeners=[]},fl=function(){this.queries=new gh((function(t){return na(t)}),ea),this.onlineState="Unknown",this.Gr=new Set};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,s,a,c;return u(this,(function(u){switch(u.label){case 0:if(n=ko(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new hl),!i)return[3,4];u.label=1;case 1:return u.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=u.sent(),[3,4];case 3:return a=u.sent(),c=sl(a,"Initialization of query '"+ra(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&vl(n),[2]}}))}))}function pl(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,s;return u(this,(function(a){return n=ko(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function dl(t,e){for(var n=ko(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.queries.get(a);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].Hr(s)&&(r=!0);u.Wr=s}}r&&vl(n)}function yl(t,e,n){var r=ko(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function vl(t){t.Gr.forEach((function(t){t.next()}))}var gl=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new cl(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=cl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),ml=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),bl=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return _u(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Cu(this.R,t.document,!1):Ts.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return wu(t)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=wl(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new bl(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],h=(e.get(c)||nu()).add(s);e.set(c,h)}}return e},t.prototype.complete=function(){return a(this,void 0,void 0,(function(){var t,e,n,r,i;return u(this,(function(o){switch(o.label){case 0:return[4,Yh(this.localStore,new bl(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,Xh(this.localStore,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new xh(Object.assign({},this.progress),t))]}}))}))}})();function wl(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var El=function(t){this.key=t},Il=function(t){this.key=t},Tl=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=nu(),this.mutatedKeys=nu(),this.lo=oa(t),this.fo=new al(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new ul,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=Qs(this.query)&&i.size===this.query.limit?i.last():null,c=Ws(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var h=i.get(t),f=ia(n.query,e)?e:null,l=!!h&&n.mutatedKeys.has(h.key),p=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),d=!1;h&&f?h.data.isEqual(f.data)?l!==p&&(r.track({type:3,doc:f}),d=!0):n.yo(h,f)||(r.track({type:2,doc:f}),d=!0,(u&&n.lo(f,u)>0||c&&n.lo(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),d=!0):h&&!f&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(a=!0)),d&&(f?(s=s.add(f),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),Qs(this.query)||Ws(this.query))for(;s.size>this.query.limit;){var h=Qs(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xo()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new cl(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new ul,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=nu(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new Il(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new El(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=nu();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return cl.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),_l=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Sl=function(t){this.key=t,this.bo=!1},Al=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new gh((function(t){return na(t)}),ea),this.Vo=new Map,this.So=new Set,this.Do=new za(ss.comparator),this.Co=new Map,this.No=new Jh,this.xo={},this.ko=new Map,this.Fo=oh.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function Nl(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,s,a;return u(this,(function(u){switch(u.label){case 0:return n=np(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,Kh(n.localStore,Zs(e))];case 2:return s=u.sent(),a=n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,[4,Dl(n,e,r,"current"===a)];case 3:i=u.sent(),n.isPrimaryClient&&Mf(n.remoteStore,s),u.label=4;case 4:return[2,i]}}))}))}function Dl(t,e,n,r){return a(this,void 0,void 0,(function(){var i,o,s,c,h,f;return u(this,(function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return a(this,void 0,void 0,(function(){var i,o,s;return u(this,(function(a){switch(a.label){case 0:return i=e.view._o(n),i.Nn?[4,Gh(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(jl(t,e.targetId,s.To),s.snapshot)]}}))}))}(t,e,n,r)},[4,Gh(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Tl(e,i.Bn),s=o._o(i.documents),c=su.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),h=o.applyChanges(s,t.isPrimaryClient,c),jl(t,n,h.To),f=new _l(e,n,o),[2,(t.Po.set(e,f),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),h.snapshot)]}}))}))}function Rl(t,e){return a(this,void 0,void 0,(function(){var n,r,i;return u(this,(function(o){switch(o.label){case 0:return n=ko(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!ea(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,zh(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),Ff(n.remoteStore,r.targetId),Ul(n,r.targetId)})).catch(hh)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Ul(n,r.targetId),[4,zh(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Cl(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o,s;return u(this,(function(a){switch(a.label){case 0:r=rp(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=ko(t),i=Uo.now(),o=e.reduce((function(t,e){return t.add(e.key)}),nu());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],h=Ra(c,n.get(c.key));null!=h&&s.push(new ka(c.key,h,Is(h.value.mapValue),_a.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new za(Mo)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,zl(r,i.changes)];case 3:return a.sent(),[4,Yf(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=sl(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function xl(t,e){return a(this,void 0,void 0,(function(){var n,r;return u(this,(function(i){switch(i.label){case 0:n=ko(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,qh(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(Oo(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Oo(r.bo):t.removedDocuments.size>0&&(Oo(r.bo),r.bo=!1))})),[4,zl(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,hh(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Ol(t,e,n){var r=ko(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=ko(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&vl(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function kl(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o,s,a,c;return u(this,(function(u){switch(u.label){case 0:return(r=ko(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new za(ss.comparator)).insert(o,Ts.newNoDocument(o,qo.min())),a=nu().add(o),c=new ou(qo.min(),new Map,new Qa(Mo),s,a),[4,xl(r,c)]):[3,2];case 1:return u.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Kl(r),[3,4];case 2:return[4,zh(r.localStore,e,!1).then((function(){return Ul(r,e,n)})).catch(hh)];case 3:u.sent(),u.label=4;case 4:return[2]}}))}))}function Ll(t,e){return a(this,void 0,void 0,(function(){var n,r,i;return u(this,(function(o){switch(o.label){case 0:n=ko(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Vh(n.localStore,e)];case 2:return i=o.sent(),Vl(n,r,null),Fl(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,zl(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,hh(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Pl(t,e,n){return a(this,void 0,void 0,(function(){var r,i;return u(this,(function(o){switch(o.label){case 0:r=ko(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=ko(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return Oo(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),Vl(r,e,n),Fl(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,zl(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,hh(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Ml(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,s;return u(this,(function(a){switch(a.label){case 0:Bf((n=ko(t)).remoteStore)||No("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=ko(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.ko.get(r)||[]).push(e),n.ko.set(r,i),[3,4]);case 3:return o=a.sent(),s=sl(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function Fl(t,e){(t.ko.get(e)||[]).forEach((function(t){t.resolve()})),t.ko.delete(e)}function Vl(t,e,n){var r=ko(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Ul(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||ql(t,e)}))}function ql(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Ff(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Kl(t))}function jl(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof El?(t.No.addReference(o.key,e),Bl(t,o)):o instanceof Il?(No("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||ql(t,o.key)):xo()}}function Bl(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(No("SyncEngine","New document in limbo: "+n),t.So.add(r),Kl(t))}function Kl(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new ss(Go.fromString(e)),r=t.Fo.next();t.Co.set(r,new Sl(n)),t.Do=t.Do.insert(n,r),Mf(t.remoteStore,new xc(Zs(Hs(n.path)),r,2,Io.o))}}function zl(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o,s;return u(this,(function(c){switch(c.label){case 0:return r=ko(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,a){s.push(r.Oo(a,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=kh.Pn(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return c.sent(),r.vo._r(i),[4,function(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,s,a,c,h,f;return u(this,(function(u){switch(u.label){case 0:n=ko(t),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return gc.forEach(e,(function(e){return gc.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return gc.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return u.sent(),[3,4];case 3:if(!Ic(r=u.sent()))throw r;return No("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],a=s.targetId,s.fromCache||(c=n.kn.get(a),h=c.snapshotVersion,f=c.withLastLimboFreeSnapshotVersion(h),n.kn=n.kn.insert(a,f));return[2]}}))}))}(r.localStore,o)];case 2:c.sent(),c.label=3;case 3:return[2]}}))}))}function Gl(t,e){return a(this,void 0,void 0,(function(){var n,r;return u(this,(function(i){switch(i.label){case 0:return(n=ko(t)).currentUser.isEqual(e)?[3,3]:(No("SyncEngine","User change. New user:",e.toKey()),[4,Fh(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.ko.forEach((function(t){t.forEach((function(t){t.reject(new _o(To.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.ko.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,zl(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Hl(t,e){var n=ko(t),r=n.Co.get(e);if(r&&r.bo)return nu().add(r.key);var i=nu(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function Ql(t,e){return a(this,void 0,void 0,(function(){var n,r,i;return u(this,(function(o){switch(o.label){case 0:return[4,Gh((n=ko(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&jl(n,e.targetId,i.To),i)]}}))}))}function Wl(t){return a(this,void 0,void 0,(function(){var e;return u(this,(function(n){return[2,Qh((e=ko(t)).localStore).then((function(t){return zl(e,t)}))]}))}))}function Yl(t,e,n,r){return a(this,void 0,void 0,(function(){var i,o;return u(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=ko(t),r=ko(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):gc.resolve(null)}))}))}((i=ko(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Yf(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Vl(i,e,r||null),Fl(i,e),function(t,e){ko(ko(t)._n).Gt(e)}(i.localStore,e)):xo(),s.label=4;case 4:return[4,zl(i,o)];case 5:return s.sent(),[3,7];case 6:No("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function Xl(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,s,a,c,h;return u(this,(function(u){switch(u.label){case 0:return np(n=ko(t)),rp(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,$l(n,r.toArray())]);case 1:return i=u.sent(),n.$o=!0,[4,nl(n.remoteStore,!0)];case 2:for(u.sent(),o=0,s=i;o<s.length;o++)a=s[o],Mf(n.remoteStore,a);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(c=[],h=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?c.push(e):h=h.then((function(){return Ul(n,e),zh(n.localStore,e,!0)})),Ff(n.remoteStore,e)})),[4,h]);case 4:return u.sent(),[4,$l(n,c)];case 5:return u.sent(),function(t){var e=ko(t);e.Co.forEach((function(t,n){Ff(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new za(ss.comparator)}(n),n.$o=!1,[4,nl(n.remoteStore,!1)];case 6:u.sent(),u.label=7;case 7:return[2]}}))}))}function $l(t,e,n){return a(this,void 0,void 0,(function(){var n,r,i,o,s,a,c,h,f,l,p,d,y,v;return u(this,(function(u){switch(u.label){case 0:n=ko(t),r=[],i=[],o=0,s=e,u.label=1;case 1:return o<s.length?(a=s[o],c=void 0,(h=n.Vo.get(a))&&0!==h.length?[4,Kh(n.localStore,Zs(h[0]))]:[3,7]):[3,13];case 2:c=u.sent(),f=0,l=h,u.label=3;case 3:return f<l.length?(p=l[f],d=n.Po.get(p),[4,Ql(n,d)]):[3,6];case 4:(y=u.sent()).snapshot&&i.push(y.snapshot),u.label=5;case 5:return f++,[3,3];case 6:return[3,11];case 7:return[4,Hh(n.localStore,a)];case 8:return v=u.sent(),[4,Kh(n.localStore,v)];case 9:return c=u.sent(),[4,Dl(n,Jl(v),a,!1)];case 10:u.sent(),u.label=11;case 11:r.push(c),u.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function Jl(t){return Gs(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Zl(t){var e=ko(t);return ko(ko(e.localStore).persistence).fn()}function tp(t,e,n,r){return a(this,void 0,void 0,(function(){var i,o,s;return u(this,(function(a){switch(a.label){case 0:return(i=ko(t)).$o?(No("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Qh(i.localStore)];case 3:return o=a.sent(),s=ou.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,zl(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,zh(i.localStore,e,!0)];case 6:return a.sent(),Ul(i,e,r),[3,8];case 7:xo(),a.label=8;case 8:return[2]}}))}))}function ep(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o,s,a,c,h,f,l,p;return u(this,(function(d){switch(d.label){case 0:if(!(r=np(t)).$o)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?(s=o[i],r.Vo.has(s)?(No("SyncEngine","Adding an already active target "+s),[3,5]):[4,Hh(r.localStore,s)]):[3,6];case 2:return a=d.sent(),[4,Kh(r.localStore,a)];case 3:return c=d.sent(),[4,Dl(r,Jl(a),c.targetId,!1)];case 4:d.sent(),Mf(r.remoteStore,c),d.label=5;case 5:return i++,[3,1];case 6:h=function(t){return u(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,zh(r.localStore,t,!1).then((function(){Ff(r.remoteStore,t),Ul(r,t)})).catch(hh)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},f=0,l=n,d.label=7;case 7:return f<l.length?(p=l[f],[5,h(p)]):[3,10];case 8:d.sent(),d.label=9;case 9:return f++,[3,7];case 10:return[2]}}))}))}function np(t){var e=ko(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=xl.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Hl.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kl.bind(null,e),e.vo._r=dl.bind(null,e.eventManager),e.vo.Mo=yl.bind(null,e.eventManager),e}function rp(t){var e=ko(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ll.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Pl.bind(null,e),e}var ip=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return a(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return this.R=Af(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return Mh(this.persistence,new Lh,t.initialUser,this.R)},t.prototype.qo=function(t){return new of(af.bs,this.R)},t.prototype.Bo=function(t){return new mf},t.prototype.terminate=function(){return a(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),op=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return o(e,t),e.prototype.initialize=function(e){return a(this,void 0,void 0,(function(){var n=this;return u(this,(function(r){switch(r.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return r.sent(),[4,Wh(this.localStore)];case 2:return r.sent(),[4,this.Qo.initialize(this,e)];case 3:return r.sent(),[4,rp(this.Qo.syncEngine)];case 4:return r.sent(),[4,Yf(this.Qo.remoteStore)];case 5:return r.sent(),[4,this.persistence.He((function(){return n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()}))];case 6:return r.sent(),[2]}}))}))},e.prototype.Ko=function(t){return Mh(this.persistence,new Lh,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new ph(e,t.asyncQueue)},e.prototype.qo=function(t){var e=Ch(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?$c.withCacheSize(this.cacheSizeBytes):$c.DEFAULT;return new Nh(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,_f(),Sf(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new mf},e}(ip),sp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return o(e,t),e.prototype.initialize=function(e){return a(this,void 0,void 0,(function(){var n,r=this;return u(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof gf?(this.sharedClientState.syncEngine={ui:Yl.bind(null,n),ai:tp.bind(null,n),hi:ep.bind(null,n),fn:Zl.bind(null,n),ci:Wl.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return a(r,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,Xl(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=_f();if(!gf.yt(e))throw new _o(To.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Ch(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new gf(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(op),ap=function(){function t(){}return t.prototype.initialize=function(t,e){return a(this,void 0,void 0,(function(){var n=this;return u(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Ol(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Gl.bind(null,this.syncEngine),[4,nl(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new fl},t.prototype.createDatastore=function(t){var e,n=Af(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new Tf(e));return function(t,e,n){return new xf(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Ol(s.syncEngine,t,0)},o=wf.yt()?new wf:new bf,new kf(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new Al(t,e,n,r,i,o);return s&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return a(this,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return e=ko(t),No("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,Pf(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var up=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),cp=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new vc,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return a(this,void 0,void 0,(function(){return u(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return a(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return a(this,void 0,void 0,(function(){var t,e,n,r;return u(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new ml(JSON.parse(r),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return a(this,void 0,void 0,(function(){var t,e;return u(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return a(this,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return a(this,void 0,void 0,(function(){var t,e;return u(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return a(this,void 0,void 0,(function(){var e,n=this;return u(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new _o(To.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,s,a;return u(this,(function(u){switch(u.label){case 0:return n=ko(t),r=Nu(n.R)+"/documents",i={documents:e.map((function(t){return Tu(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){Oo(!!e.found),e.found.name,e.found.updateTime;var n=_u(t,e.found.name),r=wu(e.found.updateTime),i=new Es({mapValue:{fields:e.found.fields}});return Ts.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Oo(!!e.missing),Oo(!!e.readTime);var n=_u(t,e.missing),r=wu(e.readTime);return Ts.newNoDocument(n,r)}(t,e):xo()}(n.R,t);s.set(e.key.toString(),e)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());Oo(!!e),a.push(e)})),a)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Ua(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return a(this,void 0,void 0,(function(){var t,e=this;return u(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=ss.fromPath(n);e.mutations.push(new qa(r,e.precondition(r)))})),[4,function(t,e){return a(this,void 0,void 0,(function(){var n,r,i;return u(this,(function(o){switch(o.label){case 0:return n=ko(t),r=Nu(n.R)+"/documents",i={writes:e.map((function(t){return xu(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw xo();e=qo.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new _o(To.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?_a.updateTime(e):_a.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(qo.min()))throw new _o(To.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _a.updateTime(e)}return _a.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),hp=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Nf(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return a(t,void 0,void 0,(function(){var t,e,n=this;return u(this,(function(r){return t=new cp(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!rs(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Ba(e)}return!1},t}(),fp=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=uf.UNAUTHENTICATED,this.clientId=Po.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return a(r,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return No("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return a(this,void 0,void 0,(function(){return u(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new _o(To.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new vc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return a(t,void 0,void 0,(function(){var t,n;return u(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=sl(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(t,e){return a(this,void 0,void 0,(function(){var n,r,i=this;return u(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),No("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return a(i,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,Fh(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function pp(t,e){return a(this,void 0,void 0,(function(){var n,r;return u(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,dp(t)];case 1:return n=i.sent(),No("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return a(this,void 0,void 0,(function(){var n,r;return u(this,(function(i){switch(i.label){case 0:return(n=ko(t)).asyncQueue.verifyOperationInProgress(),No("RemoteStore","RemoteStore received new credentials"),r=Bf(n),n.Or.add(3),[4,Pf(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,Lf(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function dp(t){return a(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(No("FirestoreClient","Using default OfflineComponentProvider"),[4,lp(t,new ip)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function yp(t){return a(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(No("FirestoreClient","Using default OnlineComponentProvider"),[4,pp(t,new ap)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function vp(t){return dp(t).then((function(t){return t.persistence}))}function gp(t){return dp(t).then((function(t){return t.localStore}))}function mp(t){return yp(t).then((function(t){return t.remoteStore}))}function bp(t){return yp(t).then((function(t){return t.syncEngine}))}function wp(t){return a(this,void 0,void 0,(function(){var e,n;return u(this,(function(r){switch(r.label){case 0:return[4,yp(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Nl.bind(null,e.syncEngine),n.onUnlisten=Rl.bind(null,e.syncEngine),n)]}}))}))}function Ep(t,e,n){var r=this;void 0===n&&(n={});var i=new vc;return t.asyncQueue.enqueueAndForget((function(){return a(r,void 0,void 0,(function(){var r;return u(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new up({next:function(o){e.enqueueAndForget((function(){return pl(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new _o(To.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new _o(To.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new gl(Hs(n.path),o,{includeMetadataChanges:!0,so:!0});return ll(t,s)},[4,wp(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function Ip(t,e,n){var r=this;void 0===n&&(n={});var i=new vc;return t.asyncQueue.enqueueAndForget((function(){return a(r,void 0,void 0,(function(){var r;return u(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new up({next:function(n){e.enqueueAndForget((function(){return pl(t,s)})),n.fromCache&&"server"===r.source?i.reject(new _o(To.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new gl(n,o,{includeMetadataChanges:!0,so:!0});return ll(t,s)},[4,wp(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var Tp=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},_p=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Sp=new Map,Ap=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Np=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(uf.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Dp=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Rp=function(){function t(t){var e=this;this.currentUser=uf.UNAUTHENTICATED,this.oc=new vc,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){No("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(No("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(No("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Oo("string"==typeof n.accessToken),new Ap(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return a(n,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return Oo(null===t||"string"==typeof t),new uf(t)},t}(),Cp=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=uf.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),xp=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new Cp(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(uf.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(t,e,n){if(!n)throw new _o(To.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function kp(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new _o(To.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Lp(t,e,n,r){if(!0===e&&!0===r)throw new _o(To.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Pp(t){if(!ss.isDocumentKey(t))throw new _o(To.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Mp(t){if(ss.isDocumentKey(t))throw new _o(To.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Fp(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==(0,r.Z)(t)){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":xo()}function Vp(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new _o(To.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Fp(t);throw new _o(To.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Up(t,e){if(e<=0)throw new _o(To.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qp=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new _o(To.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new _o(To.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Lp("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),jp=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qp({}),this._settingsFrozen=!1,t instanceof _p?(this._databaseId=t,this._credentials=new Np):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new _o(To.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _p(t.options.projectId)}(t),this._credentials=new Rp(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new _o(To.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new _o(To.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qp(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Np;switch(t.type){case"gapi":var e=t.client;return Oo(!("object"!=(0,r.Z)(e)||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new xp(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new _o(To.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return t=this,(e=Sp.get(t))&&(No("ComponentProvider","Removing Datastore"),Sp.delete(t),e.terminate()),Promise.resolve();var t,e},t}(),Bp=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new zp(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Kp=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),zp=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Hs(r))||this)._path=r,i.type="collection",i}return o(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Bp(this.firestore,null,new ss(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Kp);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=B(t),Op("collection","path",e),t instanceof jp)return Mp(n=Go.fromString.apply(Go,f([e],r))),new zp(t,null,n);if(!(t instanceof Bp||t instanceof zp))throw new _o(To.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Mp(n=Go.fromString.apply(Go,f([t.path],r)).child(Go.fromString(e))),new zp(t.firestore,null,n)}function Hp(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=B(t),1===arguments.length&&(e=Po.u()),Op("doc","path",e),t instanceof jp)return Pp(n=Go.fromString.apply(Go,f([e],r))),new Bp(t,null,new ss(n));if(!(t instanceof Bp||t instanceof zp))throw new _o(To.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Pp(n=t._path.child(Go.fromString.apply(Go,f([e],r)))),new Bp(t.firestore,t instanceof zp?t.converter:null,new ss(n))}function Qp(t,e){return t=B(t),e=B(e),(t instanceof Bp||t instanceof zp)&&(e instanceof Bp||e instanceof zp)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Wp(t,e){return t=B(t),e=B(e),t instanceof Kp&&e instanceof Kp&&t.firestore===e.firestore&&ea(t._query,e._query)&&t.converter===e.converter
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Yp=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Nf(this,"async_queue_retry"),this.Ic=function(){var e=Sf();e&&No("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Sf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=Sf();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new vc;return this.Rc((function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.bc()}))},t.prototype.bc=function(){return a(this,void 0,void 0,(function(){var t,e=this;return u(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Ic(t=n.sent()))throw t;return No("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return e.bc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Rc=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,Do("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.gc=!1,t}))}));return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=ol.createAndSchedule(this,t,e,n,(function(t){return r.vc(t)}));return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&xo()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return a(this,void 0,void 0,(function(){var t;return u(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()}))},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function Xp(t){return function(t,e){if("object"!=(0,r.Z)(t)||null===t)return!1;for(var n=t,i=0,o=["next","error","complete"];i<o.length;i++){var s=o[i];if(s in n&&"function"==typeof n[s])return!0}return!1}(t)}(function(){function t(){this._progressObserver={},this._taskCompletionResolver=new vc,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}})();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $p=-1,Jp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new Yp,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return o(e,t),e.prototype._terminate=function(){return this._firestoreClient||td(this),this._firestoreClient.terminate()},e}(jp);function Zp(t){return t._firestoreClient||td(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function td(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Tp(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new fp(t._credentials,t._queue,r)}function ed(t,e,n){var r=this,i=new vc;return t.asyncQueue.enqueue((function(){return a(r,void 0,void 0,(function(){var r;return u(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,lp(t,n)];case 1:return o.sent(),[4,pp(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===To.FAILED_PRECONDITION||t.code===To.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function nd(t){if(t._initialized||t._terminated)throw new _o(To.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rd=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new _o(To.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qo(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),id=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Yo.fromBase64String(e))}catch(e){throw new _o(To.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Yo.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),od=function(t){this._methodName=t},sd=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new _o(To.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new _o(To.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Mo(this._lat,t._lat)||Mo(this._long,t._long)},t}(),ad=/^__.*__$/,ud=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new ka(t,this.data,this.fieldMask,e,this.fieldTransforms):new Oa(t,this.data,e,this.fieldTransforms)},t}(),cd=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new ka(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hd(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xo()}}var fd=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,Fc:!0})},t.prototype.Lc=function(t){return xd(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(hd(this.Nc)&&ad.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),ld=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Af(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new fd({Nc:t,methodName:e,qc:n,path:Qo.emptyPath(),Fc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function pd(t){var e=t._freezeSettings(),n=Af(t._databaseId);return new ld(t._databaseId,!!e.ignoreUndefinedProperties,n)}function dd(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);Nd("Data must be an object, but it was:",s,r);var a,u,c=Sd(r,s);if(o.merge)a=new Wo(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var h=[],f=0,l=o.mergeFields;f<l.length;f++){var p=Dd(e,l[f],n);if(!s.contains(p))throw new _o(To.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");Od(h,p)||h.push(p)}a=new Wo(h),u=s.fieldTransforms.filter((function(t){return a.covers(t.field)}))}else a=null,u=s.fieldTransforms;return new ud(new Es(c),a,u)}var yd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw 1===t.Nc?t.Lc(this._methodName+"() can only appear at the top level of your update data"):t.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(od);function vd(t,e,n){return new fd({Nc:3,qc:e.settings.qc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var gd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._toFieldTransform=function(t){return new Ia(t.path,new da)},e.prototype.isEqual=function(t){return t instanceof e},e}(od),md=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return o(e,t),e.prototype._toFieldTransform=function(t){var e=vd(this,t,!0),n=this.Kc.map((function(t){return _d(t,e)})),r=new ya(n);return new Ia(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(od),bd=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return o(e,t),e.prototype._toFieldTransform=function(t){var e=vd(this,t,!0),n=this.Kc.map((function(t){return _d(t,e)})),r=new ga(n);return new Ia(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(od),wd=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return o(e,t),e.prototype._toFieldTransform=function(t){var e=new ba(t.R,ca(t.R,this.Qc));return new Ia(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(od);function Ed(t,e,n,r){var i=t.Uc(1,e,n);Nd("Data must be an object, but it was:",i,r);var o=[],s=Es.empty();Bo(r,(function(t,r){var a=Cd(e,t,n);r=B(r);var u=i.Oc(a);if(r instanceof yd)o.push(a);else{var c=_d(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new Wo(o);return new cd(s,a,i.fieldTransforms)}function Id(t,e,n,r,i,o){var s=t.Uc(1,e,n),a=[Dd(e,r,n)],u=[i];if(o.length%2!=0)throw new _o(To.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Dd(e,o[c])),u.push(o[c+1]);for(var h=[],f=Es.empty(),l=a.length-1;l>=0;--l)if(!Od(h,a[l])){var p=a[l],d=u[l];d=B(d);var y=s.Oc(p);if(d instanceof yd)h.push(p);else{var v=_d(d,y);null!=v&&(h.push(p),f.set(p,v))}}var g=new Wo(h);return new cd(f,g,s.fieldTransforms)}function Td(t,e,n,r){return void 0===r&&(r=!1),_d(n,t.Uc(r?4:3,e))}function _d(t,e){if(Ad(t=B(t)))return Nd("Unsupported field value:",e,t),Sd(t,e);if(t instanceof od)return function(t,e){if(!hd(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=_d(o[i],e.Mc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=B(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ca(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Uo.fromDate(t);return{timestampValue:gu(e.R,n)}}if(t instanceof Uo)return n=new Uo(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:gu(e.R,n)};if(t instanceof sd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof id)return{bytesValue:mu(e.R,t._byteString)};if(t instanceof Bp){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Eu(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+Fp(t))}(t,e)}function Sd(t,e){var n={};return Ko(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bo(t,(function(t,r){var i=_d(r,e.kc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Ad(t){return!("object"!=(0,r.Z)(t)||null===t||t instanceof Array||t instanceof Date||t instanceof Uo||t instanceof sd||t instanceof id||t instanceof Bp||t instanceof od)}function Nd(t,e,n){if(!Ad(n)||!function(t){return"object"==(0,r.Z)(t)&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var i=Fp(n);throw"an object"===i?e.Lc(t+" a custom object"):e.Lc(t+" "+i)}}function Dd(t,e,n){if((e=B(e))instanceof rd)return e._internalPath;if("string"==typeof e)return Cd(t,e);throw xd("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Rd=new RegExp("[~\\*/\\[\\]]");function Cd(t,e,n){if(e.search(Rd)>=0)throw xd("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(rd.bind.apply(rd,f([void 0],e.split(".")))))._internalPath}catch(r){throw xd("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function xd(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new _o(To.INVALID_ARGUMENT,(a+=". ")+t+u)}function Od(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kd=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Bp(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Ld(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Pd("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Ld=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(kd);function Pd(t,e){return"string"==typeof e?Cd(t,e):e instanceof rd?e._internalPath:e._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Md=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Fd=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return o(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Vd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Pd("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(kd),Vd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Fd),Ud=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Md(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new Vd(n._firestore,n._userDataWriter,r.key,r,new Md(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new _o(To.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new Vd(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Md(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Vd(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Md(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:qd(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function qd(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xo()}}function jd(t,e){return t instanceof Fd&&e instanceof Fd?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Ud&&e instanceof Ud&&t._firestore===e._firestore&&Wp(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bd(t){if(Ws(t)&&0===t.explicitOrderBy.length)throw new _o(To.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Kd=function(){};function zd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Gd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return o(e,t),e.prototype._apply=function(t){var e=pd(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new _o(To.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Jd(s,o);for(var u=[],c=0,h=s;c<h.length;c++){var f=h[c];u.push($d(r,t,f))}a={arrayValue:{values:u}}}else a=$d(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Jd(s,o),a=Td(n,"where",s,"in"===o||"not-in"===o);var l=Rs.create(i,o,a);return function(t,e){if(e.g()){var n=Xs(t);if(null!==n&&!n.isEqual(e.field))throw new _o(To.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Ys(t);null!==r&&Zd(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new _o(To.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new _o(To.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,l),l}(t._query,0,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new Kp(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new zs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Kd),Hd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return o(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new _o(To.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new _o(To.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new qs(e,n);return function(t,e){if(null===Ys(t)){var n=Xs(t);null!==n&&Zd(t,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new Kp(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new zs(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Kd),Qd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return o(e,t),e.prototype._apply=function(t){return new Kp(t.firestore,t.converter,ta(t._query,this.Hc,this.Jc))},e}(Kd),Wd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return o(e,t),e.prototype._apply=function(t){var e=Xd(t,this.type,this.Yc,this.Xc);return new Kp(t.firestore,t.converter,function(t,e){return new zs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Kd),Yd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return o(e,t),e.prototype._apply=function(t){var e=Xd(t,this.type,this.Yc,this.Xc);return new Kp(t.firestore,t.converter,function(t,e){return new zs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Kd);function Xd(t,e,n,i){if(n[0]=B(n[0]),n[0]instanceof kd)return function(t,e,n,r,i){if(!r)throw new _o(To.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Js(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(ds(e,r.key));else{var c=r.data.field(u.field);if(ts(c))throw new _o(To.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.canonicalString();throw new _o(To.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Vs(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,i);var o=pd(t.firestore);return function(t,e,n,i,o,s){var a=t.explicitOrderBy;if(o.length>a.length)throw new _o(To.INVALID_ARGUMENT,"Too many arguments provided to "+i+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var u=[],c=0;c<o.length;c++){var h=o[c];if(a[c].field.isKeyField()){if("string"!=typeof h)throw new _o(To.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+i+"(), but got a "+(0,r.Z)(h));if(!$s(t)&&-1!==h.indexOf("/"))throw new _o(To.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+i+"() must be a plain document ID, but '"+h+"' contains a slash.");var f=t.path.child(Go.fromString(h));if(!ss.isDocumentKey(f))throw new _o(To.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+i+"() must result in a valid document path, but '"+f+"' is not because it contains an odd number of segments.");var l=new ss(f);u.push(ds(e,l))}else{var p=Td(n,i,h);u.push(p)}}return new Vs(u,s)}(t._query,t.firestore._databaseId,o,e,n,i)}function $d(t,e,n){if("string"==typeof(n=B(n))){if(""===n)throw new _o(To.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!$s(e)&&-1!==n.indexOf("/"))throw new _o(To.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Go.fromString(n));if(!ss.isDocumentKey(r))throw new _o(To.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return ds(t,new ss(r))}if(n instanceof Bp)return ds(t,n._key);throw new _o(To.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Fp(n)+".")}function Jd(t,e){if(!Array.isArray(t)||0===t.length)throw new _o(To.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new _o(To.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Zd(t,e,n){if(!n.isEqual(e))throw new _o(To.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ty=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),as(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Jo(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Zo(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw xo()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Bo(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new sd(Jo(t.latitude),Jo(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=es(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(ns(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=$o(t);return new Uo(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Go.fromString(t);Oo(Hu(n));var r=new _p(n.get(1),n.get(3)),i=new ss(n.popFirst(5));return r.isEqual(e)||Do("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var ny=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return o(e,t),e.prototype.convertBytes=function(t){return new id(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Bp(this.firestore,null,e)},e}(ty),ry=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=pd(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=iy(t,this._firestore),i=ey(r.converter,e,n),o=dd(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,_a.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=iy(t,this._firestore);return o="string"==typeof(e=B(e))||e instanceof rd?Id(this._dataReader,"WriteBatch.update",s._key,e,n,r):Ed(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,_a.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=iy(t,this._firestore);return this._mutations=this._mutations.concat(new Ua(e._key,_a.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new _o(To.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(t,e){if((t=B(t)).firestore!==e)throw new _o(To.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oy=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return o(e,t),e.prototype.convertBytes=function(t){return new id(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Bp(this.firestore,null,e)},e}(ty);function sy(t,e,n){t=Vp(t,Bp);var r=Vp(t.firestore,Jp),i=ey(t.converter,e,n);return cy(r,[dd(pd(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,_a.none())])}function ay(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Vp(t,Bp);var o=Vp(t.firestore,Jp),s=pd(o);return cy(o,[("string"==typeof(e=B(e))||e instanceof rd?Id(s,"updateDoc",t._key,e,n,r):Ed(s,"updateDoc",t._key,e)).toMutation(t._key,_a.exists(!0))])}function uy(t){for(var e,n,i,o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];t=B(t);var c={includeMetadataChanges:!1},h=0;"object"!=(0,r.Z)(o[h])||Xp(o[h])||(c=o[h],h++);var f,l,p,d={includeMetadataChanges:c.includeMetadataChanges};if(Xp(o[h])){var y=o[h];o[h]=null===(e=y.next)||void 0===e?void 0:e.bind(y),o[h+1]=null===(n=y.error)||void 0===n?void 0:n.bind(y),o[h+2]=null===(i=y.complete)||void 0===i?void 0:i.bind(y)}if(t instanceof Bp)l=Vp(t.firestore,Jp),p=Hs(t._key.path),f={next:function(e){o[h]&&o[h](hy(l,t,e))},error:o[h+1],complete:o[h+2]};else{var v=Vp(t,Kp);l=Vp(v.firestore,Jp),p=v._query;var g=new oy(l);f={next:function(t){o[h]&&o[h](new Ud(l,g,v,t))},error:o[h+1],complete:o[h+2]},Bd(t._query)}return function(t,e,n,r){var i=this,o=new up(r),s=new gl(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return a(i,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return e=ll,[4,wp(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return a(i,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return e=pl,[4,wp(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(Zp(l),p,d,f)}function cy(t,e){return function(t,e){var n=this,r=new vc;return t.asyncQueue.enqueueAndForget((function(){return a(n,void 0,void 0,(function(){var n;return u(this,(function(i){switch(i.label){case 0:return n=Cl,[4,bp(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(Zp(t),e)}function hy(t,e,n){var r=n.docs.get(e._key),i=new oy(t);return new Fd(t,i,e._key,r,new Md(n.hasPendingWrites,n.fromCache),e.converter)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fy=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return o(e,t),e.prototype.get=function(e){var n=this,r=iy(e,this._firestore),i=new oy(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new Fd(n._firestore,i,r._key,t._document,new Md(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=pd(t)}return t.prototype.get=function(t){var e=this,n=iy(t,this._firestore),r=new ny(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return xo();var i=t[0];if(i.isFoundDocument())return new kd(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new kd(e._firestore,r,n._key,null,n.converter);throw xo()}))},t.prototype.set=function(t,e,n){var r=iy(t,this._firestore),i=ey(r.converter,e,n),o=dd(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=iy(t,this._firestore);return o="string"==typeof(e=B(e))||e instanceof rd?Id(this._dataReader,"Transaction.update",s._key,e,n,r):Ed(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=iy(t,this._firestore);return this._transaction.delete(e._key),this},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ly(){if("undefined"==typeof Uint8Array)throw new _o(To.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function py(){if("undefined"==typeof atob)throw new _o(To.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var dy=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return py(),new t(id.fromBase64String(e))},t.fromUint8Array=function(e){return ly(),new t(id.fromUint8Array(e))},t.prototype.toBase64=function(){return py(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return ly(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),yy=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){nd(t=Vp(t,Jp));var n=Zp(t),r=t._freezeSettings(),i=new ap;return ed(n,i,new op(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){nd(t=Vp(t,Jp));var e=Zp(t),n=t._freezeSettings(),r=new ap;return ed(e,r,new sp(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new _o(To.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new vc;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return a(e,void 0,void 0,(function(){var e;return u(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return a(this,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return bc.yt()?(e=t+"main",[4,bc.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Ch(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),vy=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof _p||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||Ro("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){var i;void 0===r&&(r={});var o=(t=Vp(t,jp))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&Ro("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},o),{host:e+":"+n,ssl:!1})),r.mockUserToken){var s,a;if("string"==typeof r.mockUserToken)s=r.mockUserToken,a=uf.MOCK_USER;else{s=E(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);var u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new _o(To.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new uf(u)}t._credentials=new Dp(new Ap(s,a))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return a(e,void 0,void 0,(function(){var e,n;return u(this,(function(r){switch(r.label){case 0:return[4,vp(t)];case 1:return e=r.sent(),[4,mp(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=ko(t);return e.Or.delete(0),Lf(e)}(n))]}}))}))}))}(Zp(Vp(this._delegate,Jp)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return a(e,void 0,void 0,(function(){var e,n;return u(this,(function(r){switch(r.label){case 0:return[4,vp(t)];case 1:return e=r.sent(),[4,mp(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return a(this,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return(e=ko(t)).Or.add(0),[4,Pf(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Zp(Vp(this._delegate,Jp)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Lp("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new vc;return t.asyncQueue.enqueueAndForget((function(){return a(e,void 0,void 0,(function(){var e;return u(this,(function(r){switch(r.label){case 0:return e=Ml,[4,bp(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Zp(Vp(this._delegate,Jp)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new up(e);return t.asyncQueue.enqueueAndForget((function(){return a(n,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return e=function(t,e){ko(t).Gr.add(e),e.next()},[4,wp(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return a(n,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return e=function(t,e){ko(t).Gr.delete(e)},[4,wp(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(Zp(t=Vp(t,Jp)),Xp(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new _o(To.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new xy(this,Gp(this._delegate,t))}catch(t){throw Ty(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Iy(this,Hp(this._delegate,t))}catch(t){throw Ty(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Dy(this,function(t,e){if(t=Vp(t,jp),Op("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new _o(To.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Kp(t,null,function(t){return new zs(Go.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Ty(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new vc;return t.asyncQueue.enqueueAndForget((function(){return a(n,void 0,void 0,(function(){var n;return u(this,(function(i){switch(i.label){case 0:return[4,function(t){return yp(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new hp(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(Zp(t),(function(n){return e(new fy(t,n))}))}(this._delegate,(function(n){return t(new by(e,n))}))},t.prototype.batch=function(){var t=this;return Zp(this._delegate),new wy(new ry(this._delegate,(function(e){return cy(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new _o(To.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new _o(To.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),gy=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return o(e,t),e.prototype.convertBytes=function(t){return new dy(new id(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Iy.eu(e,this.firestore,null)},e}(ty);function my(t){var e;e=t,So.setLogLevel(e)}var by=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new gy(t)}return t.prototype.get=function(t){var e=this,n=Oy(t);return this._delegate.get(n).then((function(t){return new Ay(e._firestore,new Fd(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=Oy(t);return n?(kp("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Oy(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,f([s,e,n],i)),this},t.prototype.delete=function(t){var e=Oy(t);return this._delegate.delete(e),this},t}(),wy=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Oy(t);return n?(kp("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Oy(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,f([s,e,n],i)),this},t.prototype.delete=function(t){var e=Oy(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),Ey=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Vd(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Ny(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new gy(e),n),i.set(n,o)),o},t}();Ey.su=new WeakMap;var Iy=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new gy(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new _o(To.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Bp(n._delegate,r,new ss(e)))},t.eu=function(e,n,r){return new t(n,new Bp(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new xy(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new xy(this.firestore,Gp(this._delegate,t))}catch(t){throw Ty(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=B(t))instanceof Bp&&Qp(this._delegate,t)},t.prototype.set=function(t,e){e=kp("DocumentReference.set",e);try{return e?sy(this._delegate,t,e):sy(this._delegate,t)}catch(t){throw Ty(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?ay(this._delegate,t):ay.apply(void 0,f([this._delegate,t,e],n))}catch(t){throw Ty(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return cy(Vp((t=this._delegate).firestore,Jp),[new Ua(t._key,_a.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=_y(e),i=Sy(e,(function(e){return new Ay(t.firestore,new Fd(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return uy(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Vp(t,Bp);var e=Vp(t.firestore,Jp),n=Zp(e),r=new oy(e);return function(t,e){var n=this,r=new vc;return t.asyncQueue.enqueueAndForget((function(){return a(n,void 0,void 0,(function(){var n;return u(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return a(this,void 0,void 0,(function(){var r,i;return u(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=ko(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new _o(To.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=sl(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,gp(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new Fd(e,r,t._key,n,new Md(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Vp(t,Bp);var e=Vp(t.firestore,Jp);return Ep(Zp(e),t._key,{source:"server"}).then((function(n){return hy(e,t,n)}))}(this._delegate):function(t){t=Vp(t,Bp);var e=Vp(t.firestore,Jp);return Ep(Zp(e),t._key).then((function(n){return hy(e,t,n)}))}(this._delegate)).then((function(t){return new Ay(e.firestore,new Fd(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Ey.nu(this.firestore,e)):this._delegate.withConverter(null))},t}();function Ty(t,e,n){return t.message=t.message.replace(e,n),t}function _y(t){for(var e=0,n=t;e<n.length;e++){var i=n[e];if("object"==(0,r.Z)(i)&&!Xp(i))return i}return{}}function Sy(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Xp(t[0])?t[0]:Xp(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Ay=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Iy(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return jd(this._delegate,t._delegate)},t}(),Ny=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Ay),Dy=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new gy(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,zd(this._delegate,function(t,e,n){var r=e,i=Pd("where",t);return new Gd(i,r,n)}(e,n,r)))}catch(e){throw Ty(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,zd(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Pd("orderBy",t);return new Hd(r,n)}(e,n)))}catch(e){throw Ty(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,zd(this._delegate,function(t){return Up("limit",t),new Qd("limit",t,"F")}(e)))}catch(e){throw Ty(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,zd(this._delegate,function(t){return Up("limitToLast",t),new Qd("limitToLast",t,"L")}(e)))}catch(e){throw Ty(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,zd(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wd("startAt",t,!0)}.apply(void 0,e)))}catch(e){throw Ty(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,zd(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wd("startAfter",t,!1)}.apply(void 0,e)))}catch(e){throw Ty(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,zd(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Yd("endBefore",t,!0)}.apply(void 0,e)))}catch(e){throw Ty(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,zd(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Yd("endAt",t,!1)}.apply(void 0,e)))}catch(e){throw Ty(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Wp(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Vp(t,Kp);var e=Vp(t.firestore,Jp),n=Zp(e),r=new oy(e);return function(t,e){var n=this,r=new vc;return t.asyncQueue.enqueueAndForget((function(){return a(n,void 0,void 0,(function(){var n;return u(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o,s,a;return u(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Gh(t,e,!0)];case 1:return a=u.sent(),r=new Tl(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=sl(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,gp(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new Ud(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Vp(t,Kp);var e=Vp(t.firestore,Jp),n=Zp(e),r=new oy(e);return Ip(n,t._query,{source:"server"}).then((function(n){return new Ud(e,r,t,n)}))}(this._delegate):function(t){t=Vp(t,Kp);var e=Vp(t.firestore,Jp),n=Zp(e),r=new oy(e);return Bd(t._query),Ip(n,t._query).then((function(n){return new Ud(e,r,t,n)}))}(this._delegate)).then((function(t){return new Cy(e.firestore,new Ud(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=_y(e),i=Sy(e,(function(e){return new Cy(t.firestore,new Ud(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return uy(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Ey.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(),Ry=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Ny(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),Cy=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Dy(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new Ny(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new Ry(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new Ny(n._firestore,r))}))},t.prototype.isEqual=function(t){return jd(this._delegate,t._delegate)},t}(),xy=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return o(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Iy(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Iy(this.firestore,void 0===t?Hp(this._delegate):Hp(this._delegate,t))}catch(t){throw Ty(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Vp(t.firestore,Jp),r=Hp(t),i=ey(t.converter,e);return cy(n,[dd(pd(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,_a.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new Iy(e.firestore,t)}))},e.prototype.isEqual=function(t){return Qp(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(Ey.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(Dy);function Oy(t){return Vp(t,Bp)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ky=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(rd.bind.apply(rd,f([void 0],t)))}return t.documentId=function(){return new t(Qo.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=B(t))instanceof rd&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Ly=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new gd("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new yd("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new md("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new bd("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new wd("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Py={Firestore:vy,GeoPoint:sd,Timestamp:Uo,Blob:dy,Transaction:by,WriteBatch:wy,DocumentReference:Iy,DocumentSnapshot:Ay,Query:Dy,QueryDocumentSnapshot:Ny,QuerySnapshot:Cy,CollectionReference:xy,FieldPath:ky,FieldValue:Ly,setLogLevel:my,CACHE_SIZE_UNLIMITED:$p};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function My(t){!function(t,e){t.INTERNAL.registerComponent(new K("firestore",(function(t){var n=t.getProvider("app").getImmediate();return e(n,t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Py)))}(t,(function(t,e){return new vy(t,new Jp(t,e),new yy)})),t.registerVersion("@firebase/firestore","2.4.1")}My(Vt);var Fy={apiKey:"AIzaSyAi0FdcxdseEEherBZ9_sffZ4qCdTMpmMU",authDomain:"thuybanhang-92229.firebaseapp.com",projectId:"thuybanhang-92229",storageBucket:"thuybanhang-92229.appspot.com",messagingSenderId:"58654744526",appId:"1:58654744526:web:957193785f9b77a3bcd59f",measurementId:"G-815MV566D6"},Vy=Vt.initializeApp(Fy),Uy=Vy.firestore()}}]);
//# sourceMappingURL=805-legacy.db132173.js.map